_jsload_('mouse', 'g.Sb.Ib({rN:"_docMsMov",Ica:function(){var a=this.Ya.ad;g.F.h(a,"mousedown",this.R4,this);g.F.h(document,"mousedown",this.X4,this);this.Hpa||g.l.Ve||(this.hw=g.a.ND(this.hw,150,this),this.Hpa=!0);this.u7();g.F.h(document,"mouseout",this.hw,this);this.h(this.rN,this.M6,this);g.F.h(a,"mouseover",this.S4,this);g.F.h(a,"mouseup",this.T4,this);g.F.h(a,"contextmenu",this.KF,this);g.F.h(a,"rightclick",this.KF,this)},Cha:function(){var a=this.Ya.ad;g.F.G(a,"mousedown",this.R4,this);g.F.G(document,"mousedown", this.X4,this);this.Mna();g.F.G(document,"mouseout",this.hw,this);this.G(this.rN,this.M6,this);g.F.G(a,"mouseover",this.S4,this);g.F.G(a,"mouseup",this.T4,this);g.F.G(a,"contextmenu",this.KF,this);g.F.G(a,"rightclick",this.KF,this)},Kca:function(){g.F.h(this.Ya.ad,"mousewheel",this.Q4,this)},q_:function(){g.F.G(this.Ya.ad,"mousewheel",this.Q4,this)},Nna:function(){g.F.G(document,"mousemove",this.hw,this);g.F.G(this.Ya.ad,"mousemove",this.$R,this)},u7:function(){g.F.h(document,"mousemove",this.hw,this); g.F.h(this.Ya.ad,"mousemove",this.$R,this)},Mna:function(){g.F.G(document,"mousemove",this.hw,this);g.F.G(this.Ya.ad,"mousemove",this.$R,this)},S4:function(){this.IG=!0},X4:function(){this.IG=!1},hw:function(a){if(!this.Kf&&!this.sg&&this.Ya){var b=this.Mi(a,!0,!0);this.r(this.rN,{event:a,TJ:b})}},Jca:function(){this.h("mousemove",this.O_);this.h("mouseout",this.P_);this.h("mouseover",this.Q_);this.h("mouseup",this.R_);this.h("mousedown",this.N_);this.h("rightclick",this.T_);this.h("contextmenu", this.F_);this.h("rdblclick",this.U_)},Eha:function(){this.G("mousemove",this.O_);this.G("mouseout",this.P_);this.G("mouseover",this.Q_);this.G("mouseup",this.R_);this.G("mousedown",this.N_);this.G("rightclick",this.T_);this.G("contextmenu",this.F_);this.G("rdblclick",this.U_)},keyboardEnableChanged:function(){this.get("keyboardEnable")?this.Gca():this.CO()},scrollWheelChanged:function(){this.get("scrollWheel")?this.h("mousewheel",this.S_):this.G("mousewheel",this.S_)},KF:function(a){g.F.preventDefault(a)}, tha:function(a){var b=this.Mi(a,!1,!0),c=0;"3D"==this.D.view.type?(this.qa("mousewheel",b),a.wheelDelta?(c=a.wheelDelta,window.opera&&g.a.Qh(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c),0==c/120%1&&(c/=2)):a.detail&&(c=-a.detail,120!==c&&-120!==c&&(c*=20)),a=c/800,a=this.get("zoom")+a,this.w2(a,b.Ta,!0)):(a.wheelDelta?(c=a.wheelDelta/120,window.opera&&g.a.Qh(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail),this.V.VC=(this.V.VC|| 0)+c,this.r("mousewheel",b))},Q4:function(a){"info"!=a.af&&this.get("scrollWheel")&&this.tha(a)},cS:function(a,b){b=this.Mi(a,!1,!0);if(!this.Sv(b.Db,this.V.Hx)){var c=this.V;c.Hx=b.Db;if(c.Cr){if(!c.Cd&&(b.Db.x!==c.jo.x||b.Db.y!==c.jo.y)){var d;this.$N(c.au)&&c.au.get("draggable")&&(d=c.au);!d&&this.get("dragEnable")&&(d=this);d&&(c.Cd=!0,c.kq=d,c.gg=c.jo,c.jq=c.NT)}c.Cd&&(c.bk=b,b.button=a.buttons||a.button||0,this.UO())}}},qJ:function(){var a=this.TJ;g.f.fb(this.K,"amap-drag");g.f.Epa();g.f.s3(); this.V&&(this.V.Cd=!1);this.V.Gp&&(this.V.Gp=!1,this.V.kq.r("dragend",a));this.V.Cr=!1;this.V.Hx=null;this.V.gg=null;g.F.G(document,"mousemove",this.cS,this);g.F.G(document,"mouseup",this.qJ,this);try{g.F.G(window.parent.document,"mouseup",this.qJ,this)}catch(b){}this.Ya&&(this.Kf&&(this.sg=this.Kf=!1),g.F.zza(this.Ya.ad),this.u7())},Pra:function(a,b){b=b||this.Mi(a,!1,!1,a.srcElement||a.target);var c=this.get("size"),d;0<=b.Db.x&&b.Db.x<=c.width&&0<=b.Db.y&&b.Db.y<=c.height&&(d=!0);this.K5&&!d?this.r("mouseout", b):!this.K5&&d&&this.r("mouseover",b);this.K5=d},$R:function(a){if(!this.Kf&&!this.sg&&this.Ya&&"info"!=a.af&&(g.F.preventDefault(a),g.l.Gs&&(a=window.event),a)){a=this.Mi(a,!1,!1,a.srcElement||a.target);var b=this.V,c=a.kd,d;if(c){this.V.Cr||(c instanceof g.B.Fh?d=c.Mb.get("cursor"):c instanceof g.q.Zb&&(d=c.get("cursor")),d&&c!==this||(d=this.D.De.defaultCursor),d=this.D.get("optimalCursor")||d,this.K.style.cursor=d||"");d=b.Uga;var e=a.uu;d!==e&&(d&&b.YZ&&b.YZ.r("mouseout",a),e&&c&&(c.r("mouseover", a),c.get("topWhenMouseOver")&&(c.Mb.C=!0,c.Mb.setTop(!0),c.Mb.C=!1)));a.kd.r("mousemove",a);a.kd!==this&&this.r("mousemove",a);b.Uga=a.uu||null;b.YZ=a.kd||null}}},R4:function(a){if("info"!=a.af&&(this.IG=!0,g.f.Voa(),g.f.f3(),this.V.Hx=null,this.V.gg=null,"info"!=a.af)){var b=this.Mi(a,!0,!1,a.srcElement||a.target);if(b.kd){this.V.j3=new Date;this.V.au=b.kd;this.V.jo=b.Db;this.V.Qga=b.button;this.V.Cr=!0;this.V.Rga=b;this.V.Cd||(this.V.NT=b);this.Ie&&this.Ie.stop();var c=b.kd;!c.Mb&&c.get("dragEnable")&& (this.V.Cr=!0);g.f.Wa(this.K,"amap-drag");c=!1;b.kd.r("mousedown",b);b.kd!==this&&(this.r("mousedown",b),c=b.kd.get("draggable"));c=c||this.get("dragEnable");g.F.yxa(this.Ya.ad);g.F.h(document,"mousemove",this.cS,this);g.F.h(document,"mouseup",this.qJ,this);try{window.parent.document&&g.l.Gs&&g.F.h(window.parent.document,"mouseup",this.qJ,this)}catch(d){}g.F.stopPropagation(a);c&&this.Nna()}}},M6:function(a){this.Pra(a.event,a.TJ)},HDa:function(a){this.cS(a.event,a.TJ)},T4:function(a){if("info"!= a.af){this.TJ=a=this.Mi(a,!1,!1,a.srcElement||a.target);var b=a.kd;if(b){var c=this.D.get("allBubble")||b.get("bubble");b!==document&&(b.r("mouseup",a),a.kd!==this&&c&&this.r("mouseup",a));this.V.jo&&this.Sv(a.Db,this.V.jo)&&(this.bg&&this.Sv(this.V.Ex,a.Db)&&a.button===this.V.Qga?(clearTimeout(this.bg),this.bg=null,g.F.Q5(a)?c?(b.r("dblclick",a),b!==this&&this.r("dblclick",a)):b.r("dblclick",a):b.r("rdblclick",a),this.V.Ex=null):(g.F.Q5(a)?(this.r("clickstart",a),c?(b.r("click",a),b!==this&&this.r("click", a)):(b.r("click",a),this.r("closeOverlays",a)),b.get("topWhenClick")&&(b.Mb.C=!0,b.Mb.setTop(!0),b.Mb.C=!1),this.r("clickend",a)):c?(b.r("rightclick",a),b!==this&&this.r("rightclick",a),this.r("contextmenu",a)):(b.r("rightclick",a),b.r("contextmenu",a)),this.V.Ex=a.Db,this.bg&&clearTimeout(this.bg),this.bg=setTimeout(g.a.bind(function(){clearTimeout(this.bg);this.bg=null;this.V.Ex=null},this),260)))}}}});g.Sb.Ib({S_:function(a){this.qa("mousewheel",a);var b=this;if(1<=Math.abs(this.V.VC)&&!this.R$){var c=this.V.VC;if(1<=c)c=1;else if(-1>=c)c=-1;else return;b.eH(a.Ta,c);this.V.VC=0;this.R$=!0;setTimeout(function(){b.R$=!1;b.V.VC=0},g.l.pz?50:40)}},O_:function(a){this.qa("mousemove",a)},P_:function(a){this.qa("mouseout",a)},Q_:function(a){this.qa("mouseover",a)},R_:function(a){this.qa("mouseup",a)},N_:function(a){this.qa("mousedown",a)},T_:function(a){this.qa("rightclick",a)},F_:function(a){this.qa("contextmenu", a)},U_:function(a){this.get("doubleClickZoom")&&this.get("zoomEnable")&&this.eH(a.Ta,-1);this.qa("rdblclick",a)}});g.Sb.Ib({wga:function(){this.BB={left:[37],right:[39],IQ:[40],dF:[38],Qi:[187,107,61],Ri:[189,109,173]};this.sda={left:this.by(this.cH(100,0)),right:this.by(this.cH(-100,0)),IQ:this.by(this.cH(0,-100)),dF:this.by(this.cH(0,100)),Qi:this.by(this.K1(1)),Ri:this.by(this.K1(-1))}},Gca:function(){this.get("keyboardEnable")&&(this.BB||this.wga(),g.F.h(document,"keydown",this.aH,this),g.F.h(document,"keyup",this.B_,this))},CO:function(){g.F.G(document,"keydown",this.aH,this);g.F.G(document,"keyup",this.B_, this)},B_:function(a){var b=a.keyCode;!a.ctrlKey||37!==b&&39!==b||this.set("refresh",1)},aH:function(a){var b=a.keyCode,c;for(c in this.BB)if(this.BB.hasOwnProperty(c))for(var d=0;d<this.BB[c].length;d+=1)if(b===this.BB[c][d]){if(!this.IG)return;if(!a.ctrlKey&&!a.shiftKey){this.sda[c]();g.F.preventDefault(a);return}37===b?(this.Zga(),g.F.preventDefault(a)):39===b?(this.Yka(),g.F.preventDefault(a)):38===b?(this.Vja(),g.F.preventDefault(a)):40===b&&(this.Uja(),g.F.preventDefault(a))}},by:function(a){return function(){a()}}, Zga:function(){this.get("rotateEnable")&&(this.r("rotate"),this.set("rotation",-8+parseFloat(this.get("rotation"))%360))},Yka:function(){this.get("rotateEnable")&&(this.r("rotate"),this.set("rotation",8+parseFloat(this.get("rotation"))%360))},Uja:function(){this.get("rotateEnable")&&this.set("pitch",-4+parseFloat(this.get("pitch")))},Vja:function(){this.get("rotateEnable")&&this.set("pitch",4+parseFloat(this.get("pitch")))},K1:function(a){var b=this.D;return function(){b.C=!0;1===a?b.zoomIn():b.zoomOut(); b.C=!1}},cH:function(a,b){var c=this.D;return function(){c.C=!0;c.panBy(a,b);c.C=!1}}}); ');
_jsload_('vectorlayer', 'g.jk={j$:function(){0===g.Ca.Ke&&g.jk.a5()},pIa:function(a,b){if(!a)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]&&a[c].Dk===b)return!0},Ena:function(a,b){var c="limg-"+a.key+"-"+b.g.mc;g.Ca.Gj[c]&&delete g.Ca.Gj[c]},U3:function(a){return g.Ca.Gj[a.Dk?a.Dk:a]},vm:function(a,b){var c=null,d=null,e=!1,f=g.Ca.Gj;a.Dk?(c=a,d=c.Dk,(a=c.url)&&(e=!0)):d=a;var h=f[d];e&&h&&h.src!==a&&(h=f[d]=null);if(!h){var e=function(a){this.rJ(a);g.a.Qh(b)&&b(!0,{wJ:a.target})},k=function(a){this.Z4(a);g.a.Qh(b)&&b(!1, {wJ:a.target})};if(a){var l="data:"===a.substr(0,5),h=document.createElement("img");l||(h.crossOrigin="Anonymous");f[d]=h;h.loaded=!1;g.Ca.Ke+=1;g.F.Dj(h,"load",e,this);g.F.Dj(h,"error",k,this);var m=this;h.hr=g.a.eg();l||void 0!==this.hQ||(this.hQ=setInterval(function(){if(0===g.Ca.Ke||0===g.Ca.mr.length)clearInterval(m.hQ),m.hQ=void 0;else{var a=g.a.eg(),b=g.Ca.Gj,c=!1,d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d];!e.loaded&&!e.timeout&&300<=a-e.hr&&(c=e.timeout=!0)}c&&m.a5()}},100));h.src=a; c&&(h.MCa=d)}}},a5:function(){for(var a=0;a<g.Ca.mr.length;a+=1)g.Ca.mr[a].set("display")},E2:function(a){g.F.G(a,"load",this.rJ,this);g.F.G(a,"error",this.Z4,this)},rJ:function(a){a=a.target;a.loaded=!0;g.Ca.Ke-=1;this.E2(a);this.j$()},Z4:function(a){a=a.target;a.loaded=!1;g.Ca.Ke-=1;this.E2(a);this.j$()}};g.q.fi=g.q.Zb.extend({A:function(a,b,c){this.Yl=c;g.Ca.mr.push(this);this.mc=g.a.j4("layer");this.Ua=2;a.get("textRatio");this.hW=25;this.X("tiles",a);this.Oza=a.get("vdataUrl")||b.D.get("vdataUrl")||g.o.yL;this.Ei=!0;this.S=a;this.Jl=!1;this.e=b;this.$i=this.Zi=!0;this.bf("zoom center centerCoords resolution coordsBound styleID iconsID businessIconsID forceBig mode display".split(" "),b);this.bf("zooms detectRetina visible merge sort zIndex textIndex watermark opacity".split(" "),a);this.X("lang", b,!0);this.get("watermark")&&(this.DL=new Image,this.DL.src=this.get("watermark"));this.wL="v4";this.oa={};this.gm={};this.Fd=256;this.Nv=[];this.Bf=this.jg=0;this.ja=g.l.ja&&this.get("detectRetina");this.Fd=256*(this.ja?2:1);this.X("mapStyle",b);this.X("style",b);this.fq=0;this.X("features",b);this.gf=18;this.X("reload",a)},mapStyleChanged:function(){this.get("mapStyle");this.Be=!!this.e.get("showBuildingBlock");this.featuresChanged()},featuresChanged:function(){this.set("reload")},langChanged:function(){this.set("reload"); this.S.ct()},Cla:function(){var a=!1,b=this.fZ();if(b){if(this.Xi){var c="active"===this.Xi.sB;b.XA(this.Xi);c&&(b.Wt(this.Xi,"active"),a=!0)}g.l.yna&&!a&&b.AH()}},OA:function(){this.Cla()},$E:function(a,b){var c=!0;if("hotspotout"===a)this.e.D.set("optimalCursor",null);else if("hotspotover"===a)this.e.D.set("optimalCursor","pointer");else if("mouseup"===a||"mousedown"===a)c=!1;var d=this.fZ();if(d)switch(a){case "hotspotout":d.FH(b);break;case "hotspotover":d.Wt(b,"hover");break;case "mouseup":d.Wt(b, "hoverup");break;case "mousedown":d.Wt(b,"active")}c&&(c=b.za,c=new g.H(c[0],c[1]),c=this.e.Qd(c,3),this.e.D.r(a,{name:b.name,lnglat:c,id:b.Ys,isIndoorPOI:b.M5}))},fZ:function(){if(!g.l.m5){var a=this.M||this.Cf;if(!a)return null;var b=this.e?this.e.D.get("hotspotOptions"):{},b=g.extend({},b);if(b.disableHighlight)return null;this.fC||(this.fC=new g.q.fi.vba(a));return this.fC}},Fr:function(a){(a=this.v4(a))&&this.$E("hotspotclick",a)},Nx:function(a){var b="mousemove"===a.type;if(!this.e.sg||!b){var c= this.v4(a);c&&c.mk||(c=null);switch(a.type){case "mousemove":case "mouseup":case "mousedown":c&&this.Xi!==c&&(this.Xi&&this.$E("hotspotout",this.Xi),this.$E("hotspotover",c)),!c&&this.Xi&&this.$E("hotspotout",this.Xi),c&&!b&&this.$E(a.type,c)}this.Xi=c}},textIndexChanged:function(){this.set("display")},bva:function(){this.e.h("click",this.Fr,this);this.e.h("mousemove",this.Nx,this);this.e.h("mousedown",this.Nx,this);this.e.h("mouseup",this.Nx,this)},lQ:function(){this.e.G("click",this.Fr,this);this.e.G("mousemove", this.Nx,this);this.e.G("mousedown",this.Nx,this);this.e.G("mouseup",this.Nx,this)},Ro:function(){return null},ne:function(){var a=this.zv?null:this.e.D.get("forceZooms");return{Ei:!0,Fd:256,visible:this.get("visible"),qo:this.qo,Za:a||this.get("zooms"),aI:this.Jl&&this.Ra,Zi:!this.e.pt,$i:!this.e.pt,opacity:this.get("opacity"),Kc:!1,Oc:this.zn()}},bm:function(a){if(g.M.canvas.fi)return new g.M.canvas.fi(this,a)},CC:function(a){0===a.indexOf("amap://styles/")&&(a="normal");var b=this.get("forceBig")|| g.l.ba&&!this.ja?"6":"5";this.url=g.o.Cc+"://"+this.Oza+"/tiles?mapType="+a+"&v="+(g.Ue?3:2)+"&style="+b;this.url+="&key="+g.o.key;this.url+="&version="+g.o.Xl;this.url+=this.ja?"&rd=2":"&rd=1";this.url+="&flds="+this.ha;this.url+="&t="},styleChanged:function(){this.e.Dd||this.featuresChanged()}}); g.q.qd=g.q.fi.extend({bm:function(a){var b=this;if(!b.DL&&g.l.Nf&&"vw"===b.e.get("baseRender")){var c=["wgl"];this.e.Dd&&c.push("wgl2");if(g.ub.KD(c))return new g.M.Ye.qd(b,a)}else if(c=["cgl"],this.e.Dd&&c.push("cgl2"),g.ub.KD(c))return new g.M.canvas.qd(b,a);g.ub.Gg(c,function(){b.set("display")})},featuresChanged:function(){var a=this.get("features"),b=[];"all"===a?b=this.Yl:a&&(-1!==g.a.indexOf(a,"bg")&&-1!==g.a.indexOf(this.Yl,"region")&&b.push("region"),-1!==g.a.indexOf(a,"building")&&-1!== g.a.indexOf(this.Yl,"building")&&b.push("building"),-1!==g.a.indexOf(a,"road")&&-1!==g.a.indexOf(this.Yl,"road")&&b.push("road"));this.ha=b;this.CC(this.get("mapStyle")||"normal");this.set("reload")}});g.q.Jba=g.q.qd.extend({A:function(){this.Dh(arguments);this.gf=this.$o=17;this.ha=["building"];this.Be=!0;this.CC(this.get("mapStyle")||"normal");this.zv=!0},featuresChanged:function(){},mapStyleChanged:function(){}}); g.q.Qj=g.q.fi.extend({bm:function(a){this.Di=!0;var b=this;if(this.sS()){if(this.lA=!0,g.M.canvas.rM)return this.l2(),a=new g.M.canvas.rM(this,a),a.h("afterLabelRender",this.OA,this),a}else{b.lA=!1;if(g.M.canvas.qM)return a=new g.M.canvas.qM(this,a),a.h("afterLabelRender",this.OA,this),a;g.ub.Gg(["labelcanvas"],function(){b.set("display")})}},sS:function(){var a=this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.e.get("nolimg")?!1:g.l.lA?!0:!1},hsa:function(){var a=this.get("mapStyle"); return"normal"!==a&&"amap://styles/normal"!==a||this.e.get("nolimg")||g.l.Kc||g.l.ba?!1:!0},featuresChanged:function(){var a=this.get("features"),b=this.get("mapStyle"),c=[];"all"===a?c=["roadlabel","poilabel"]:a&&(-1!==g.a.indexOf(a,"road")&&c.push("roadlabel"),-1!==g.a.indexOf(a,"point")&&c.push("poilabel"));a=this.sS();c.length&&(a||this.hsa())&&c.unshift("limg");this.ha=c;this.CC(b);this.set("reload");(b=this.M||this.Cf)&&a^this.lA&&(this.fC&&(this.fC=this.fC.M=null),b.G("afterLabelRender",this.OA, this),b.ak(),this.Cf=this.M=null)},l2:function(){this.Ev=g.o.Cc+"://"+(this.S.get("vdataUrl")||this.e.D.get("vdataUrl")||g.o.yL)+"/limg?";var a=this.ja?2:1;this.Ev+="&font="+(g.l.ba&&!this.ja?"big":"small");this.Ev+="&scl="+a;this.Ev+="&t="},v4:function(a){return a.Of?(a=this.e4(this.e.lc(a.Of,20),!0))?a[0]:null:null},e4:function(a,b){var c=this.e.Ry();if(c&&(c=c.Bs(this)))return c.xn(a,b)}});g.q.fi.vba=g.da.extend({A:function(a){this.gla(a)},gla:function(a){this.M=a},FH:function(a){if(a.sB){a.sB=!1;var b=this.M;b&&b.FH.apply(b,arguments)}},XA:function(a){a.sB=!1;var b=this.M;b&&b.XA.apply(b,arguments)},Wt:function(a,b){b||(console.warn("hlStyle is required, e.g. hover, active.."),b="hover");if(a.sB!==b){a.sB=b;var c=this.M;c&&c.Wt.apply(c,arguments)}},AH:function(){var a=this.M;a&&a.AH()}});g.q.bx=g.da.extend({A:function(){this.Ua=2;this.hW=g.l.Zl?16:12;this.mxa={road:0,region:0,building:1,poilabel:1,roadlabel:1};this.pw=[new g.pg,new g.pg,new g.pg,new g.pg,new g.pg,new g.pg,new g.pg];this.Qza=[{type:"roadlabel",show:!0,Ci:1},{type:"poilabel",show:!0,Ci:1},null,{type:"region",show:!0,Ci:0},{type:"road",show:!0,Ci:0},{type:"building",show:!0,Ci:0},null];this.fq=0},xy:function(a,b,c,d,e){if("first"!==b){c&&(c.Od=d);var f;switch(e){case "roadlabel":f=0;break;case "poilabel":f=1;break;case "labels":f= 2;break;case "region":f=3;break;case "road":f=4;break;case "building":f=5;break;case "allbase":f=6}d=this.pw[f].xza;c&&c.Je&&(d=this.pw[f].push);"groupcomplete"===b?d.call(this.pw[f],["groupcomplete",f,c,a]):"tileComplete"===b?d.call(this.pw[f],["co",7,c,a]):(d.call(this.pw[f],["co",f,c,a]),""!==b&&d.call(this.pw[f],[b,f,c,a]));this.fq>f&&(this.fq=f);this.eya()}},J7:function(){var a=new Date,b=!1;do if(b=this.parse(),new Date-a>=this.hW)break;while(!b);this.B7=b?null:g.a.Xc(this.J7,this)},eya:function(){this.B7|| (this.B7=g.a.Xc(this.J7,this))},uoa:function(){return document.createElement("canvas")},parse:function(){var a,b=!1,c=this.fq,d=this.pw[this.fq];if(d.vh())6===c&&(b=!0),this.fq=(this.fq+1)%7;else{a=d.Bua();var e=a[3],f=e.ja?512:256;if("groupcomplete"===a[0])e.set("display",0);else{var h=a[2];if(e.oa.Nd(h.key))if("co"===a[0])if(3===a[1])this.OT(e,h,f),h.ra.region&&e.$a.MK(h.ra.region,0,h.ta.z);else if(4===a[1])this.OT(e,h,f),h.ra.road&&e.$a.A8(h.ra.road,h.ta.z);else if(5===a[1]&&h.ra&&h.ra.building)a= g.Nj&&g.Nj.L5(e.e.D),e.Be?h.uf=h.ra.building:(this.OT(e,h,f),e.$a.MK(h.ra.building,1,h.ta.z,void 0,a));else{if(7===a[1]){h.ld&&(e.DL&&0===(h.ta.x+h.ta.y)%2&&h.ld.getContext("2d").drawImage(e.DL,0,0),h.zma=!0,g.l.GD&&h.ld.toDataURL&&(f=new Image,f.src=h.ld.toDataURL(),h.ld=f));if("3D"===(e.e.D&&e.e.D.getViewMode_())){if(h.nl){h.nl.cf=null;h.Vh=null;a=e.e.Hc;if(e.Cf&&a.Cf){c=a.Cf.cI(a.Cf.ca,h.nl);c.mc=a.Cf.mc;a={ni:c,tagName:"CANVAS",width:h.nl.width,height:h.nl.height};c=0;for(f=h.ha.length;c<f;c+= 1)for(var k=h.ha[c],l=0,m=k.Ca.length;l<m;l+=1)k.Ca[l]==h.nl&&(k.Ca[l]=a);h.ha.Aya=!0}h.nl=null}}else a[3].e.J.be&&this.H3(h);h.Cua||(h.Ra=h.Ba=!0);e.set("display")}}else g.Oaa.Cva(h,a[0],this.Qza[a[1]].type,e)}d.vh()&&(6===c&&(b=!0),this.fq=(this.fq+1)%7)}return b},OT:function(a,b,c){a.$a||(a.$a=new g.M.canvas.qd.hd(a),a.$a.J=a.e.J);var d=1;18==b.ta.z&&(d=a.S.get("map",null,!0).get("zooms")[1],d=Math.pow(2,18-d));b.ld||(b.ld=this.uoa(),b.ld.width=b.ld.height=c/d,b.zma=!1);b.ld&&(a.$a.xa=b.ld,a.$a.Hg= d,a.$a.Rb=1/d)},H3:function(a){if(a.ha)for(var b=0,c=a.ha.length;b<c;b++){var d=a.ha[b];if(d.mk){var e=this.Wd(d),f=d.Ca.length;if(d.rc)for(var h=0,k=d.rc.length;h<k;h++)this.gna(d,h,e,f)}}},gna:function(a,b,c,d){d+=b;var e=a.rc[b][8],f=a.fontSize,h=a.vI,k=parseInt(f/h*e[2]),l=e[3]+f-h,m=k-e[2],f=f-h;switch(c){case "middle":a.aa[d][0]=e[0]-(k-e[2])/2;a.aa[d][1]=e[1]-(l-e[3])/2;break;case "left":a.aa[d][0]=e[0]-(k-e[2])/2+m/2;a.aa[d][1]=e[1]-(l-e[3])/2+f*b;break;case "right":a.aa[d][0]=e[0]-(k-e[2])/ 2-m/2;a.aa[d][1]=e[1]-(l-e[3])/2+f*b;break;case "top":a.aa[d][0]=e[0]-(k-e[2])/2;a.aa[d][1]=e[1]-(l-e[3])/2+(2*b+1)/2*f;break;case "bottom":b=(2*(a.rc.length-b-1)+1)/2*f;a.aa[d][0]=e[0]-(k-e[2])/2;a.aa[d][1]=e[1]-(l-e[3])/2-b;break;default:a.aa[d][0]=e[0]-(k-e[2])/2,a.aa[d][1]=e[1]-(l-e[3])/2}a.aa[d][2]=k;a.aa[d][3]=l},pD:function(a){return Math.abs(a[2]/2+a[0])},qD:function(a){return Math.abs(a[3]/2+a[1])},Wd:function(a){var b=a.aa;if(1===b.length)return"";var c=b[0],d=b[1];return b.length===a.Ca.length? "top":1>=this.pD(c)&&1>=this.pD(d)?1>=this.qD(c)&&1>=this.qD(d)?"middle":c[1]<d[1]?"top":"bottom":c[0]<d[0]?"left":"right"}});g.q.bx.Bi=new g.q.bx;g.ax={AC:function(a,b){this.e.D.xq&&(this.ug={},this.ug.dFa=g.a.zb(this.ug),b.Lc||(b.Lc=g.KW()),this.Lc=b.Lc,this.Lc.h("tiles",this.dE,this),this.Lc.h("ack",this.cE,this),this.Lc.h("disable",this.aE,this))},wza:function(){this.e.D.xq&&(this.ug=null,this.Lc&&(this.Lc.G("tiles",this.dE,this),this.Lc.G("ack",this.cE,this),this.Lc.G("disable",this.aE,this),this.Lc=null))},ay:function(){if(!1===this.e.D.get("workerMode"))return!1;g.Lk.z5||this.CZ(g.Lk);g.Fc.z5||(this.CZ(g.Fc),g.Fc.xS&&z.event.fy(this.e.D, "complete",function(){g.Fc.xS()}));if(this.Di&&!this.Vo&&g.Lk.Sza||this.Vo&&g.Lk.mta||!this.Vo&&!this.Di&&this.Ei&&g.Fc.v5)return!0},CZ:function(a){a.xf(null,{Ue:g.Ue});a.z5=!0},fha:function(a){g.a.Ub(a,function(a){g.jk.vm(a)})},Bz:function(a){if(this.g&&a.PS===this.g.mc){this.he||this.hf?this.SB([this.g,"groupcomplete",null,null,"allbase"]):(this.dk(),this.Vj.xy(this.g,"groupcomplete",null,null,"allbase"));for(var b=0,c=a.Pc.length;b<c;b+=1)this.eE(a.Pc[b],a.Gv,a.Sq,a.ba)}},eE:function(a,b){var c= a.Gd,d=this.oa.get(a.Pi);if(d){var e=this.g.ha,f="";(this.e.Dm&&!this.e.Dd||this.e.Dd)&&this.RI(c,a.Oa,a.Ig.z);"poilabel"===c||"roadlabel"===c?(a.td||(f=a.Oa,a.td=null),d.ha||(d.ha=[]),d.ha.push.apply(d.ha,a.Oa),c===this.g.ha[this.g.ha.length-1]&&(d.td=null)):d.ra[c]=a.Oa;"building"!==c&&"poilabel"!==c||!a.Cn||d.qe||(d.qe={},d.qe.uf=a.Cn,g.Mj&&g.Mj.r("vecTileParsed.buildings",{tp:d}));if("roadlabel"!==c&&"poilabel"!==c||this.E5||!g.l.n3&&!this.e.Dd)this.he||this.hf?this.SB([this.g,f,d,b,c]):(this.dk(), this.Vj.xy(this.g,f,d,b,c));c===e[e.length-1]&&(c="roadlabel"===c||"poilabel"===c?"labels":"allbase",this.he||this.hf?this.SB([this.g,"tileComplete",d,b,c]):(this.dk(),this.Vj.xy(this.g,"tileComplete",d,b,c)))}},bG:function(){if(this.e){var a=this.e.D.getMapStyle();this.Eq=a;this.Kga(a);this.Lc&&this.Lc.U5()&&(-1!==a.indexOf("amap://styles")&&(a="normal"),a={command:"status",payload:{mapType:a,style:g.l.ba&&!this.g.ja?"6":"5",rd:this.g.ja?2:1}},this.ay()?(g.Fc.ina(a,g.a.Ts),this.Lc.nFa()||this.Lc.close()): this.Lc.send(a))}},mapStyleChanged:function(){this.bG()},styleChanged:function(){this.bG()},aE:function(){for(var a in this.ug)this.ug.hasOwnProperty(a)&&this.ug[a].Jb&&(this.Ml(this.ug[a].Jb,this.ug[a].Od),delete this.ug[a]);this.Lc=null;this.yl("mapStyle");this.set("display",1)},cE:function(a){var b=a.reqId;this.ug[b]&&(!a.content.status&&this.ug[b]&&this.Ml(this.ug[b].Jb,this.ug[b].Od),delete this.ug[b])},dE:function(a){var b=a.reqId;if((!/-1$/.test(b)||!this.dC())&&this.ug[b]){var c=a.content.opt, d=this.ug[b].Jb[0];c!==this.gb&&!d.Je||d.Je&&2<(this.dC()||Math.abs(c-this.gb))?this.Ml(this.ug[b].Jb,this.ug[b].Od):this.Ws(a.content.data,c)}},L1:function(a,b){if(g.Oj){var c=a.Ug,c={"x-vd-v":c.df,tv:c.Oh,bgc:this.e.Ee,vdataVersion:c.mf,url:this.Ny(a.Od,[]),q:this.g,Be:this.e.D.get("showBuildingBlock")};b?a.Jb.length&&(c.td=!0,c.data=g.a.map(a.Jb,function(a){return{key:a.key,data:JSON.stringify({key:a.key,td:a.td,ha:a.ha,qe:a.qe})}})):this.EV||(c.Nf=!!this.ll,c.Pc=this.ll||this.Ei?a.Iu:a.data.Pc); g.Oj.set(c)}},XS:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(this.Di&&"zh_cn"!==this.lang)for(var d=0;d<a.length;d+=1)a[d].status="loaded",a[d].Ba=!0;else{var e=[],f=this;this.ika(a,b,g.a.bind(function(a,d){var f=this;if(d.length){for(var m=0,n=d.length;m<n;m++){var p=d[m].ta,q=p.x,r=p.y,p=p.z;if(10>p){var s=Math.pow(2,p);if(q>=s||0>q)q=(q+s)%s}q=g.a.HI(q,r,p).join(",");g.a.ka(e,q)||e.push(q)}if(this.ay())if(m=this.$ea({Hya:d,Je:c,Od:b,hr:e}),m.JCa=(new Date).getTime(), this.Di)g.Lk.yh(m,function(a,c){if(f.e)if(c.T5){var d=c.Jb.map(function(a){return f.oa.get(a.key)}).filter(function(a){return a});f.Ml(d,b)}else f.Vo?(g.a.Ub(c.Jb,function(a){this.oa.set(a.key,a);a.td&&!a.td.loaded&&(g.jk.vm(a.td),a.td.loaded=!0);a.qe&&a.qe.uf&&g.Mj&&g.Mj.r("vecTileParsed.buildings",{tp:a})},f),f.set("display"),f.L1(c,!0)):(g.a.Ub(c.Jb,function(a){var b=this.oa.get(a.key);b&&(b.status=a.status,a.L&&a.L.Ca&&this.fha(a.L.Ca))},f),c.data&&f.Bz(c.data))});else{var u=g.Fc.u6;this.e.D.Ra&& !g.Fc.Woa&&this.e.D.xq||(u=g.Fc.yh);this.bG();u(m,function(a,c){if(f.e){if(c.T5){var d=c.Jb.map(function(a){return f.oa.get(a.key)}).filter(function(a){return a});f.Ml(d,b)}if(u===g.Fc.u6){if(c.disabled){g.Fc.Woa=!0;f.set("display");return}if(c.Sla)return}c.data&&(f.e.Ee!==c.Fu&&(f.e.Ee=c.Fu),g.a.Ub(c.Jb,function(a){var b=this.oa.get(a.key);b&&(b.status=a.status)},f),f.L1(c),c.data&&f.Bz(c.data))}})}else!this.Di&&this.Lc&&this.Lc.U5()?this.e.D.get("workerMode")?this.RG(d,b,e,c):(1>this.Lc.za.length|| 3<this.ru?this.RG(d,b,e,c):((2===this.Lc.za.length||this.Lc.GJ())&&this.bG(),this.hha(d,b,e,c)),this.Lc.BHa(this.Lc.za.length+1),this.Lc.j6&&this.Lc.PCa(Math.ceil((new Date-this.Lc.j6)/1E3)),this.Lc.j6=new Date):this.RG(d,b,e,c)}},this));window.renderDelay&&(this.KK=setTimeout(function(){f.bK&&f.set("display",!1);f.bK=!1;f.KK=null},window.renderDelay))}},Kga:function(a){a&&"normal"!==a&&0!==a.indexOf("amap://styles/")?this.EV=!0:this.EV=!1},ika:function(a,b,c){var d=g.Oj;if(d&&!this.EV&&18>=b){var e= this,f=this.e,h=f.D;f.QS||void 0!==f.YS||("dv"===h.get("baseRender")?f.YS=1:f.YS=2);d.get({type:h.Ra?"NFS":"FS",Be:this.g.zv||this.g.Be,Cya:a,Nf:!!this.ll,q:this.g,url:this.Ny(b,[]),timeout:1E3},function(d,h){if(e.g){if(d)return c(null,a);h.K6.length&&c(null,h.K6);if(h.lS.length)if(h.lS.length===a.length&&(f.QS&&f.YS--,e.e.D.Ra||e.Di||e.HD||e.e.gU()),h.Pc){e.df=h.Ug["x-vd-v"];e.Oh=h.Ug.tv;var m=h.Ug.bgc;e.e.Ee!==m&&(e.e.Ee=m);g.a.forEach(h.lS,function(a){a.status="loaded"});e.F7(h.Pc,b)}else h.q6&& (g.a.forEach(h.q6,function(a){var b=e.oa.get(a.key);if(b){b.status="loaded";b.qe=a.qe;if(a.td){b.td=a.td;b.ha=a.ha;var c="limg-"+a.key+"-"+e.g.mc;b.td.Dk=c;b.ha&&(g.a.forEach(b.ha,function(a){a.Ca&&g.a.forEach(a.Ca,function(b,d){b&&0===b.indexOf("limg-")&&(a.Ca[d]=c)})}),g.jk.vm(b.td),b.td.loaded=!0)}b.qe&&b.qe.uf&&g.Mj&&g.Mj.r("vecTileParsed.buildings",{tp:b});b.Ba=b.Ra=!0;e.oa.set(a.key,b)}}),e.set("display"))}})}else c(null,a)},hha:function(a,b,c,d){if(!d||!this.dC()){var e=[(new Date).getTime(), this.Lc.za.length+1&65535,d?1:0].join("-"),f={command:"tiles",reqId:e,payload:{t:c,opt:b,cs:{level:b,flds:this.g.ha.join(","),v:g.Ue?"3":"2"}}},h;if(!this.Lc.GJ()){var k=this;setTimeout(function(){k.Lc&&!k.Lc.GJ()&&(k.ru?k.ru++:k.ru=1,k.Lc.xpa(h)&&(delete k.ug[e],k.RG(a,b,c,d)))},300)}h=this.Lc.send(f);this.ug[e]={Jb:a,Od:b}}},qT:function(a){if(!a.Ra||a.Je)a.status="",a.Ra=void 0,a.Ba=null,a.ld=null,this.oa.Cw(a.key)},$ea:function(a){var b=a.Hya,c=a.Od,d=a.hr;a=a.Je;return{mc:+new Date+"_"+Math.random(), Fu:this.e.Ee,Dd:this.e.Dd,Di:this.Di,Vo:this.Vo,Be:this.g.Be,Fsa:!!g.Ue,Vf:this.J.type,Nf:this.ll,OS:this.g.mc,ha:this.g.ha,Kc:this.g.ja,Ua:this.g.Ua,ZR:Math.ceil(this.rk.Xy),Jb:g.a.filter(b,function(a){return"loaded"!==a.status}),Od:c,hr:d,Je:a,url:this.Ny(c,d,b),Ch:this.aZ(c,[]),TFa:this.e.D.Ra}},aZ:function(a,b){return{AS:"3D"===this.J.type,ZP:this.g.Be,Xr:g.o.Xr||null,fDa:this.g.get("businessIconsID"),df:this.df,Dd:this.e.Dd,Oh:this.Oh,cFa:this.g.get("iconsID"),PS:this.g.mc,Gv:a,az:this.g.az, Pf:!this.g.zn()&&this.g.S.get("merge"),Pc:b,ba:this.g.get("forceBig")||g.l.ba,Vf:this.J.type,mode:this.g.get("mode"),iwa:g.o.Cc,F8:this.g.get("forceBig")?1:this.g.Ua,Sq:this.g.get("forceBig")?!1:this.g.ja,iy:this.g.get("forceBig")||g.l.ba&&!this.g.ja?1:0}},cB:function(a){a=a.split(";");for(var b=0,c=a.length;b<c;b+=1){a[b]=a[b].split(",");for(var d=0,e=a[b].length;d<e;d+=1)a[b][d]=parseInt(a[b][d],36)}return a},F7:function(a,b){if(a.length){var c=this,d=null;this.ll?(d=g.Fc,d=d.parseDataToWebGL): d=this.Di?g.Lk.parseLabel:g.Fc.parseDataToVector;var e=c.aZ(b,a);e.Ue=g.Ue;d&&d instanceof Function&&d(e,function(a,b){if(c.g&&!a){var d=b.icons;if(d)for(var e=0;e<d.length;e+=1)g.jk.vm(d[e]);b.data&&c.Bz(b.data)}})}},Ws:function(a,b,c){if(this.g){for(var d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(c&&(h=JSON.parse(h)),h["x-vd-v"]?(this.df=h["x-vd-v"],this.Oh=h.tv,this.mf=[h.tv,h.vdv].join("-"),h.bgc&&(h="#"+h.bgc.substring(2),this.e.Ee!==h&&(this.e.Ee=h))):this.bE(h,b,d))}this.F7(d,b)}},bE:function(a, b,c){function d(d,e,f){e=[f,d,e].join("/");18<b&&!l.ll&&(e+="/"+b);if((d=l.oa.get(e))&&"loaded"!==d.status)if(l.X9(d,p)||d.Je){if(-1!==n.indexOf(m))if("limg"===m){if(e=a[1],d.td=e,"string"===typeof e.b&&(e.b=l.cB(e.b)),f="",f="object"===typeof e.u?e.u.url:e.u)d={url:f,Dk:"limg-"+d.key+"-"+l.g.mc},e.u=d,g.jk.vm(d)}else{e={Ig:d.ta,Pi:e,Oa:a,Gd:m,az:l.g.az,ly:l.e.Ee,HD:"building"===m,Ci:"poilabel"===m||"roadlabel"===m||"building"===m&&l.g.Be};if("poilabel"===m||"roadlabel"===m)e.td=d.td;m===n[n.length- 1]&&(d.status="loaded");c.push(e)}}else l.KU(b,d,p,g.a.bind(l.qT,l))}var e=a[0].split("-"),f=parseInt(e[1]),h=parseInt(e[2]),k=parseInt(e[0]),l=this,m=e[3],n=this.g.ha,p=18<b?Math.pow(2,b-18):1,e=l.rk.Xy,q=Math.pow(2,k);10>k&&(f<=e&&d(f+q,h,k),f>=q-e&&d(f-q,h,k));d(f,h,k)},SB:function(a){this.xu||(this.xu=[]);this.xu.push(a)},dk:function(){if(this.xu&&this.xu.length){for(var a=0,b=this.xu.length;a<b;a+=1)this.Vj.xy.apply(this.Vj,this.xu[a]);this.xu=[]}},Ml:function(a,b){for(var c=18<b?Math.pow(2, b-18):1,d=0;d<a.length;d+=1){var e=a[d];this.KU(b,e,c,g.a.bind(this.qT,this));18<b&&this.oa.Cw(e.key+"/"+b)}g.Oj&&g.Oj.Cw({Jb:a,url:this.Ny(b,[]),q:this.g,Nf:!!this.ll,Be:this.g.Be})},Ny:function(a,b,c){return this.g.url+b.join(";")+"&lv="+a+"&csid="+g.a.kr()+"&key="+g.o.key+"&preload="+(c&&c[0]&&c[0].Je?1:0)},hCa:function(){var a=this.g.url,b="rb";if(/\\/limg/.test(a)||/flds=[^&]+label/.test(a))b="rl";return b},HCa:function(){},RG:function(a,b,c){function d(a,c){var d=a.split("|");d[0]=c+d[0];var e= d,f="";d[d.length-1]&&(f=d[d.length-1],e=d.splice(0,d.length-1));k.Ws(e,b,!0);return f}var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,f=new XMLHttpRequest;f.AE=[(new Date).getTime(),e?1:0].join("-");var e=this.Ny(b,c,a),h=0,k=this;f.Oq="";f.onreadystatechange=function(){if(k.g&&!(2>f.readyState)){var c=4===f.readyState&&0===f.status;b!==k.gb&&c&&!f.Ot?(f.Ot=!0,k.Ml(a,b),f.onreadystatechange="",c||f.abort()):f.Ot||(3===f.readyState?(c=f.responseText.substring(h),f.Oq=d(c,f.Oq),h=f.responseText.length): 4===f.readyState&&(c=f.responseText.substring(h),k.Di&&(c+="|"),d(c,f.Oq),f.Oq=""))}};f.onerror=function(){};this.Qra||(this.Qra=1);f.open("GET",e,!0);f.send()},X9:function(a,b){var c=this.Jw||this.rk,d=a.ta.x,e=a.ta.y;return d>Math.floor(c.Ic/b)||d<Math.floor(c.Jc/b)||e>Math.floor(c.tc/b)||e<Math.floor(c.hc/b)?!1:!0},KU:function(a,b,c,d){d(b)}};g.M.canvas.Qj=g.M.Ui.extend({ka:[g.ax],A:function(a,b){arguments.callee.ma.apply(this,arguments);this.mc=g.a.zb(this);this.ao=300;this.gf=a.gf;this.Di=this.Ei=!0;this.X("mapStyle",a.e);this.X("style",a.e);this.Vo=!0;this.Wx=1;var c=this;this.vZ=function(){c.W6=!0;c.set("display",0)};this.Zg();this.US(a)},US:function(a){a=g.l.ba||a.ja?"big":"small";var b=g.o.Cc+"://vdata.amap.com/style_icon/icon-biz-"+a+".png";g.jk.vm(g.o.Cc+"://vdata.amap.com/style_icon/icon-normal-"+a+".png");g.jk.vm(b)},dB:function(a){g.jk.Ena(a, this);var b=g.M.canvas.Qj.cd.dB;b&&b.apply(this,arguments)},Zg:function(){this.$m=document.createElement("canvas");this.$m.className="amap-labels";this.$m.draggable=!1;this.$m.P5=!0;this.Sk=this.$m.getContext("2d",{alpha:!0});this.k6=[];this.Ds=10},$v:function(a){var b=Math.pow(2,a.P.zoom-this.oe),c=this.g.ja?this.g.Ua:1,d=a.P.nb.bb(this.Ls).nd(this.Hg);this.transform={translate:this.transform.translate.add(d.Pd(c)),scale:b/c,rotate:0};this.nb=a.P.nb},Nz:function(a,b){this.Na=this.J.Na;this.ze=!1; this.currentTime=+new Date;this.FV=b.FV;this.ge=[this.Ha.kc.x,this.Ha.kc.y];this.Jl=b.aI;var c=this.Jg;this.he=this.zoom<<0!==this.zoom;var d=this.nb.bb(this.Na);d.x<-g.a.Fa/2&&(d.x+=g.a.Fa);d.x>g.a.Fa/2&&(d.x-=g.a.Fa);this.dQ=d.nd(this.Hg);for(d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length){var f=e[0].ta.z,h=!1;if(e.wg&&!g.Ca.Ke&&("stable"==this.Hf||f<=this.zoom&&"zoomIn"===this.Hf||f>=this.zoom&&"zoomOut"===this.Hf)&&(!this.labels||!this.labels.length||this.MJ||a.Gi||!this.sE(this.labels.yk,this.rk)|| this.xJ(a)||this.ue!==a.ue)){h=!0;h=[];a.ue&&(h.push.apply(h,a.ue),this.ue=a.ue);a.pb.length?(h.push.apply(h,a.pb),this.QN=a.pb.hI):this.QN=null;for(var k=e.length-1;0<=k;k-=1){var l=e[k],m=!1,n=l.ha;l.se&&(l.se=!1,this.RI("poilabel",l.ha,void 0,!0),this.Vj.H3(l));!n&&l.qb&&l.qb.ha&&(n=l.qb.ha,m=!0);if(n)for(var p=0,l=n.length;p<l;p+=1){n[p].reverse=m;var q=!1,r=n[p].za;this.QN&&g.a.Ub(this.QN,function(a){!q&&g.yd.Ud(r,a.Rf[0].za)&&(q=!0)});q||h.push(n[p])}}e=[];k={};if(h.length)for(m=0,l=h.length;m< l;m++)h[m].id in k||(k[h[m].id]=1,e.push(h[m]));e.zoom=f;this.eT(e);e.sort(function(a,b){return a.zIndex!==b.zIndex?a.zIndex>b.zIndex?-1:1:!a.Ed^!b.Ed?a.Ed?1:-1:a.Ed==b.Ed?a.id==b.id?a.te==b.te?a.name<b.name?-1:1:a.te>b.te?-1:1:a.id<b.id?-1:1:a.Ed>b.Ed?-1:1});this.labels=e;this.labels.yk=this.rk;this.MJ=!1}}}if(this.gQ(a)){this.Bd();if(!this.e.D.Ra)return;this.mU(a);this.sh=this.labels}this.W6=!1;this.Oe(a)},eT:function(a){this.labels&&this.labels.opacity||(this.labels=[],this.labels.opacity={}); for(var b={},c=0;c<a.length;c+=1){var d=a[c].id;d&&(d in this.labels.opacity?(b[d]=this.labels.opacity[d],delete this.labels.opacity[d]):b[d]=0,a[c].yj=!0)}for(var c=0,e=this.labels.length;c<e;c+=1)d=this.labels[c].id,this.labels.opacity[d]&&(a.push(this.labels[c]),b[d]=this.labels.opacity[d],this.labels[c].yj=!1);a.opacity=b},Bd:function(){if(this.wg&&!this.g.Ra){var a=this.g;a.Ra=!0;a.Ld?a.qa("renderComplete"):(a.Ld=!0,a.qa("complete"))}},pc:function(a,b){this.lang=a.lang;this.Eq=a.Eq;this.up=a.up; this.ip(a,b);this.he||this.dk();this.Ls&&(a.mL||a.UE&&g.l.Zl||a.hf&&!a.he&&a.a2)?this.$v(a,b):this.Nz(a,b);this.Ls=this.nb;this.ze&&this.set("display",0);this.NS=this.Hf},Oe:function(a){var b=this.nb.bb(this.Na);b.x<-g.a.Fa/2&&(b.x+=g.a.Fa);b.x>g.a.Fa/2&&(b.x-=g.a.Fa);this.transform={translate:new g.H(a.P.Ha.Ac.x*(this.g.ja?this.g.Ua:1),a.P.Ha.Ac.y*(this.g.ja?this.g.Ua:1)),scale:1/(this.g.ja?this.g.Ua:1),rotate:0}},sE:function(a,b){return a.hc===b.hc&&a.Jc===b.Jc&&a.tc===b.tc&&a.Ic===b.Ic},xn:function(a, b){var c;if(this.zoom){var d=a.nd(Math.pow(2,20-this.zoom));this.labels&&(c=this.Oqa(d,b))&&(c.M5=!1);!c&&this.pb&&(c=this.Nqa(d))&&(c.M5=!0)}return c?[c]:[]},Oqa:function(a,b){for(var c=a.x,d=a.y,e=this.labels.GFa||this.labels,f=e.length-1;0<=f;f-=1){var h=e[f],k=h.za[0]/this.T,l=h.za[1]/this.T;if((h.Ys||!b)&&this.I5(h,c,d,k,l))return h}},Nqa:function(a){var b=a.x;a=a.y;for(var c=this.pb.length-1;0<=c;c-=1){var d=this.pb[c],e=d.za[0]/this.T,f=d.za[1]/this.T;if(d.Ys&&this.I5(d,b,a,e,f))return d}}, I5:function(a,b,c,d,e){for(var f=0;f<a.aa.length;f+=1){var h=a.aa[f][2],k=a.aa[f][3],l=a.aa[f][0],m=a.aa[f][1];this.g.ja&&(h/=this.g.Ua,k/=this.g.Ua,l/=this.g.Ua,m/=this.g.Ua);if(b>=d+l-1&&b<=d+l+h+1&&c>=e+m-1&&c<=e+m+k+1)return!0}return!1},reloadChanged:function(){this.g&&(this.g.Ra=!1);this.oa.count&&(this.oa.clear(),g.Oj&&g.Oj.clear());this.labels=[];this.k6=[];this.Ob&&this.Ob.parentNode&&this.Ob.parentNode.removeChild(this.Ob);this.$m&&this.$m.parentNode&&this.$m.parentNode.removeChild(this.$m); this.set("display")},vj:function(){return this.$m},reCalcLabelPos:function(){this.oa&&this.oa.forEach(function(a){a.se=!0})},styleChanged:function(){this.reCalcLabelPos&&this.reCalcLabelPos()},RI:function(a,b,c,d){if(b&&("roadlabel"===a||"poilabel"===a))for(a=0;a<b.length;a+=1){var e=b[a];if((!d||e.mk)&&e.Cm){var f="",h="",k="";e.rc&&(k=e.rc[0],f=k[3],h=k[4],k=e.Bj?"":k[7]);if(f=this.J.Py&&this.J.Py(f,h,k,e.Cm,e.Uu,c))if(e.visible=f[4],e.xk=f[3],e.xd=f[0],e.rc)for(h=0;h<e.rc.length;h+=1)k=e.rc[h], k[3]=f[0],k[4]=f[1],e.mk&&(k[7]=f[2],e.vI||(e.vI=k[2]),e.fontSize=f[6]?f[6]:k[2])}}}});g.sM={Ny:function(a,b,c){return this.g.Ev+b.join(";")+"&lv="+a+"&key="+g.o.key+"&preload="+(c&&c[0]&&c[0].Je?1:0)},Ws:function(a,b){if(this.g){for(var c=[],d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(h=JSON.parse(h),h["x-vd-v"]?(this.df=h["x-vd-v"],this.mf=[h.tv||"",h.vdv].join("-"),this.Oh=h.tv,this.e.Ee="#"+h.bgc.substring(2)):(h=this.bE(h,b,c,this.df||"v4"))&&d.push(h))}this.set("display")}},Hz:function(a,b){var c=0,d=0,e=1,c=256*b.x,d=256*b.y,e=b.T;return[(c+a[0])*e,(d+a[1])*e]},bE:function(a, b,c,d,e){function f(c,f,m){c=[m,c,f].join("/");if(c=q.oa.get(c)){f=c.ta;var n="3D"==q.J.type?0:-3;if(c&&"loaded"!==c.status)if(q.X9(c,u)||c.Je){if(-1!==s.indexOf(r))if("limg"===r)a[1]&&(c.td={url:"data:image/png;base64,"+a[1],Dk:"limg-"+c.key+"-"+q.g.mc},g.jk.vm(c.td));else{if("roadlabel"===r)for(var p=1;p<a.length;p+=1){var w=a[p],A=g.a.Bw(w[1],d);if(!(0>A[0]||256<=A[0]||0>A[1]||256<=A[1])){var B=q.Hz(A,f),A={margin:0,z:m,zIndex:9E3,za:B,name:w[0],Bj:!0,Ta:A,Ca:[],aa:[],visible:!0,xk:!0};A.id="roadlabel_"+ g.a.zb(A);A.Wq=15>w[2]%90||75<w[2]%90?90*Math.floor((w[2]+15)/90):w[2];B=w[3];0<=w[8]&&(A.mH={name:w[6],S9:w[7],dir:w[8]});var G=B[2],H=B[3],n=-Math.floor(H/2);if(w[4]){A.Bv=!0;var I=w[5].split(":"),P=I[1],P=parseInt(P)-1,I=g.o.Cc+"://vdata.amap.com/style_icon/icon-normal-"+(k||l?"big":"small")+".png";A.Ca.push(I);var I=Math.floor(P/10),L=P%10,M=0,K=0,F=0;l?(M=48,F=K=40):k?(M=K=40,F=36):(M=K=24,F=20);var Q=M*Math.max(G+2,F)/F,I=[-Q/2,-M/2,Q,M,K*L,K*I,K,K];A.te=7;A.aa.push(I)}A.Ca.push(c.td.Dk);A.te= 11;A.aa.push([-Math.floor(G/2),n,G,H,B[0],B[1],B[2],B[3]]);c.ha||(c.ha=[]);c.ha.push(A)}}else if("poilabel"===r){for(var N=[],p=1;p<a.length;p+=1)if(w=a[p],A=g.a.Bw(w[1],d),!(0>A[0]||256<=A[0]||0>A[1]||256<=A[1])){B=q.Hz(A,f);A={id:w[4],margin:n,zIndex:9001,za:B,name:w[0].replace("^",""),mk:!0,Ta:A,Ca:[],aa:[],visible:!0,xk:!0};A.id||(A.id="poilabel_"+g.a.zb(A));P=0;A.Ed=w[8];w[6]&&(I=w[6].split(":"),P=I[1],H=Math.floor((parseInt(I[0].split("_")[1])-28)/2));if(P&&w[3]){I=g.o.Cc+"://vdata.amap.com/style_icon/icon-"+ (1===H?"biz-":"normal-")+(k||l?"big":"small")+".png";A.Ca.push(I);P=parseInt(P)-1;I=Math.floor(P/10);L=P%10;l?(M=48,K=40,F=28):k?(M=K=40,F=28):(M=K=24,F=20);Q=M;if(151===P||152===P||153===P)F-=4,G=w[7][0][2],Q=M*Math.max(G+2,F)/F;I=[-Q/2,-M/2,Q,M,K*L,K*I,K,K];A.aa.push(I)}if(w[2]&&w[7])for(G=w[2],I=0;I<w[2].length;I+=1)A.Ca.push(c.td.Dk),B=w[7][I],l&&!e&&(G[I][0]=Math.round(G[I][0]*v),G[I][1]=Math.round(G[I][1]*v),G[I][2]=Math.round(G[I][2]*v),G[I][3]=Math.round(G[I][3]*v)),L=G[I][0],M=G[I][1]-(l? 4:2),K=B[3],F=B[2],L<-F&&P&&w[3]&&(L=-F+A.aa[0][0]),L-=2,A.te=K-4,4===m&&"\\u5317\\u4eac"===A.name&&(M=l?-50:-26),A.aa.push([L,M,F,B[3],B[0],B[1],B[2],B[3]]);A.Hs=w[5];A.Hs&&N.push(A.Hs);A.Ys=w[4];A.Ji=w[9];A.F6=w[10];A.fg=P;A.rv=H;c.ha||(c.ha=[]);c.ha.push(A)}c.qe||(c.qe={},c.qe.uf=N,g.Mj&&g.Mj.r("vecTileParsed.buildings",{tp:c}))}r===s[s.length-1]&&(c.status="loaded",h=c,c.Ra=c.Ba=!0)}}else q.KU(b,c,u,g.a.bind(q.qT,q))}}var h=null,k=g.l.ba,l=this.g.ja,m=a[0].split("-");1===m.length&&(m=a[0].split("_")); c=parseInt(m[1]);var n=parseInt(m[2]),p=parseInt(m[0]),q=this,r=m[3],s=this.g.ha,u=18<b?Math.pow(2,b-18):1,m=Math.ceil(q.rk.Xy),v=this.g.ja?this.g.Ua:1,w=Math.pow(2,p);10>p&&(c<=m&&f(c+w,n,p),c>=w-m&&f(c-w,n,p));f(c,n,p);return h}};g.M.canvas.rM=g.M.canvas.Qj.extend({ka:[g.sM]});g.M.canvas.Qj.Ib({mU:function(a){this.Wx++;var b=this.$m,c=this.Sk;this.Wy={};var d=this.g.ja?this.g.Ua:1;this.lh=d;var e;0!==a.P.rotation?(e=2*Math.floor(a.P.Ha.Ac.x)*d,d*=2*Math.floor(a.P.Ha.Ac.y)):(e=a.size.width*d,d*=a.size.height);g.f.zm(b,e,d,!0);g.l.zna&&b.parentNode&&b.parentNode.appendChild(b);c.textBaseline="bottom";this.gk=0;this.labels&&this.LT(this.labels);this.labels&&this.Qwa(this.labels,c,g.Nj.Xqa(this.e.D),this.jd,e,d);this.h6=[];this.labels&&(this.labels.pp=this.zoom,this.labels.op= this.nb,this.labels.Rq=this.rotation,this.labels.NK=this.g.ja,this.labels.size=a.size);a.pb&&(this.pb=a.pb);this.pb&&(this.pb.pp=this.zoom,this.pb.op=this.nb,this.pb.Rq=this.rotation,this.pb.size=a.size);this.r("afterLabelRender")},Pwa:function(a,b,c){var d=void 0===b.xk?!0:b.xk,e=1,f=void 0===b.visible?!0:b.visible,h=null,k=this.e.J.be;if(b.Cm&&k){var l=k=h="";b.rc&&b.rc.length&&this.LQ&&(l=b.rc[0],h=l[3],k=l[4],l=b.Bj?"":l[7]);if(h=this.J.Py&&this.J.Py(h,k,l,b.Cm,b.Uu))f=h[4],d=h[3],e=h[5]}if(f){if(this.Sk.globalAlpha!== c||e)this.Sk.globalAlpha=c||e;f=0;for(k=b.Ca.length;f<k;f+=1)(d||"CANVAS"===b.Ca[f].tagName)&&this.jpa(a,b.Ca[f],b.aa[f],b.Wq,c||e);this.Sk.globalAlpha!==c&&(this.Sk.globalAlpha=c);b.rc&&this.LQ&&(b.qj?this.lpa(a,b,h):b.rc.length&&this.LQ(a,b,h))}},jpa:function(a,b,c,d){var e=this.Sk;b=this.Oo(b);if(!b)return 1;var f=c[2],h=c[3],k=c[0],l=c[1];d=(d||0)%360*-Math.PI/180;if(0!==d){var m=Math.cos(d),n=Math.sin(d),p=a[0],q=a[1];e.transform(m,n,-n,m,(1-m)*p+n*q,(1-m)*q-n*p)}k=a[0]+k;a=a[1]+l;4===c.length? b.loaded&&e.drawImage(b,k,a,f,h):e.drawImage(b,c[4],c[5],c[6],c[7],k,a,f,h);0!==d&&e.setTransform(1,0,0,1,0,0)},Oo:function(a){if(!a)return null;if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=g.jk.U3(a))&&a.loaded)return a},mJ:function(a,b){var c=a[0];b&&(c>g.a.Fa/2?c-=g.a.Fa:c<-g.a.Fa/2&&(c+=g.a.Fa));return this.Mu(c,a[1])},Mu:function(a,b){var c=this.g.ja?this.g.Ua:1,d=this.T,e=0,f=0,e=(a-this.ge[0])/d,f=(b-this.ge[1])/d;return[Math.round(e*c),Math.round(f*c)]},i4:function(a,b){var c=a[0];b&&(c> g.a.Fa/2?c-=g.a.Fa:c<g.a.Fa/2&&(c+=g.a.Fa));return[c/this.T,a[1]/this.T]},fta:function(a,b){var c=a.za;return c[0]>b.Xd.x||c[1]>b.Xd.y||c[0]<b.kc.x||c[1]<b.kc.y?!1:!0},yEa:function(a){var b=this.h6;if(this.h6.zoom!==this.labels.zoom)for(var c=0,d=b.length;c<d;c+=1){var e=b[c];e.mk&&this.fta(e,a.P.Ha)&&(this.k6.push(e),e.zoom=b.zoom,e.bFa=new Date)}},tq:function(a,b){var c=this.i4(a.za,a.reverse);if(a.mk)return this.q5(c,a,b);if(a.Bj){var d=!1,e=a.za;if(a.qj){var f=Math.pow(2,20-this.zoom),h=20*f, c=[],k=[],l=[],m=!0;for(g.mw.font=a.dr+"px "+a.font;m;){for(var n=[],p=[],q=!0,r=0;r<a.name.length;r+=1){var s=g.mw.measureText(a.name[r]).width/this.lh*f,u=g.ei.HP(e,s/2+h),h=h+s;if(!u){m=q=!1;break}if(s=this.rS(this.i4(u),5,b))p.push(s),n.push(u);else{q=!1;break}}h+=256*f;q&&(k.push.apply(k,n),c.push.apply(c,p))}if(k.length){d=!0;for(r=0;r<k.length;r+=1)f=k[r][2],f=(new g.H(e[f+1][0]-e[f][0],e[f+1][1]-e[f][1])).direction(),l.push(360-f);a.RS=k;a.lta=l}return d?c:!1}return a.jm?this.q5(c,a,b):this.zoom< a.z?!1:!0}},LT:function(a){function b(b){a.opacity[b]<1-e?(a.opacity[b]+=e,d.ze=1,d.gk=1):a.opacity[b]=1}function c(b){a.opacity[b]>e?(a.opacity[b]-=e,d.ze=1,d.gk=1):a.opacity[b]=0}var d=this,e=0.34;if(!a.qF||"stable"==this.Hf&&"stable"!=this.NS){for(var f=0,h=a.length;f<h;f+=1){var k=a[f],e=k.jm||g.l.ba?1:0.34,l=k.id;if(k.yj){var m=this.tq(k);m?(this.rp(m),k.Xg=!0,b(l)):(k.Xg=!1,c(l))}else l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.gk=this.ze=1):delete a.opacity[l])}a.qF=!0}else if("zoomIn"== this.Hf){f=0;for(h=a.length;f<h;f+=1)k=a[f],e=k.jm||g.l.ba?1:0.34,l=k.id,k.yj?k.Xg&&(m=this.tq(k,!0),this.rp(m),b(l)):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.gk=this.ze=1):delete a.opacity[l]);f=0;for(h=a.length;f<h;f+=1)k=a[f],e=k.jm||g.l.ba?1:0.34,l=k.id,k.yj&&!k.Xg&&((m=this.tq(k))?(this.rp(m),k.Xg=!0,b(l)):(k.Xg=!1,c(l)))}else if("zoomOut"==this.Hf||a.zoom>this.zoom)for(f=0,h=a.length;f<h;f+=1)k=a[f],e=k.jm||g.l.ba?1:0.34,l=k.id,k.yj?k.Xg?(m=this.tq(k))?(this.rp(m),k.Xg=!0,b(l)): (k.Xg=!1,c(l)):c(l):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.gk=this.ze=1):delete a.opacity[l]);else for(f=0,h=a.length;f<h;f+=1)k=a[f],e=k.jm||g.l.ba?1:0.34,l=k.id,k.yj?k.Xg?b(l):c(l):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.gk=this.ze=1):delete a.opacity[l]);return!1},Qwa:function(a,b,c,d,e,f){d=!1;18===a.zoom&&18<this.zoom&&(d=!1);b.globalAlpha=1;b=0;for(var h=a.length;b<h;b+=1){var k=a[b];if(!(d&&k.Bj||k.Fp&&c&&0<=c.indexOf(k.Fp))){var l=this.mJ(k.za,k.reverse);-256> l[0]||l[0]>e+256||-256>l[1]||l[1]>f+256||a.opacity[k.id]&&this.Pwa(l,k,a.opacity[k.id])}}},xJ:function(a){if(a.pb&&a.pb.length)if(this.pb&&this.pb.length){if(this.pb!==a.pb||this.pb.pp!==this.zoom||this.pb.op!==this.nb||this.pb.Rq!==this.rotation||!this.pb.size.hb(a.size))return!0}else return!0;else if(this.pb&&this.pb.length)return!0},gQ:function(a){this.sh&&this.sh.NK!==this.g.ja&&this.g.set("reload");return this.gk||this.xJ(a)||this.labels&&(this.e.kR||this.labels!==this.sh||!this.sh||this.sh.pp!== this.zoom||this.sh.op!==this.nb||a.Gi||this.sh.Rq!==this.rotation||this.sh.NK!==this.g.ja||!this.sh.size.hb(a.size))?!0:!1},q5:function(a,b,c){var d,e=b.aa.length,f=[];if(b.Ji>this.zoom)d=!0;else for(var h=0;h<e;h+=1){var k=b.aa[h];if(!k[8]){var l=k[2],m=k[3],n=k[0],k=k[1];this.g.ja&&(l/=2,m/=2,n/=2,k/=2);var p=b.margin,n=n-p,k=k-p,l=l+2*p,m=m+2*p,n=a[0]+n,k=a[1]+k,l=Math.ceil((n+l)/this.Ds),m=Math.ceil((k+m)/this.Ds),n=Math.floor(n/this.Ds),k=Math.floor(k/this.Ds);(m=c?[n,l,k,m]:this.r5(n,k,l,m))? f.push(m):d=!0}}return d?!1:f},rS:function(a,b,c){var d=a[0]-b/2;a=a[1]-b/2;var e=Math.ceil((d+b)/this.Ds);b=Math.ceil((a+b)/this.Ds);d=Math.floor(d/this.Ds);a=Math.floor(a/this.Ds);return c?[d,e,a,b]:this.r5(d,a,e,b)},rp:function(a){for(var b=0;b<a.length;b+=1)for(var c=a[b][0],d=a[b][2],e=a[b][3],f=0,h=a[b][1]-c;f<=h;f+=1)for(var k=0,l=e-d;k<=l;k+=1)this.Wy[c+f]||(this.Wy[c+f]={}),this.Wy[c+f][d+k]=1},r5:function(a,b,c,d){for(var e=0,f=c-a;e<=f;e+=1)if(this.Wy[a+e])for(var h=0,k=d-b;h<=k;h+=1){if(1=== this.Wy[a+e][b+h])return!1}else this.Wy[a+e]={};return[a,c,b,d]}});g.M.canvas.Qj.Caa=g.da.extend({A:function(a){this.M=a},fla:function(a){this.Eq=a;return this.hP([0,0,0])?!0:this.Eq=!1},OZ:function(){return this.M.he?!1:!0},cga:function(a){if(a){var b=Array.prototype.slice.call(arguments,0);switch(a.type){case "icon":return this.fga.apply(this,b);case "label":return this.gga.apply(this,b);default:console.error("Unknown type",a)}}},XY:function(a,b,c){a=null;try{a=b.getImageData.apply(b,c)}catch(d){console.error(d),a=null}return a},Bla:function(a){return 0>a?0:255< a?255:Math.round(a)},z1:function(a,b){for(var c=0;4>c;c++)a[b+c]=this.Bla(a[b+c]);return a},gP:function(a,b){var c=259*(b+255)/(255*(259-b));return[c*(a[0]-128)+128,c*(a[1]-128)+128,c*(a[2]-128)+128]},Wka:function(a){return[255-a[0],255-a[1],255-a[2]]},hP:function(a,b){isNaN(b)&&(b=20);var c=Math.max(0,0.299*a[0]+0.587*a[1]+0.114*a[2]-b);switch(this.Eq){case "amap://styles/normal":case "normal":return[1*c,1.2*c,255];case "amap://styles/light":case "light":return[1*c,1*c,255];case "amap://styles/fresh":case "fresh":return[1* c,1*c,220];case "amap://styles/grey":case "amap://styles/dark":case "insight":case "dark":return[1.5*a[0],1.5*a[1],1*a[2]];case "amap://styles/blue":case "amap://styles/darkblue":case "blue_night":case "mapv":return[2*a[0],1.5*a[1],1*a[2]]}return!1},hga:function(a,b){var c=20,d=10;switch(b.So){case "active":c+=20,d+=20}return this.gP(this.hP(a,c),d)},tZ:function(a,b){var c=-110;switch(b.So){case "active":c+=30}return this.gP(this.hP(this.Wka(a),c),50)},ega:function(a){return this.gP(a,20)},sZ:function(a, b,c,d,e,f){var h=a[b],k=a[b+1],l=a[b+2];a=a[b+3];0<a?(e=e.call(this,[h,k,l,a],f),c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2]):(c[d]=h,c[d+1]=k,c[d+2]=l);c[d+3]=a;this.z1(c,d)},pfa:function(a){var b=a.data,c=a.width;a=a.height;for(var d=0,e=0,f=[Infinity,Infinity],h=[-Infinity,-Infinity],k=0;k<c;k++)for(var l=0;l<a;l++){var m=4*this.FN(k,l,c,a);if(!(76.5>b[m+3])){e++;k<f[0]&&(f[0]=k);l<f[1]&&(f[1]=l);k>h[0]&&(h[0]=k);l>h[1]&&(h[1]=l);for(var n=!0,p=0;4>p;p++)if(220>b[m+p]){n=!1;break}n&&d++}}return{eAa:0<e? d/e:0,Wna:[f[0],f[1],h[0]-f[0]+1,h[1]-f[1]+1]}},FN:function(a,b,c){return b*c+a},yH:function(a,b,c,d,e,f,h){var k=this.FN(b,c,d,e);d=a[4*k+0];e=a[4*k+1];var l=a[4*k+2];a=a[4*k+3];if(a/255<h.I6||h.N9&&!h.N9.call(this,d,e,l,a))return!1;f.push([b,c]);return!0},Wja:function(a,b){var c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]);return Math.sqrt(c*c+d*d)},Px:function(a,b){return 0.1>Math.abs(a[0]-b[0])&&0.1>Math.abs(a[1]-b[1])},qla:function(a,b){for(var c=[a[0]],d=1,e=a.length;d<e;d++){var f=a[d];this.Wja(f, c[c.length-1])<=b&&c.push(f)}return this.Px(c[c.length-1],a[a.length-1])?c:null},CCa:function(){},qda:function(a,b,c,d){d=g.extend({I6:0.2,D6:4},d);var e,f,h=[],k=[],l=[],m=[];for(e=0;e<c;e++){for(f=0;f<b&&!this.yH(a,f,e,b,c,h,d);f++);for(f=b-1;0<=f&&!this.yH(a,f,e,b,c,k,d);f--);}if(!h.length||!k.length)return null;for(f=0;f<b;f++){var n;e=h[0][0];n=k[0][0];if(f>=e&&f<=n)for(e=0;e<c&&!this.yH(a,f,e,b,c,l,d);e++);e=h[h.length-1][0];n=k[k.length-1][0];if(f>=e&&f<=n)for(e=c-1;0<=e&&!this.yH(a,f,e,b, c,m,d);e--);}if(!l.length||!m.length)return null;m.reverse();h.reverse();if(this.Px(l[l.length-1],k[0])&&this.Px(k[k.length-1],m[0])&&this.Px(m[m.length-1],h[0])&&this.Px(h[h.length-1],l[0])){b=[m,h,l,k];e=0;for(a=b.length;e<a;e++)if(!(2>b[e].length||(b[e]=this.qla(b[e],d.D6),b[e])))return null;return[].concat(b[0]).concat(b[1].slice(1)).concat(b[2].slice(1)).concat(b[3].slice(1))}return null},Tea:function(a){for(var b=[Infinity,Infinity],c=[-Infinity,-Infinity],d=0,e=a.length;d<e;d++){var f=a[d][0], h=a[d][1];b[0]>f&&(b[0]=f);b[1]>h&&(b[1]=h);c[0]<f&&(c[0]=f);c[1]<h&&(c[1]=h)}return b.concat([c[0]-b[0]+1,c[1]-b[1]+1])},iZ:function(a,b){this.q1||(this.q1=document.createElement("canvas"));var c=this.q1;c.width=a;c.height=b;return c},yfa:function(a){switch(a.length){case 2:return"lineTo";case 4:return"quadraticCurveTo"}return null},yY:function(a){switch(a.length){case 2:return[a[0]+0.5,a[1]+0.5];case 4:return[a[0]+0.5,a[1]+0.5,a[2]+0.5,a[3]+0.5]}return a},EX:function(a,b){a.beginPath();for(var c= 0,d=b.length;c<d;c++){var e=b[c];0===c?(2<e.length&&(4===e.length?e=e.slice(-2):console.error("Unknown start point: ",b)),a.moveTo.apply(a,this.yY(e))):a[this.yfa(e)].apply(a,this.yY(e))}},afa:function(a){a=this.tZ([255,255,255],{So:a.So});this.z1(a,0);return"rgba("+a.slice(0,3).join(",")+", 0.8)"},dga:function(a,b,c){function d(a){return[Math.round((a[0]-n)*q+n-m[0]),Math.round((a[1]-p)*r+p-m[1])]}c=g.extend({So:"hover",Sr:!0,padding:[1.5,1.5]},c);var e=a.width,f=a.height,h=this.iZ(2*e+10,f),k=h.getContext("2d"), l=this.Tea(b),m=c.padding;g.l.Kc&&(m[0]+=2.5,m[1]+=2.5);for(var n=l[0],p=l[1],q=(l[2]+2*m[0])/l[2],r=(l[3]+2*m[1])/l[3],l=0,s=b.length;l<s;l++)switch(b[l].length){case 2:b[l]=d(b[l]);break;case 4:b[l]=d(b[l]).concat(d(b[l].slice(2)));break;default:console.error("Unknown point: ",b[l])}k.save();this.EX(k,b);k.closePath();k.fillStyle=c.fillStyle||"rgba(255,255,255,0.85)";k.fill();k.putImageData(a,e+6,0);k.drawImage(h,e+6,0,e,f,0,0,e,f);a=c.Sr&&10<b.length;var u=c.strokeStyle||this.afa(c);k.strokeStyle= a?"#fff":u;k.lineCap="butt";k.lineJoin="round";k.lineWidth=g.l.Kc?2:1.2;k.stroke();k.restore();return{Ba:h,pi:[0,0,e,f],Bd:a?function(a,c){this.sla(a,c,b,u)}:null}},sla:function(a,b,c,d){this.uda();var e=this.M.Wx;this.uX(a,c,{duration:200,FT:0,startTime:Date.now(),Axa:function(a){a.strokeStyle=d;a.lineCap="butt";a.lineJoin="round";a.lineWidth=g.l.Kc?2:1;a.translate(b[0],b[1])},fAa:function(){return this.M.Wx!==e}})},uda:function(){this.FM&&g.a.si(this.FM)},uX:function(a,b,c,d){this.OZ()?this.FM= g.a.Xc(function(){this.FM=null;if(c.fAa.call(this))d&&d.call(this);else{var e=(Date.now()-c.startTime)/c.duration;1<e&&(e=1);var f=Math.round(b.length*e);if(c.FT<f){var h=1===e?b:b.slice(c.FT,f+1);h.length&&(a.save(),c.Axa.call(this,a,e),this.EX(a,h),a.stroke(),a.restore());c.FT=f}1>e?this.uX(a,b,c,d):d&&d.call(this)}},this):d&&d.call(this)},Gda:function(a,b,c){a=a.createImageData(b.width,b.height);var d=a.data,e=a.width,f=a.height,h=c[0]+c[2],k=c[1],l=c[1]+c[3];for(c=c[0];c<h;c++)for(var m=k;m<l;m++)for(var n= 4*this.FN(c,m,e,f),p=0;4>p;p++)d[n+p]=b.data[n+p];return a},$ga:function(a,b,c){var d=a[1]+(b[1]-a[1])*c;return[Math.round(a[0]+(b[0]-a[0])*c),Math.round(d)]},Bga:function(a,b,c){for(var d=1/c,e=[],f=1;f<c;f++){var h=this.$ga(a,b,d*f);e.length&&this.Px(h,e[e.length-1])||e.push(h)}return e},Cga:function(a,b){for(var c=1,d=a.length;c<d;c++){var e=a[c-1],f=a[c];2===f.length&&(4===e.length&&(e=e.slice(2)),2===e.length&&(e=this.Bga(e,f,b),a.splice.apply(a,[c,0].concat(e)),c+=e.length,d+=e.length))}},Cfa:function(a, b,c,d,e){e=Math.round(Math.min(c,d)*e);c--;d--;e?a=[[a+c,b+d-e],[a+c,b+d,a+c-e,b+d],[a+e,b+d],[a,b+d,a,b+d-e],[a,b+e],[a,b,a+e,b],[a+c-e,b],[a+c,b,a+c,b+e],[a+c,b+d-e]]:(e=[a+c,b+d],a=[e,[a,b+d],[a,b],[a+c,b],e]);this.Cga(a,5);return a},fga:function(a,b,c,d,e,f){b=a.pi;var h=c?c.uS:this.XY(d,e,b);if(h){var k=c?c.e5:null,l=h,m=a.padding,n=m?m[0]:0,p=m?m[1]:0;(m=0<n*p)&&(l=this.Gda(e,l,[n,p,l.width-2*n,l.height-2*p]));d=l.data;b=l.width;var q=l.height;if(b&&q){c=(c=this.M.e)&&c.D?c.D.get("hotspotOptions"): {};c=g.extend({borderAnimation:!0},c);l=this.pfa(l);a=!a.Qsa&&0.46<=l.eAa;var r=e.createImageData(b,q);e=r.data;for(var s=a?this.tZ:this.ega,u=0,v=d.length;u<v;u+=4)this.sZ(d,u,e,u,s,{So:f});if(m&&(e=a&&!g.l.Kc?this.qda(d,b,q,{N9:a?function(a,b,c){return!(220<a&&220<b&&220<c)}:null,I6:0.2,D6:4}):null,e||(e=l.Wna,e=this.Cfa(e[0],e[1],e[2],e[3],0.2)),e)){var w=this.dga(r,e,{So:f,fillStyle:"active"!==f?null:"#ddd",hK:h,Sr:c.borderAnimation&&"hover"===f&&!k,padding:a?[1.5,1.5]:[2.5,2.5]}),r=null;return{hK:h, Mz:function(a,b){k&&h&&a.putImageData(h,b[0],b[1]);a.drawImage(w.Ba,w.pi[0],w.pi[1],w.pi[2],w.pi[3],b[0],b[1],b[2],b[3]);w.Bd&&(w.Bd.call(this,a,b),w.Bd=null)}}}return{hK:h,Mz:function(a,b){if(m){var c=this.iZ(r.width,r.height);c.getContext("2d").putImageData(r,0,0);a.clearRect(b[0]+n,b[1]+p,b[2]-2*n,b[3]-2*p);a.drawImage(c,0,0,c.width,c.height,b[0],b[1],b[2],b[3])}else a.putImageData(r,b[0],b[1]);r=null}}}}},gga:function(a,b,c,d,e,f){a=a.pi;if(c=c?c.uS:this.XY(d,e,a))if(d=c.data,a=c.width,b=c.height, a&&b){var h=e.createImageData(a,b);e=h.data;a=0;for(b=d.length;a<b;a+=4)this.sZ(d,a,e,a,this.hga,{So:f});return{hK:c,Mz:function(a,b){a.putImageData(h,b[0],b[1]);h=null}}}},kZ:function(a,b,c){var d=c[2],e=c[3],f=a[0]+c[0];a=a[1]+c[1];if(4===c.length||c.IZ){if((b=this.M.Oo(b))&&b.loaded)return c=[4,4],g.l.Kc&&(c[0]*=2,c[1]*=2),{type:"icon",Qsa:b.src&&b.src.indexOf&&0<=b.src.indexOf("/indoor_icon/"),padding:c,pi:[f-c[0],a-c[1],d+2*c[0],e+2*c[1]]}}else return{type:"label",pi:[f,a,d,e]}}}); g.M.canvas.Qj.Ib({VY:function(){this.NN||(this.NN=new g.M.canvas.Qj.Caa(this));return!1===this.NN.fla(this.Eq)?null:this.NN},Wt:function(a,b){var c=this.VY();if(c&&c.OZ()&&a&&a.Ca&&a.aa&&0===this.rotation){var d=this.Wx,e=this.mJ(a.za),f=[],h;a.Ir||(a.Ir=[]);var k=a.Ir;for(h=a.aa.length-1;0<=h;h--){if(k[h]){if(k[h].rev!==d)continue;if(k[h].e5===b)continue}var l=c.kZ(e,a.Ca[h],a.aa[h]);if(l){var m=c.cga(l,a,k[h],this.$m,this.Sk,b);m&&(k[h]={e5:b,rev:d,uS:m.hK},f.push({Mz:m.Mz,pi:l.pi,pE:"icon"===l.type? 2:1}))}}f.sort(function(a,b){return a.pE-b.pE});h=0;for(d=f.length;h<d;h++)f[h].Mz.call(c,this.Sk,f[h].pi),f[h].Mz=null}},XA:function(a){a.Ir&&(a.Ir.length=0,a.Ir=null)},AH:function(){var a=this.Sk;a&&a.putImageData&&a.putImageData(a.getImageData(0,0,1,1),0,0)},FH:function(a){if(a&&a.Ca&&a.aa&&a.Ir){var b=this.Sk,c=this.VY();if(c){for(var d=this.Wx,e=this.mJ(a.za),f=a.Ir,h=0,k=a.aa.length;h<k;h++){var l=f[h];if(l&&(f[h]=null,d===l.rev)){var m=c.kZ(e,a.Ca[h],a.aa[h]);m&&m.pi&&b.putImageData(l.uS,m.pi[0], m.pi[1])}}a.Ir=null;this.Wx++}}}});g.Qw={h:function(a,b,c,d,e){if(this.we(a,b,c||this))return this;var f=this.nf=this.nf||{};f[a]=f[a]||[];e?f[a].unshift({yb:b,cf:c||this,Dj:d}):f[a].push({yb:b,cf:c||this,Dj:d});"complete"===a&&this.Ra&&this.r(a);return this},we:function(a,b,c){var d=this.nf;if(b&&c){if(d&&a in d&&d[a])for(var e=0;e<d[a].length;e+=1)if(d[a][e].yb===b&&d[a][e].cf===c)return!0;return!1}return d&&a in d&&d[a]&&0<d[a].length},G:function(a,b,c){if(!this.we(a))return this;var d=this.nf;if(d&&d[a])for(var e=0;e<d[a].length;e+= 1)if(!(d[a][e].yb!==b&&"mv"!==b||c&&d[a][e].cf!==c)){d[a].splice(e,1);d[a].length||(d[a]=null);break}return this},fK:function(a,b){if(!this.we(a))return this;var c=this.nf;if(c&&c[a])for(var d=0;d<c[a].length;d+=1)if(!b||c[a][d].cf===b){c[a].splice(d,1);c[a].length||(c[a]=null);break}return this},r:function(a,b){function c(a){var b=Array.prototype.slice.call(arguments,1),c,d,e,f;d=0;for(e=b.length;d<e;d+=1)for(c in f=b[d]||{},f)Object.prototype.hasOwnProperty.call(f,c)&&(a[c]=f[c]);return a}if(!this.we(a))return this; var d={type:a};b||"string"!==typeof b&&"number"!==typeof b&&"boolean"!==typeof b?("object"===typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName)?d.value=b:d=c(d,b):d.value=b;for(var e=[].concat(this.nf[a]),f=0;f<e.length;f+=1)e[f].yb&&(e[f].yb.call(e[f].cf||this,d),e[f]&&e[f].Dj&&this.nf[a]&&this.nf[a].splice(f,1));return this},ui:function(a){a?this.nf&&this.nf[a]&&(this.nf[a]=null):this.nf=null;return this}};(function(){if(!g.Lk){g.Lk=g.KL();var a=g.a.oD({Hz:"posToCoord",cB:"_decodeBoundsList"});g.Lk.xf(null,new Function("\\n    return {\\n      "+a.posToCoord+": "+g.sM.Hz.toString()+",\\n      "+a._decodeBoundsList+": "+g.ax.cB.toString()+"\\n  }"));g.Lk.xf(null,function(){return{zb:function(){var a=0;return function(c){c._amap_label_id_||(a+=1,c._amap_label_id_=a);return c._amap_label_id_}}(),Ws:function(a,c){a.Ch.Ue||(a.Ch.Ue=this.Ue);a.Vo?this.Qua.call(this,a,c):this.Rua.call(this,a,c)},Rua:function(a, c){for(var d=a.fF,e=a.Dn,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.BS&&(l=JSON.parse(l)),l["x-vd-v"]?(this.df=a.Ch.df=l["x-vd-v"],this.mf=a.Ch.mf=[l.tv||"",l.vdv].join("-"),this.Oh=a.Ch.Oh=l.tv):this.Pua(this.extend({},a,{RC:l,Pc:f})))}f.length?this.parseLabel(this.extend({},a.Ch,{Pc:f}),function(d,f){var h=f.data,k=f.bsa;c(d,{mc:a.mc,Jb:a.Jb.filter(function(a){return"loaded"===a.status}),data:h,bsa:k,Dn:e,Ug:{df:a.Ch.df,mf:a.Ch.mf,Oh:a.Ch.Oh,Od:a.Od}},{Iq:!e,el:e})}):c(null,{mc:a.mc,data:null, Dn:e},{Iq:!e,el:e})},Pua:function(a){function c(a,b,c){var n=[c,a,b].join("/");18<h&&!m&&(n+="/"+h);if((a=d.filter(function(a){return a.key===n})[0])&&"loaded"!==a.status&&-1!==l.indexOf(v))if("limg"===v)b=f[1],a.td=b,"string"===typeof b.b&&(b.b=u.cB(b.b)),c="",(c="object"===typeof b.u?b.u.url:b.u)&&(b.u={url:c,Dk:"limg-"+a.key+"-"+e});else{b={Ig:a.ta,Pi:n,Oa:f,Gd:v,HD:"building"===v,Ci:"poilabel"===v||"roadlabel"===v||"building"===v&&p};if("poilabel"===v||"roadlabel"===v)b.td=a.td;v===l[l.length- 1]&&(a.status="loaded");k.push(b)}}var d=a.Jb,e=a.OS,f=a.RC,h=a.Od,k=a.Pc,l=a.ha,m=a.Nf,n=a.ZR,p=a.Be,q=f[0].split("-");a=parseInt(q[1]);var r=parseInt(q[2]),s=parseInt(q[0]),u=this,v=q[3],q=Math.pow(2,s);10>s&&(a<=n&&c(a+q,r,s),a>=q-n&&c(a-q,r,s));c(a,r,s)},Qua:function(a,c){for(var d=a.fF,e=a.Dn,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.BS&&(l=JSON.parse(l)),l["x-vd-v"]?(this.df=a.Ch.df=l["x-vd-v"],this.mf=a.Ch.mf=[l.tv||"",l.vdv].join("-"),this.Oh=a.Ch.Oh=l.tv):this.Oua(this.extend({},a,{RC:l, Pc:f,df:this.df||"v4"})))}d=a.Jb.filter(function(a){return"loaded"===a.status});if(d.length)for(f=a.Jb.length-1;0<=f;f--)"loaded"===a.Jb[f].status&&a.Jb.splice(f,1);c(null,{mc:a.mc,zDa:[],Jb:d,Dn:e,Ug:{df:a.Ch.df,mf:a.Ch.mf,Oh:a.Ch.Oh,Od:a.Od}},{Iq:!e,el:e})},Oua:function(a){function c(a,b,c,f){var l=[f,b,c].join("/");if(a=a.filter(function(a){return a.key===l})[0])if(b=a.ta,a&&"loaded"!==a.status&&-1!==k.indexOf(x))if("limg"===x)p[1]&&(a.td={url:"data:image/png;base64,"+p[1],Dk:"limg-"+a.key+"-"+ n});else{if("roadlabel"===x)for(c=1;c<p.length;c+=1){var m=p[c],v=d.Bw(m[1],q);if(!(0>v[0]||256<=v[0]||0>v[1]||256<=v[1])){var u=t.Hz(v,b),v={margin:0,z:f,zIndex:9E3,za:u,name:m[0],Bj:!0,Ta:v,Ca:[],aa:[],visible:!0,xk:!0};v.id="roadlabel_"+d.zb(v);v.Wq=15>m[2]%90||75<m[2]%90?90*Math.floor((m[2]+15)/90):m[2];u=m[3];0<=m[8]&&(v.mH={name:m[6],S9:m[7],dir:m[8]});var w=u[2],L=u[3],M=-Math.floor(L/2);if(m[4]){v.Bv=!0;var K=m[5].split(":"),F=K[1],F=parseInt(F)-1,K=r.Cc+"://vdata.amap.com/style_icon/icon-normal-"+ (s||h?"big":"small")+".png";v.Ca.push(K);var K=Math.floor(F/10),Q=F%10,N=0,J=0,O=0;h?(N=48,O=J=40):s?(N=J=40,O=36):(N=J=24,O=20);var V=N*Math.max(w+2,O)/O,K=[-V/2,-N/2,V,N,J*Q,J*K,J,J];v.te=7;v.aa.push(K)}v.Ca.push(a.td.Dk);v.te=11;v.aa.push([-Math.floor(w/2),M,w,L,u[0],u[1],u[2],u[3]]);a.ha||(a.ha=[]);a.ha.push(v)}}else if("poilabel"===x){M=[];for(c=1;c<p.length;c+=1)if(m=p[c],v=d.Bw(m[1],q),!(0>v[0]||256<=v[0]||0>v[1]||256<=v[1])){u=t.Hz(v,b);v={id:m[4],margin:e,zIndex:9001,za:u,name:m[0].replace("^", ""),mk:!0,Ta:v,Ca:[],aa:[],visible:!0,xk:!0};v.id||(v.id="poilabel_"+d.zb(v));F=0;v.Ed=m[8];m[6]&&(K=m[6].split(":"),F=K[1],L=Math.floor((parseInt(K[0].split("_")[1])-28)/2));if(F&&m[3]){K=r.Cc+"://vdata.amap.com/style_icon/icon-"+(1===L?"biz-":"normal-")+(s||h?"big":"small")+".png";v.Ca.push(K);F=parseInt(F)-1;K=Math.floor(F/10);Q=F%10;O=J=N=0;h?(N=48,J=40,O=28):s?(N=J=40,O=28):(N=J=24,O=20);V=N;if(151===F||152===F||153===F)O-=4,w=m[7][0][2],V=N*Math.max(w+2,O)/O;K=[-V/2,-N/2,V,N,J*Q,J*K,J,J];2<= F&&5>=F&&(K[8]=!0);v.aa.push(K)}if(m[2]&&m[7])for(w=m[2],K=0;K<m[2].length;K+=1)v.Ca.push(a.td.Dk),u=m[7][K],h&&(w[K][0]=Math.round(w[K][0]*y),w[K][1]=Math.round(w[K][1]*y),w[K][2]=Math.round(w[K][2]*y),w[K][3]=Math.round(w[K][3]*y)),Q=w[K][0],N=w[K][1]-(h?4:2),J=u[3],O=u[2],Q<-O&&F&&m[3]&&(Q=-O+v.aa[0][0]),Q-=2,v.te=J-4,4===f&&"\\u5317\\u4eac"===v.name&&(N=h?-50:-26),v.aa.push([Q,N,O,u[3],u[0],u[1],u[2],u[3]]);v.Hs=m[5];v.Hs&&M.push(v.Hs);v.Ys=m[4];v.Ji=m[9];v.F6=m[10];v.fg=F;v.rv=L;a.ha||(a.ha=[]); a.ha.push(v)}a.qe||(a.qe={},a.qe.uf=M)}x===k[k.length-1]&&(a.status="loaded",a.Ra=a.Ba=!0)}}var d=this,e="3D"==a.Vf?0:-3,f=a.Jb,h=a.Kc,k=a.ha,l=a.ZR,m=a.Ua,n=a.OS,p=a.RC,q=a.df,r=this.o,s=this.l.ba,u=p[0].split("-");1===u.length&&(u=p[0].split("_"));a=parseInt(u[1]);var v=parseInt(u[2]),w=parseInt(u[0]),t=this,x=u[3],y=h?m:1,m=Math.pow(2,w);10>w&&(a<=l&&c(f,a+m,v,w),a>=m-l&&c(f,a-m,v,w));c(f,a,v,w)}}},function(a){a||(g.Lk.mta=!0)})}})();(function(){if(!g.Fc){g.Fc=g.KL();var a=g.a.oD({h:"on",we:"hasEvents",G:"off",fK:"offByContext",r:"emit",ui:"clearEvents"});g.Fc.xf(null,function(){return{ssa:function(){var a=this;this.as=[];this.bs={};if("undefined"!==typeof worker)for(var c=0;10>c;c++){var d=new Worker(this.wna);d.status={index:c,l5:!0,DK:!1,hL:0};d.addEventListener("message",function(c){var d=c.data;c=c.target;d.ping&&200===d.status?(c.status.DK=!0,a.as.filter(function(a){return a.status.DK}).length===a.as.length&&(a.as.DK=!0)): d.result&&a.hwa(c,d)});this.as.push(d);d.postMessage({cmd:"ping",ts:(new Date).getTime()})}},hwa:function(a,c){var d=c.parentTaskId,e=c.taskId,f=this.bs[d],h=!1;f[e].data=c;f[e].index=a.status.index;for(var k=0,l=f.length;k<l;k++){var m=f[k];if(m&&m.Nc)if(m.data){var n=m.data;m.Nc(n.err,n.result,m.GL);m.GL.el&&(h=!0);m.data=null;m.Xu=!0;m.Nc=null;m.GL=null;f[k]=null}else if(!m.Xu)break}h&&e===f.length-1&&!f[e]&&delete this.bs[d];0===--a.status.hL&&(a.status.l5=!0)},qma:function(a,c,d){var e=a.parentTaskId; this.as.sort(function(a,b){return a.status.hL-b.status.hL});void 0===this.bs[e]&&(this.bs[e]=[]);this.bs[e].push({GL:c,Nc:d});c=this.as[0];c.status.l5=!1;c.status.hL++;a.taskId=this.bs[e].length-1;a.ts=(new Date).getTime();a.workerIndex=c.status.index;c.postMessage(a)},u6:function(a,c){var d=this;if(3<this.ru||this.disabled)return this.yh(a,c);var e=a.Jb,f=a.Od,h=a.Je,k=a.hr,l=a.Fsa,m=a.ha;if(h&&this.dC())this.Ml(e,c);else if(!this.d5(a,function(a,b){var c=a.Jb,d=a.hr;b.reverse().forEach(function(a){a= c.indexOf(a);-1!==a&&d.splice(a,1)})},c)){var n=[(new Date).getTime(),this.za.length+1&65535,h?1:0,(""+Math.random()).slice(2,7)].join("-");this.Rp[n]={Jb:e,Od:f,w:a,Nc:c,Je:h};h||(this.Tk[n]=1);var e={command:"tiles",reqId:n,payload:{t:k,opt:f,cs:{level:f,flds:m.join(","),v:l?"3":"2"}}},p=this.send(e);this.GJ()||setTimeout(function(){d.GJ()||(d.ru?d.ru++:d.ru=1,d.xpa(p)&&(delete d.Rp[n],delete d.Tk[n],d.yh(a,c)))},300);this.h("tiles",this.dE,this);this.h("ack",this.cE,this);this.h("disable",this.aE, this)}},ina:function(a){this.U5()&&this.send(a)},aE:function(){this.disabled=!0;this.close();for(var a in this.Rp)this.Rp.hasOwnProperty(a)&&this.sY(a)},sY:function(a){var c=this.Rp[a];c&&(this.Ml(c.Jb,c.Nc),delete this.Rp[a],delete this.Tk[a])},cE:function(a){var c=a.reqId,d=this.Rp[c];d&&(a.content.status?d.Nc&&(d.Nc(null,{mc:d.w.mc,Sla:!0,sFa:!0},{Iq:!1,el:!0}),delete this.Rp[c],delete this.Tk[c]):this.sY(c))},dE:function(a){var c=this.Rp[a.reqId];if(c)if(c.Je){a=a.content.data;for(var d=0,e=a.length;d< e;d++)if(a[d]){var f=a[d];if(f.length){var h=f[0].split("-").slice(0,-1).join("/");this.Wj[h]?this.Wj[h].push(f):(this.Wj[h]=[f],this.Tt++);this.Wj[h].length===c.w.ha.length&&(this.Wj[h].$Z=!0)}}}else this.Ws(this.extend({Dn:!1},c.w,{fF:a.content.data,Od:a.content.opt}),c.Nc)},Hva:function(a,c,d){var e=c.Dn,f=c.Ch;c.Iu||(c.Iu=[]);if(a.length){for(var h=function(a,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:p;a||(q.Jb=c.Jb.filter(function(a){return"loaded"===a.status}).map(function(a){return{key:a.key, status:a.status}}),q.data=b.data,q.Dn=e.el,q.Dn&&(q.Iu=c.Iu,c.Iu=null));d(a,q,e)},k=this.extend({},f),l=0,m=a.length;l<m;l++){var n=a[l];n&&c.Iu.push({Pi:n.Pi,Gd:n.Gd,Oa:JSON.stringify(n)})}var p={Iq:!e,el:!!e},q={mc:c.mc,Fu:c.Fu,Iu:[],Ug:{df:f.df,Oh:f.Oh,mf:f.mf,Od:c.Od}},e=c.Nf?"parseDataToWebGL":"parseDataToVector";if(c.Nf&&this.as&&this.as.DK)for(f=0,l=Math.ceil(a.length/15);f<l;f++)m=null,m=f===l-1?p:{Iq:!0,el:!1},k.Pc=a.slice(15*f,15*(f+1)),this.qma({cmd:e,args:[k],parentTaskId:c.mc},m,h);else k.Pc= a,k.Ue=this.Ue,this[e](k,h)}else e&&(this.bs?(a=this.bs[c.mc])&&a.length&&a[a.length-1]&&(a[a.length-1].GL={Iq:!1,el:!0}):d(null,{mc:c.mc,Jb:[],data:null,Dn:e},{Iq:!e,el:!!e}))},Ws:function(a,c){for(var d=a.fF,e=[],f=0,h=d.length;f<h;f++){var k=d[f];k&&(a.BS&&(k=JSON.parse(k)),k["x-vd-v"]?(this.df=a.Ch.df=k["x-vd-v"],this.Oh=a.Ch.Oh=k.tv,this.mf=a.mf=[k.tv||"",k.vdv].join("-"),k.bgc&&(k="#"+k.bgc.substring(2),a.Fu!==k&&(a.Fu=k))):this.bE(this.extend({},a,{RC:k,Pc:e})))}this.Hva(e,a,c)},QGa:function(a){for(var c= 0,d=a.length;c<d;c++){var e=a[c];e.Sp&&(self.Au(e.Sp),delete e.Sp)}}}});g.Fc.xf(null,new Function("\\n    return {\\n      "+a.on+": "+g.Qw.h.toString()+",\\n      "+a.hasEvents+": "+g.Qw.we.toString()+",\\n      "+a.off+": "+g.Qw.G.toString()+",\\n      "+a.offByContext+": "+g.Qw.fK.toString()+",\\n      "+a.emit+": "+g.Qw.r.toString()+",\\n      "+a.clearEvents+": "+g.Qw.ui.toString()+"\\n    }\\n  "));g.KW?g.Fc.xf(null,g.KW,function(a){a||(g.Fc.v5=!0)}):g.Fc.v5=!0}})(); ');
_jsload_('overlay', 'g.Aa.Ec=g.Aa.Pe.extend({A:function(a,b){var c=a.length;this.Rf=Array(c);for(var d,e,f=0;f<c;f+=1)if(d=a[f],e=new g.Aa.VL(d),this.Rf[f]=e,!b)if(0===f){if(0===d.length)break;e.vq(d)||d.reverse()}else 0!==d.length&&e.vq(d)&&d.reverse()},Md:function(){if(0===this.Rf.length)return[Infinity,Infinity,-Infinity,-Infinity];if(!this.yg){for(var a=this.Rf[0].Md(),b=1;b<this.Rf.length;b+=1){var c=this.Rf[b].Md();g.I.R2(a,c)||g.I.extend(a,c)}this.yg=a}return this.yg},F4:function(){return this.Rf},LEa:function(){for(var a= 0;a<this.Rf.length;a+=1);},zi:function(){return g.Aa.Qe.GF},Ud:function(a){for(var b=this.Rf,c,d=0,e=b.length;d<e&&(c=b[d].Ud(a),0<d&&(c=!c),c);d+=1);return c},eoa:function(a){for(var b=this.Rf,c,d=[],e=0,f=b.length;e<f;e+=1)(c=g.yd.vq(b[e].za))?d.length&&d[d.length-1].push(e):d.push([e]);e=0;for(f=d.length;e<f;e+=1){c=!1;for(var h=0,k=d[e].length;h<k&&(c=g.Aa.VL.prototype.Ud.call(b[d[e][h]],a),0<h&&(c=!c),c);h+=1);if(c)return!0}}});g.Aa.zp=g.Aa.Pe.extend({A:function(a){var b=a.length;this.ke=Array(b);for(var c=0;c<b;c+=1){var d=new g.Aa.Ec(a[c]);this.ke[c]=d}},Md:function(){if(!this.yg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.ke,c=0,d=b.length;c<d;c+=1)g.I.extend(a,b[c].Md());this.yg=a}return this.yg},uR:function(){return this.za},zi:function(){return g.Aa.Qe.CF},Y3:function(){return this.ke},Ud:function(a){for(var b=!1,c=0,d=this.ke.length;c<d;c+=1)if(this.ke[c].Ud(a)){b=!0;break}return b}});g.Aa.tr=g.Aa.Pe.extend({A:function(a){this.za=a},Md:function(){if(!this.yg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=0,c=this.za.length;b<c;b+=1)g.I.KI(a,this.za[b]);this.yg=a}return this.yg},uR:function(){return this.za},zi:function(){return g.Aa.Qe.RL},Dqa:function(){return this.za.length},Gy:function(a){return g.yd.os(a,this.za)}});g.Aa.VL=g.Aa.tr.extend({zi:function(){return g.Aa.Qe.sW},vq:g.yd.vq,Ud:function(a){return g.yd.Ud(a,this.za)}});g.Aa.Ww=g.Aa.Pe.extend({A:function(a){var b=a.length;this.za=a;this.ke=Array(b);for(var c=0;c<b;c+=1){var d=new g.Aa.tr(a[c]);this.ke[c]=d}},Y3:function(){return this.ke},Md:function(){if(!this.yg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.ke,c=0,d=b.length;c<d;c+=1)g.I.extend(a,b[c].Md());this.yg=a}return this.yg},uR:function(){return this.za},zi:function(){return g.Aa.Qe.bM},Dqa:function(){return this.za.length},Gy:function(a){for(var b=Infinity,c=0,d=this.ke.length;c<d;c+=1)b=Math.min(b, this.ke[c].Gy(a));return b}});g.B.$b=g.B.Fh.extend({A:function(a,b){arguments.callee.ma.apply(this,arguments);this.UH=a;this.X("options",a);this.X("geodesic",a);this.X("path",a);this.X("noSelect",a);this.Hu();this.X("display",b);b.h("zoomend",this.po,this)},$p:function(){if("3D"==this.map.D.view.type){var a=this.L;a&&(a.fc().Uj=!0)}},deltaPosChanged:function(){this.set("display")},geodesicChanged:function(){this.pathChanged()},ap:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),d=a.Pd(b),e=[],f,h,b=0;for(f= c.length;b<f;b+=1)h=this.map.Cb(c[b]).add(d),e.push(this.map.Qd(h));0<e.length&&this.set("path",e);if(this.ku&&0<this.ku.length)for(b=0,c=this.ku.length;b<c;b+=1)this.ku[b].ap(a)},tz:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.UH.r("change",{type:"change",target:this.UH})},oB:function(a){this.get("options");return this.Ega()?this.lfa(a):this.BN(a)},Ega:function(){var a=this.get("options");return a&&!!a.geodesic},getStrokeWeight:function(){return this.get("options").strokeWeight}, lfa:function(a){if(!a||!a.length)return[];var b,c=[],d,e,f=[],h,k=this.map.get("resolution"),l=this.get("options").geodesicInterpolatePixelWidth||17;c.push(a[0]);f.push(this.CN(a[0]));d=1;for(e=a.length;d<e;d+=1)h=this.CN(a[d]),b=Math.round(Math.abs(h[0]-f[f.length-1][0])/k),b=Math.min(31,Math.round(b/l),Math.round(Math.abs(a[d-1].R-a[d].R))),"3D"==this.map.D.view.type&&(b=Math.round(b/1.2)),b=g.U.Tqa(a[d-1],a[d],b),c.push.apply(c,b),f.push.apply(f,this.BN(b)),c.push(a[d]),f.push(h);return f},rD:function(a, b,c){return[(b[0]-a[0])*c+a[0],(b[1]-a[1])*c+a[1]]},dI:function(a,b,c){var d=g.l.Fn?1:0,e=[],f=[],h,k,l,m,n,p,q;m=a.fc();m instanceof g.Aa.tr?q=[m]:m instanceof g.Aa.Ww&&(q=m.ke);var r="",s=a.Ma.rotation;a=this.map.get("size");m=Math.PI*s/180;var u=(Math.abs(a.width*Math.cos(m))+Math.abs(a.height*Math.sin(m)))/2,v=(Math.abs(a.width*Math.sin(m))+Math.abs(a.height*Math.cos(m)))/2;a=[];h=0;for(k=q.length;h<k;h+=1)if(l=q[h].za,l.length){var w=0;n=0;for(p=l.length;n<p;n+=1)if(m=l[n],e=this.ig(m),e[0]= g.a.xb(e[0]+u,d),e[1]=g.a.xb(e[1]+v,d),0===n)f[0]=e[0],f[1]=e[1],r+=" M"+e[0]+" "+e[1];else if(e[0]!==f[0]||e[1]!==f[1]){if(b){var t=Math.sqrt(Math.pow(e[0]-f[0],2)+Math.pow(e[1]-f[1],2));if(40<t+w){var s=f,x=e;x[0]===s[0]?s=x[1]>s[1]?Math.PI:0:x[1]===s[1]?s=x[0]>s[0]?Math.PI/2:-Math.PI/2:(m=x[0]-s[0],x=x[1]-s[1],s=Math.atan(m/x),0<m&&0<x?s=Math.PI-s:0>m&&0>x?s=-s:0<m&&0>x?s=-s:0>m&&0<x&&(s=Math.PI-s));for(m=40-w;m<t;)x=this.rD(f,e,m/t),a.push(x[0],x[1],s),m+=40;w=(t-(40-w))%40}else w+=t}r+=" L"+ e[0]+" "+e[1];f[0]=e[0];f[1]=e[1]}}b=[r];if(a.length){f="";c/=2;m=3*Math.PI/4;for(q=0;q<a.length;q+=3)r=a[q],u=a[q+1],k=a[q+2]+m,h=a[q+2]-m,e=r+Math.sin(k)*c,k=u-Math.cos(k)*c,l=r+Math.sin(h)*c,h=u-Math.cos(h)*c,f+=" M"+g.a.xb(e,d)+" "+g.a.xb(k,d),f+=" L"+g.a.xb(r,d)+" "+g.a.xb(u,d),f+=" L"+g.a.xb(l,d)+" "+g.a.xb(h,d);b.push(f)}return b},Hu:function(){if(this.map&&!this.L){var a=this.map,b=this.get("path"),b=this.L=new g.bi({wN:this.Mb.OG,name:"polyline-"+g.a.zb(this),zIndex:this.get("options").zIndex|| 1,map:a,W:new g.Aa.tr(this.oB(b)),style:this.get("options")});b.vo=this;b.fc().Uj=!0;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.bf("noSelect visible zIndex strokeWeight isOutline deltaPos".split(" "),this)}},pathChanged:function(){var a=this.L,b=this.get("path");a&&(this.$p(),this.set("coords",this.oB(b)),a.se=!0,"c"!==this.map.get("overlayRender")&&a.Ma?(b=this.Mb.get("showDir")&&g.l.FL,b=this.dI(a,b,this.Mb.get("strokeWeight")),0===b[0].length&&a.Ma?(g.f.remove(a.Ma.Ph), g.f.remove(a.Ma.Rc),g.f.remove(a.Ma.dir),a.Ma=null):g.l.Fn?(a.Ma.Ph.setAttribute("d",b[0]),a.Ma.Rc&&a.Ma.Rc.setAttribute("d",b[0]),a.Ma.dir&&b[1]&&a.Ma.dir.setAttribute("d",b[1])):(b=b[0]+" e",a.Ma.Ph.path=b,a.Ma.Rc&&(a.Ma.Rc.path=b))):this.set("display"))},po:function(){},visibleChanged:function(){this.L&&(this.L.Ma?this.get("visible")?(this.L.Ma.Ph.style.display="block",this.L.Ma.Rc&&(this.L.Ma.Rc.style.display="block"),this.L.Ma.dir&&(this.L.Ma.dir.style.display="block")):(this.L.Ma.Ph.style.display= "none",this.L.Ma.Rc&&(this.L.Ma.Rc.style.display="none"),this.L.Ma.dir&&(this.L.Ma.dir.style.display="none")):this.set("display"))},optionsChanged:function(){this.$p();this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.vs(),this.L.Ma&&(g.f.remove(this.L.Ma.Ph),g.f.remove(this.L.Ma.Rc),g.f.remove(this.L.Ma.dir)));this.set("display")}});g.B.uA=g.B.$b.extend({A:function(a,b){this.kma=a;arguments.callee.ma.apply(this,arguments);this.X("tolerance",a);b.h("zoomend",this.po,this)},ap:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),d=a.Pd(b),e=[],f,h,b=0;for(f=c.length;b<f;b+=1){h=this.map.Cb(c[b]).add(d);var k=this.map.Qd(h);e.push(k);if(c[b].controlPoints){k.controlPoints=[];for(var l=c[b].controlPoints,m=0,n=l.length;m<n;m+=1)h=this.map.Cb(l[m]).add(d),k.controlPoints.push(this.map.Qd(h))}}0<e.length&&this.set("path", e);if(this.ku&&0<this.ku.length)for(b=0,c=this.ku.length;b<c;b+=1)this.ku[b].ap(a)},tz:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.UH.r("change",{type:"change",target:this.UH})},BN:function(a){var b=Math.pow(2,20-Math.round(this.map.get("zoom")));return g.Nw.l4(a,this.map.nj,b,this.kma.w)},toleranceChanged:function(){this.pathChanged()},po:function(){this.pathChanged()},Ut:function(a,b){for(var c=[],d=void 0,e=void 0,f=void 0,d=0,e=a.length;d<e;d+=1){f= this.map.Cb(a[d]);f.x+=b[0];f.y+=b[1];var h=this.map.Qd(f);c.push(h);if(a[d].controlPoints){h.controlPoints=[];for(var k=a[d].controlPoints,l=0,m=k.length;l<m;l+=1)f=this.map.Cb(k[l]),f.x+=b[0],f.y+=b[1],h.controlPoints.push(this.map.Qd(f))}}return c}});g.B.Ec=g.B.Fh.extend({A:function(a,b){arguments.callee.ma.apply(this,arguments);this.vC=a;this.X("options",a);this.X("path",a);this.Hu();this.X("display",b)},$p:function(){if("3D"==this.map.D.view.type){var a=this.L;if(a)for(var a=a.fc().ke,b=0;b<a.length;b+=1)a[b].Uj=!0}},deltaPosChanged:function(){this.set("display")},ap:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path");a=a.Pd(b);var b=[],d,e,f;c.length&&c[0]instanceof g.U&&(c=[c],e=!0);if(c.length){c[0]instanceof g.U?(c= [[c]],e=!0):c[0]instanceof Array&&c[0][0]instanceof g.U&&(f=!0,c=[c]);for(var h=0,k=c.length;h<k;h+=1){for(var l=c[h],m=[],n=0,p=l.length;n<p;n+=1){for(var q=l[n],r=[],s=0,u=q.length;s<u;s+=1)d=this.map.Cb(q[s]).add(a),r.push(this.map.Qd(d));m.push(r)}b.push(m)}this.vC.r("movepoly",{tK:a});0<b.length&&(e?b=b[0][0]:f&&(b=b[0]),this.set("path",b))}},tz:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.vC.r("movepoly",{tK:c});this.vC.r("change",{type:"change", target:this.vC});this.vC.r("setPath")},Ut:function(a,b){var c=this.map.D,d=[];if(g.a.isArray(a)){if(g.a.isArray(a[0]))for(c=0;c<a.length;c+=1)d[c]=this.Ut(a[c],b);else for(var e=0,f=a.length;e<f;e++){var h=c.Cb(a[e]);h.x+=b[0];h.y+=b[1];d.push(c.Qd(h))}return d}},kna:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return a.length?a[0]instanceof g.U?[[a]]:a[0]instanceof Array&&a[0][0]instanceof g.U?[a]:a:a},oB:function(){for(var a=0<arguments.length&&void 0!==arguments[0]? arguments[0]:[],a=this.kna(a),b,c,d=[],e=this.map,f=0;f<a.length;f+=1){for(var h=a[f],k=[],l=0;l<h.length;l+=1){var m=h[l],n=[];b=0;for(c=m.length;b<c;b+=1){var p=e.Cb(m[b]);n.push([p.x,p.y])}k.push(n)}d.push(k)}return d},Hu:function(){if(this.map&&!this.L){var a=this.map,b=this.get("path"),b=this.L=new g.bi({wN:this.Mb.OG,name:"polygon-"+g.a.zb(this),zIndex:this.get("options").zIndex||1,map:a,W:new g.Aa.zp(this.oB(b)),style:this.get("options")});b.vo=this;for(var c=b.fc().ke,d=0;d<c.length;d+=1)c[d].Uj= !0;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.bf(["visible","zIndex","strokeWeight","deltaPos"],this)}},pathChanged:function(){var a=this.L,b=this.get("path");a&&(this.set("coords",this.oB(b)),this.$p(),a.se=!0,"c"!==this.map.get("overlayRender")&&a.fa?(b=this.eI(a),0===b.length?(a.fa.parentNode.removeChild(a.fa),a.fa=null):g.l.Fn?a.fa.setAttribute("d",b.join(" ")):(b.push("e"),a.fa.path=b.join(" "))):this.set("display"))},getStrokeWeight:function(){return this.get("options").strokeWeight}, visibleChanged:function(){this.L&&(this.L.fa?this.get("visible")?this.L.fa.style.display="block":this.L.fa.style.display="none":this.set("display"))},optionsChanged:function(){this.$p();this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.vs());this.set("display")},eI:function(a){var b=[NaN,NaN,0],c=[NaN,NaN],d,e,f,h,k,l,m,n=a.fa.rotation,p=this.map.get("size");e=Math.PI*n/180;n=(Math.abs(p.width*Math.cos(e))+Math.abs(p.height*Math.sin(e)))/2;p=(Math.abs(p.width* Math.sin(e))+Math.abs(p.height*Math.cos(e)))/2;a=a.fc();a instanceof g.Aa.Ec?d=[a]:a instanceof g.Aa.zp&&(d=a.ke);var q=[];a=0;for(e=d.length;a<e;a+=1)if(b=d[a],f=b.Rf,h=f.length,0<h)for(var r=0;r<h;r+=1){var s;k=f[r].za;l=0;for(m=k.length;l<m;l+=1)if(b=k[l],b=this.ig(b),b[0]=Math.ceil(b[0]+n),b[1]=Math.ceil(b[1]+p),0===l)c[0]=NaN,c[1]=NaN,s=b,q.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]||b[1]!==c[1])q.push("L"+b[0]+" "+b[1]),c=b;s&&q.push("L"+s[0]+" "+s[1])}return q}});g.B.hh=g.B.Fh.extend({A:function(a,b){arguments.callee.ma.apply(this,arguments);this.X("center",a);this.X("draggable",a);this.X("unit",a,!0);this.X("radius",a);this.X("options",a);this.Hu();this.X("display",b)},ap:function(a){var b=this.get("center");a=a.Pd(Math.pow(2,20-this.map.get("zoom")));a=this.map.Cb(b).add(a);b instanceof g.U?this.set("center",this.map.Qd(a)):this.set("center",a)},tz:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.Mb.r("change", {type:"change",target:this.Mb})},Hu:function(){if(this.map&&!this.L){var a=this.map,b=a.Cb(this.get("center")),c="px"===this.get("unit"),b=this.L=new g.bi({yB:!0,wN:this.Mb.OG,name:"circle-"+g.a.zb(this),zIndex:this.get("options").zIndex||1,map:a,W:new g.Aa.Ng([b.x,b.y]),style:this.get("options")});b.Av=c;b.vo=this;b.fc().Uj=!0;this.X("resolution",a);this.X("coords",b);this.X("style",b);b.X("visible",this,!0);b.bf("radius center unit resolution zIndex strokeWeight deltaPos".split(" "),this)}},$p:function(){if("3D"== this.map.D.view.type){var a=this.L;a&&(a.fc().Uj=!0)}},deltaPosChanged:function(){this.set("display")},getStrokeWeight:function(){return this.get("options").strokeWeight},centerChanged:function(){var a=this.L,b=this.map.Cb(this.get("center"));a&&(a.fc().za=[b.x,b.y],this.$p(),this.set("coords",[b.x,b.y]),this.se=!0,a.fa?this.j8():this.set("display"))},visibleChanged:function(){this.L&&(this.L.fa?this.get("visible")?this.L.fa.style.display="block":this.L.fa.style.display="none":this.set("display"))}, optionsChanged:function(){this.L&&(this.$p(),this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.vs(),this.L.se=!0,this.set("display"))},VP:function(a){var b=[],c=[],d,c=a.fc();c instanceof g.Aa.Ng&&(d=[c]);var c=this.map.D.nj.oq(Math.floor(this.map.get("zoom"))),e=a.fa.rotation,b=this.map.get("size"),f=Math.PI*e/180,e=(Math.abs(b.width*Math.cos(f))+Math.abs(b.height*Math.sin(f)))/2,f=(Math.abs(b.width*Math.sin(f))+Math.abs(b.height*Math.cos(f)))/2,b=this.ig(d[0].za); b[0]=Math.round(b[0]+e);b[1]=Math.round(b[1]+f);a=a.get("remain")?5.23:a.Av?this.get("radius"):this.get("radius")/(c*Math.cos(Math.PI*this.get("center").Q/180));return c=["M",b[0],b[1]-a,"A",a,a,0,1,1,b[0]-0.01,b[1]-a,"Z"].join(" ")},j8:function(){var a=this.L,b=this.get("radius");if("c"!==this.map.get("overlayRender")&&a.fa)if(g.l.Fn)b=this.VP(a),a.fa.setAttribute("d",b);else{b=this.map.D.nj.oq(Math.floor(this.map.get("zoom")));b=a.Av?this.get("radius"):this.get("radius")/(b*Math.cos(Math.PI*this.get("center").Q/ 180));a.fa.style.width=Math.round(2*b);a.fa.style.height=Math.round(2*b);var c=this.map.get("size").width/2,d=this.map.get("size").height/2,e=this.ig(a.fc().za);e[0]=Math.round(e[0]+c);e[1]=Math.round(e[1]+d);a.fa.style.top=Math.round(e[1]-b);a.fa.style.left=Math.round(e[0]-b)}else this.set("display")},radiusChanged:function(){var a=this.L,b=this.get("radius");a&&(this.$p(),a.style.radius=b,a.se=!0,a.r("rad",{target:a,ul:b}),this.j8())}}); ');
_jsload_('wgl', 'g.l.sp&&(g.F$=function(a){function b(a,b,c,e,f,h,k){var l=a.Oa;c=[];e=a.Ig;var m=null,n=null,s;a.Oa=[];h=h&&16<b;for(var w=[],t=[],Q=[],N=1,J=l.length;N<J;N+=1){var O=l[N],V=O[1].split("&"),m=p(x?x:V[0]),n=p(V[4]);s=O[6];var R=O[0],S=O[3]*Math.pow(2,2)*k,T=O[4],W={},U=O[5],O=[];if(U&&U.length)for(var X=0,Z=U.length;X<Z;X+=1){var Y=U[X].split("-"),V=Y[1].split("^");O[Y[0]]=V;for(var Y=0,aa=V.length;Y<aa;Y+=1)-1===d(c,V[Y])&&c.push(V[Y])}if(T&&T.length)for(U=0,Z=T.length;U<Z;U+=1){V=T[U].split("-"); Y=parseInt(V[0]);W[Y]={};for(var aa=1,da=V.length;aa<da;aa+=1)W[Y][parseInt(V[aa])]=!0}U=0;for(T=R.length;U<T;U+=1){V=R[U];y||(w=[],Q=[],t=[]);for(var V=r(V,v,b),Z=q(V,e,f,!0),V=Z[1],Y=[],X=da=aa=0,Aa=V.length-1;X<Aa;X+=1){var ha=V[X],ea=V[X+1],aa=aa+ha[0],da=da+ea[1];if(!W[U]||!W[U][X])if(h){var la=ea[0]-ha[0],ia=ea[1]-ha[1],ta=5E3+la+(5E3+ia)/1E4,ia=Math.sqrt(Math.pow(la,2)+Math.pow(ia,2)),la=Math.round(S/64),ia=Math.ceil(ia/64);la?t.push(0,0,ia,la,0,la,0,0,ia,0,ia,la):t.push(-1,-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1);w.push(ha[0],ha[1],-S,ta);w.push(ea[0],ea[1],0,ta);w.push(ha[0],ha[1],0,ta);w.push(ha[0],ha[1],-S,ta);w.push(ea[0],ea[1],-S,ta);w.push(ea[0],ea[1],0,ta)}else Q.push(ha[0],ha[1],0,-1,ea[0],ea[1],0,-1);Y.push([ha[0],ha[1]])}X=V.length-1;aa=[aa/X+215440491,da/X+106744817];V=u.Wh(h?Y:V,[],0,1);Y=0;for(da=V.length;Y<da;Y+=1)X=-S,h||(X=0),t.push(-1,-1),w.push(V[Y][0],V[Y][1],X,0);!y&&w.length&&(V=[m,n,s],Z=[new Float32Array(w),new Float32Array(t),new Float32Array(Q),V,Z[1],aa],O[U]&& (Z.Tra=O[U]),a.Oa.push(Z))}}y&&w.length&&(b=256*Math.pow(2,20-e.z),aa=[e.x*b+128,e.y*b+128],Z=[new Float32Array(w),new Float32Array(t),new Float32Array(Q),[m,n,s],null,aa],a.Oa.push(Z));a.Cn=c;return a}function c(a,b,c,e,f,h){c=a.Oa;e=[];for(var k=a.Ig,l=null,m=null,n={},s=1,w=c.length;s<w;s+=1){var t=c[s],y=t[1].split("&"),l=p(x?x:y[0]),m=p(y[2]),N=y[0]+y[2];n[N]||(n[N]={h$:[],I8:[],Nb:[],le:[],cR:l,borderColor:m,Zc:t[6]});var l=n[N].h$,m=n[N].I8,y=n[N].Nb,N=n[N].le,J=t[0],O=t[3]*Math.pow(2,2),V= t[4],R={};if((t=t[5])&&t.length)for(var S=0,T=t.length;S<T;S+=1)for(var W=t[S].split("-")[1].split("^"),U=0,X=W.length;U<X;U+=1)-1===d(e,W[U])&&e.push(W[U]);if(V&&V.length)for(t=0,S=V.length;t<S;t+=1)for(T=V[t].split("-"),W=parseInt(T[0]),R[W]={},U=1,X=T.length;U<X;U+=1)R[W][parseInt(T[U])]=!0;t=0;for(V=J.length;t<V;t+=1){for(var Z=J[t],Z=r(Z,v,b),Z=q(Z,k,f,!0)[1],S=[],T=0,W=Z.length-1;T<W;T+=1){var U=Z[T],X=Z[T+1],Y=[U[0]-0*O,U[1]-0.3*O],aa=[X[0]-0*O,X[1]-0.3*O];R[t]&&R[t][T]||(h?((X[0]-U[0])*(Y[1]- U[1])<(Y[0]-U[0])*(X[1]-U[1])&&(l.push(Y[0],Y[1],2),l.push(X[0],X[1],-1),l.push(U[0],U[1],-1),l.push(Y[0],Y[1],2),l.push(aa[0],aa[1],2),l.push(X[0],X[1],-1),N.push([U,X,aa,Y])),y.push(Y[0],Y[1],-1,aa[0],aa[1],-1)):y.push(U[0],U[1],-1,X[0],X[1],2));S.push([Y[0],Y[1]])}Z.pop();T=u.Wh(h?S:Z,[],0,1);N.push(h?S:Z);Z=0;for(S=T.length;Z<S;Z+=1)m.push(T[Z][0],T[Z][1],3)}}a.Oa=[];for(Z in n)n.hasOwnProperty(Z)&&(y=[n[Z].cR,n[Z].borderColor,n[Z].Zc],a.Oa.push([new Float32Array(n[Z].h$),new Float32Array(n[Z].I8), new Float32Array(n[Z].Nb),y,n[Z].le]));a.Cn=e;return a}function d(a,b){if(a&&!a.length)return-1;if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function e(a,b,c){var d=a.Oa,e=[],f={0:"ffde0000",1:"ffffcc00",2:"ff33b100",3:"ff8c0e0e",4:"ffadadad"};c&&(c.congested&&(f[0]=c.congested),c.slow&&(f[1]=c.slow),c.smooth&&(f[2]=c.smooth),c.seriousCongested&&(f[3]=c.seriousCongested),c.unknown&&(f[4]=c.unknown));c=0;for(var h=d.length;c<h;c++){for(var l=[],m=0,n=d[c].length;m< n;m++){var s=[],r=[];k(s,r,d[c][m][1],a.ta,b);s.forEach(function(a,b){l.push([a,r[b]])})}if(l.length){var q=[[],[],{width:0.75*d[c][0][0],borderColor:p(f[c])}];l.forEach(function(a){var b=q[0].length/9;b&&(a[1]=a[1].map(function(a){return a+b}));q[0]=q[0].concat(a[0]);q[1]=q[1].concat(a[1])});q[0]=new Float32Array(q[0]);q[1]=new Uint16Array(q[1]);e.push(q)}}a.Oa=e;return a}function f(a,b,c,d,e,f){function k(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=a[c][0].length/s-1;return b}function l(){Ba.Z.push(new Float32Array(la)); Ba.cc.push(new Uint16Array(ia))}function m(){la=[];ia=[];ta=[];Ha=Ia=0}function n(a,b){for(var c=0,d=a.length;c<d;c++)a[c]+=b;return a}for(var s=11,r="solid solid_roundcap solid_squarecap dash railway dash_crewel".split(" "),q=a.Oa.slice(1),v=q.length-1;0<=v;v--)q[v].u5=v;q.sort(function(a,b){return a[2]>b[2]?1:a.u5>b.u5?1:-1});for(var u={},v=0,t=q.length;v<t;v+=1){var x=q[v],y=x[1].split("&"),R,S,T,W,U;R=S=T=W=U=null;var X,Z,Y,aa,da=null,Aa=!1;X=Z=Y=aa=null;y[1]&&(R=p(y[1]));S=parseInt(y[0]);T=y[2]; T!==r[0]&&(T===r[1]?X="round":T===r[2]?X="square":0===T.indexOf(r[5])?(da=!0,Y=[3,2]):0===T.indexOf(r[3])?(Y=T.substring(5).split(")")[0].split(","),Y.forEach(function(a,b){Y[b]*=e})):0===T.indexOf(r[4])&&(W=R,R=y[4]?p(y[4]):[1,1,1,R[3]],Y=[12,12],Aa=!0,U=3,S=1));y[3]&&y[4]&&3<y.length&&(U=S+parseInt(y[3]),W=p(y[4]),T=y[5],T!==r[0]&&(T===r[1]?Z="round":T===r[2]?Z="square":0!==T.indexOf(r[5])&&0===T.indexOf(r[3])&&(U+=1,aa=T.substring(5).split(")")[0].split(","),aa.forEach(function(a,b){aa[b]*=e})))); if(c){if(Y)for(y=Y.length-1;0<=y;y-=1)Y[y]*=e;if(aa)for(y=aa.length-1;0<=y;y-=1)aa[y]*=e}var ha=[];ha.Uc=0;T=[];var ea=[];h(ha,ea,T,x[0],a.Ig,b,c,d,e,X);"app"===w&&(S/=4,U/=4);y=[S,R,Y,U,W,aa,da,Aa,X,Z,x[3],x[4],x[4].id];x=x[2];u[x]||(u[x]=[]);R=[ha,ea,y];f&&R.push(T);u[x].push(R)}var la=void 0,ia=void 0,ta=void 0,Ia=void 0,Ha=void 0,Ba={Z:[],cc:[],hash:{}};m();for(var Ca in u)if(u.hasOwnProperty(Ca)){b=u[Ca];65535<k(b)+ia[ia.length-1]+10&&(l(),m());c=[];d=Ba.cc.length;f=0;for(r=b.length;f<r;f++)q= b[f],v=null,la=la.concat(q[0]),ia=ia.concat(n(q[1],Ia)),v=new Float32Array([d,q[1].length,2*Ha]),c.push(v),Ia+=q[0].length/s,Ha+=q[1].length,q[2].nva=q[3],b[f]=q[2];Ba.hash[Ca]=c;ta.push(Ca)}l();u.buffer=Ba;a.Oa=u;return a}function h(a,b,c,d,e,f,h,k,l,m){for(var n=0,p=d.length;n<p;n+=1){var s=a.length/11,u=s+6,w=r(d[n],v,f),t=q(w,e,k);if(1<t[1].length){for(var w=t[0],x=t[2],y=0,t=t[1].length;y<t;y+=1){if(0<y){var R=w[2*y]-w[2*y-2],S=w[2*y+1]-w[2*y-1];a.Uc+=Math.sqrt(R*R+S*S)*(h?l:1)}var R=w[2*y], S=w[2*y+1],T=x[y][0],W=x[y][1],U,X;y===t-1?(U=w[2*t-2],X=w[2*t-1]):(U=w[2*y+2],X=w[2*y+3]);var Z,Y;0===y?(Z=R,Y=S):(Z=w[2*y-2],Y=w[2*y-1]);if(0!==y){var aa=y===t-1?0:-1;a.push(R,S,T,W,1,Z,Y,aa,U,X,a.Uc);a.push(R,S,T,W,-1,Z,Y,aa,U,X,a.Uc)}else a.push(R,S,T,W,0,Z,Y,0,U,X,a.Uc),a.push(R,S,T,W,1,Z,Y,0,U,X,a.Uc),a.push(R,S,T,W,1,Z,Y,1,U,X,a.Uc),a.push(R,S,T,W,0,Z,Y,1,U,X,a.Uc),a.push(R,S,T,W,-1,Z,Y,1,U,X,a.Uc),a.push(R,S,T,W,-1,Z,Y,0,U,X,a.Uc),m&&(b.push(s+2,s+0,s+3),b.push(s+2,s+1,s+0),b.push(s+3,s+0, s+4),b.push(s+4,s+0,s+5));y!==t-1?(aa=0===y?0:1,a.push(R,S,T,W,1,Z,Y,aa,U,X,a.Uc),a.push(R,S,T,W,-1,Z,Y,aa,U,X,a.Uc)):(a.push(R,S,T,W,0,Z,Y,0,U,X,a.Uc),a.push(R,S,T,W,1,Z,Y,0,U,X,a.Uc),a.push(R,S,T,W,1,Z,Y,-1,U,X,a.Uc),a.push(R,S,T,W,0,Z,Y,-1,U,X,a.Uc),a.push(R,S,T,W,-1,Z,Y,-1,U,X,a.Uc),a.push(R,S,T,W,-1,Z,Y,0,U,X,a.Uc));y!==t-1?(b.push(u+4*y,u+4*y+3,u+4*y+1),b.push(u+4*y,u+4*y+2,u+4*y+3)):m&&(R=u+4*(t-1),b.push(R+1,R+2,R+0),b.push(R+2,R+3,R+0),b.push(R+0,R+4,R+5),b.push(R+0,R+3,R+4))}c.push(x)}}} function k(a,b,c,d,e){for(var f=[],h=0,k=c.length;h<k;h+=1){var l=[],m=[],n=r(c[h]),p=q(n,d,e);f.push(p[2]);if(1<p[1].length){var s=p[1].length;p[1].forEach(function(a,b,c){var d=c[b-1];c=c[b+1];0===b?d=a:b===s-1&&(c=a);l.push(a[0],a[1],p[2][b][0],p[2][b][1],1,d[0],d[1],c[0],c[1]);l.push(a[0],a[1],p[2][b][0],p[2][b][1],-1,d[0],d[1],c[0],c[1]);0===b?m.push(0,1,2):b!=s-1?(m.push(2*(b-1)+1,2*b+1,2*b),m.push(2*b,2*b+1,2*(b+1))):m.push(2*(b-1)+1,2*b+1,2*b)});a.push(l);b.push(m)}}}function l(a,b,c,d,e, f,h,k){for(var l=0,m=d.length;l<m;l+=1){var n=a.length/2,p=q(r(d[l],v,f),e,h);if(2<p[1].length&&(n=u.Wh(p[1],[],n),n.length&&(a.push.apply(a,p[0]),b.push.apply(b,n),c.push(p[2]),k)))for(var n=0,s=p[2].length;n<s;n+=1){var w=p[2][n][0]/512,t=p[2][n][1]/512;1==e.x%2&&(w+=0.5);1==e.y%2&&(t+=0.5);k.push(w,t)}}}function m(a,b,c,d){function e(a,b){for(var c=0,d=a.length;c<d;c++)a[c]+=b;return a}var f=a.Oa,h=[],k=[],m=[],s=[];n(a,k,m,c);for(var r=[[[0,0],[255,0],[255,255],[0,255]]],q=[[0,0],[255,0],[0,255], [255,255]],v=a.Ig,u=0,w=q.length;u<w;u+=1){var t=q[u][0]/512,x=q[u][1]/512;1==v.x%2&&(t+=0.5);1==v.y%2&&(x+=0.5);s.push(t,x)}h.push([k,m,p("ff"+a.ly.substr(1)),"regions:land",r,s,"30001:1"]);f.sort(function(a,b){return"string"===typeof a?-1:"string"===typeof b?1:a[2]>b[2]?1:a[2]<b[2]?-1:0});q=1;for(v=f.length;q<v;q+=1)u=f[q],k=[],m=[],r=[],s=[],w=p(u[1].split("&")[0]),l(k,m,r,u[0],a.Ig,b,c,s),k=[k,m,w,u[3],null,s,u[4]],d&&(k[4]=r),h.push(k);b={wp:[],Xe:[],Z:[],cc:[],Al:[]};f=d=c=0;for(r=h.length;f< r;f++)k=h[f],b.Z.push.apply(b.Z,k[0]),b.cc.push.apply(b.cc,e(k[1],c)),b.Al.push.apply(b.Al,k[5]),b.Xe.push([k[2],k[6]]),b.wp.push([k[1].length,2*d]),d+=k[1].length,c+=k[0].length/2,delete k[0],delete k[1],delete k[5];b.Z=new Float32Array(b.Z);b.cc=new Uint16Array(b.cc);b.Al=new Float32Array(b.Al);h.buffer=b;a.Oa=h;return a}function n(a,b,c,d){var e=a.Ig;a=256*e.x*d-215440491;e=256*e.y*d-106744817;b.push(a,e);var f=256*d;d=a+f;b.push(d,e);e+=f;b.push(a,e);b.push(d,e);c.push(0,1,2,1,3,2)}function p(a){for(var b= [],c=0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c,2),16)/255);b.push(b.shift());return b}function q(a,b,c,d){var e=0,f=0,e=256*b.x,f=256*b.y;b=[];for(var h=[],k=[],l=0,m=a.length;l<m;l+=2){var n=(e+a[l])*c-215440491,p=(f+a[l+1])*c-106744817,s=k.length;if(d||0===b.length)k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]);else if(n!==k[s-2]||p!==k[s-1])n===k[s-2]&&n===k[s-4]?(k[s-1]=p,b[b.length-1][1]=p,h[b.length-1][1]=a[l+1]):p===k[s-1]&&p===k[s-3]?(k[s-2]=n,b[b.length-1][0]=n,h[b.length- 1][0]=a[l]):(k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]))}return[k,b,h]}function r(a,b,c){var d="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";b=b||"v5";var e,f;"v5"<b?(e=d.length,f=512):(e=27,d=d.substr(0,27),f=333);var h,k,l,m,n;k=[];l=NaN;m=0;for(n=a.length;m<n;m++)h=a[m],h=d.indexOf(h),isNaN(l)?l=h*e:(h=l+h-f,18===c&&"v5"<b&&(h/=4),k.push(h),l=NaN);return k}function s(a,b){for(var c=0,d=b.length;c<d;c++)a.push(b[c])}var u=null,v=1,w,t=!1,x=null,y=!0;return{parseDataToWebGL:function(d, e){function h(a,b){var c=[];if("road"===b){if(a.Oa&&a.Oa.buffer)for(var d=a.Oa.buffer,e=0,f=d.Z.length;e<f;e++)c.push(d.Z[e].buffer,d.cc[e].buffer)}else if("region"===b)a.Oa&&a.Oa.buffer&&(d=a.Oa.buffer,c.push(d.cc.buffer,d.Al.buffer,d.Z.buffer));else if("building"===b&&a.Oa)for(d=0,e=a.Oa.length;d<e;d++)f=a.Oa[d],c.push(f[0].buffer,f[1].buffer),f[2].byteLength&&c.push(f[2].buffer);c.length&&this.Au(c)}function k(a){var b=a.Oa;s&&b&&1<b.length&&b.slice(1).forEach(function(b){if(b&&null===b[1]){var c= b[b.length-1],d=s[c];b[1]=d.browserStyle[d.levelStyleMapping[n]];"road"===a.Gd&&(b[1]=b[1][0],b[4]=d,b[4].id=c)}})}u=this.Wh?this:g.Fc;v=d.df;t=d.AS;w=d.mode;y=d.Pf;var l=t?b:c,n=d.Gv,p=d.Sq,s=null;x=d.Xr;var r=d.ba,q=[],M=Math.pow(2,20-n),K=!!d.Dd;void 0!==d.iy&&(s=d.Ue[d.iy].stylemaps);for(var F=0,Q=d.Pc.length;F<Q;F+=1){var N=d.Pc[F],J=N.Gd,O=null;k(N);switch(J){case "region":O=m(N,n,M,K);break;case "road":O=f(N,n,p,M,d.F8,K);break;case "building":O=l(N,n,p,r,M,d.ZP,d.az)}a&&h.call(self.Au?self: this,O,J);O&&q.push(O)}delete d.Ue;d.Pc=q;e(null,{data:d})},Nva:function(a,b){u=this.Wh?this:g.Fc;for(var c=a.Pc,d=Math.pow(2,20-a.Od),f=[],h=0,k=c.length;h<k;h++)f.push(e(c[h],d,a.Lya));a.Pc=f;b(null,{data:a})},I7:function(a,b){u=this.Wh?this:g.Fc;for(var c=a.Rv,d=0;d<c.length;d+=1){for(var e=[],f=0;f<c[d].length;f+=1)e.push(c[d][f][0],c[d][f][1]);c[d]=e}var h,d=[],e=[];a:{for(var k={x:0,y:0},l,m=[],n=[],f=[],p=0;p<c.length;p+=1){var r=c[p].length;4<=r&&c[p][0]==c[p][r-2]&&c[p][1]==c[p][r-1]&&c[p].splice(r- 2);r=q(c[p],k,1);if(0==p){if(3>r[1].length)break a;l=r[1];h=r[0]}else 2<r[1].length&&(m.push(r[1]),n.push(r[2]),f.push(r[0]))}c=u.Wh(l,m,0);if(c.length)for(s(e,c),s(d,h),p=0;p<f.length;p+=1)s(d,f[p])}h=[new Float32Array(d),65535<d.length/2?new Uint32Array(e):new Uint16Array(e),{},[]];b(null,{data:h})},C7:function(a,b){u=this.Wh?this:g.Fc;var c=a.ob,d=a.ul,e=0,f=Math.PI/180*6,h=[],k=[];h.push(c[0],c[1]);for(var l=0;60>l;l++)h.push(c[0]+d*Math.cos(e),c[1]+d*Math.sin(e)),e+=f,0<l&&k.push(0,l,l+1),59== l&&k.push(0,l+1,1);b(null,{data:[h,k]})},PGa:function(){}}},g.Fc&&(g.Fc.xf(null,g.tF),g.Fc.xf(null,g.NL),g.Fc.xf(null,g.F$)));(function(){function a(){function a(b,c,d,e,f,k){var l=[0,0,0,0,0],m=d.slice(0,4).concat(l),r=[],q=Math.PI/180*6,B=void 0,G=void 0,B=d.slice(0,2),H=n(e),I=n(f),G=s.normalize((new h(H)).zf(new h(B))),P=s.normalize((new h(I)).zf(new h(B)));s.FS(G,k)?(B=s.zJ(G),G=s.zJ(P)):(B=s.zJ(P),G=s.zJ(G),k=[I,H],H=k[0],I=k[1],f=[f,e],e=f[0],f=f[1]);H=Math.ceil(Math.abs(G-B)/q);30<=H&&(H=60-H);for(k=0;k<H;k++)0===k?(m.push.apply(m,e.slice(0,4)),m.push.apply(m,l)):(I=(k*q+B)%(2*Math.PI),m.push.apply(m,d.slice(0,2).concat([0, 0])),m.push(1*Math.cos(I),1*Math.sin(I),0,0,0)),0<k&&r.push(0,k,k+1);m.push.apply(m,f.slice(0,4));m.push.apply(m,l);r.push(0,H,H+1);var L=b.length/p;b.push.apply(b,m);c.push.apply(c,r.map(function(a){return a+L}));return m.length/p}function c(c,d,e,f,k,l){function r(a,b,c,d,e){var f=void 0;a.$u(b)||s.O5(a,b)?f=b:c&&d&&e?f=a:c&&!d&&e?f=b:c||d||e?c||!d||e?(f=s.normalize(a.sk(b)),H=s.cos(f,a),f=f.ps(H)):f=a:f=b;return f}function q(a,b,c){if(void 0===c||!0===c)d.push(a[0],a[1]),d.push(-b.y,b.x,0,0),d.push(G, 0,0),l.push(a[2]);if(void 0===c||!1===c)d.push(a[0],a[1]),d.push(b.y,-b.x,0,0),d.push(G,0,0),l.push(a[2])}function D(a,b){var c=a*p,e=c+p,f=e+p,k=f+p,l=m;I?(f=n(d.slice(e,f)),c=n(d.slice(c,e)),c=s.normalize((new h(f)).zf(new h(c))),c=Math.abs(s.cos(b,c)/s.sin(b,c)*2),d[e+l]=-c,d[k+l]=c):(k=n(d.slice(c,e)),e=n(d.slice(e,f)),e=s.normalize((new h(k)).zf(new h(e))),e=Math.abs(s.cos(e,b)/s.sin(e,b)*2),d[c+l]=-e,d[f+l]=e)}var A=c.length,B=0,G=0,H=void 0,I=void 0;k&&(f="bevel");for(var P=0,L=c.length;P< L;P+=1){var M=c[P-1],K=c[P],F=c[P+1],Q=void 0;M&&(G+=s.Vd(K,M));if(0===P||P===A-1)0===P?(void 0===F&&(F=K),M=K,Q=s.normalize(new h(F[0]-K[0],F[1]-K[1])),e.push(0,1,2)):(F=K,Q=s.normalize(new h(K[0]-M[0],K[1]-M[1])),F=d.length/p+2,4===F?e.push(3,2,1):e.push(F-3-B,F-1,F-2)),q(K,Q);else{var N=s.normalize(new h(K[0]-M[0],K[1]-M[1])),J=s.normalize(new h(F[0]-K[0],F[1]-K[1])),O=s.normalize(N.multiply(-1).sk(J)),I=s.FS(O,N),H=s.cos(O,N);q(K,r(N,J,I,!0,!0),!0);q(K,r(N,J,I,!0,!1),!1);q(K,r(N,J,I,!1,!0),!0); q(K,r(N,J,I,!1,!1),!1);F=d.length/p;Q=F-4;M=Q+2;D(Q,N);s.O5(N,J)?e.push(Q,Q+1,Q-2-B):e.push(Q,Q-1-B,Q+1);"miter"==f&&(I?q(K,r(N,J,0,!0,!0),!0):q(K,r(N,J,0,!0,!0),!1),B=1);if("round"===f){J=N=B=void 0;I?(B=d.slice((Q+1)*p,(Q+2)*p),N=d.slice(Q*p,(Q+1)*p),J=d.slice(M*p,(M+1)*p)):(B=d.slice(Q*p,(Q+1)*p),N=d.slice((Q+1)*p,(Q+2)*p),J=d.slice((M+1)*p,(M+2)*p));B=a(d,e,B,N,J,O.multiply(-1));if(l)for(;0<B--;)l.push(K[2]);B=d.length/p-F}e.push(M,M+1,M+2+B);k||"bevel"!=f&&"miter"!=f||(I?e.push(M,Q,Q+1):e.push(M, M-1,M+1),"miter"==f&&(I?e.push(M+2,M-2,M):e.push(M+2,M+1,M-1)))}}}function d(a,b,c,d){function e(a,b){var c=void 0;if(a.$u(b))c=b;else{var c=s.normalize(a.sk(b)),d=s.cos(c,a);d>Math.sqrt(3)/2&&(d=Math.sqrt(3)/2);c=c.ps(d)}return c}function f(a,c,e){if(void 0===e||!0===e)b.push(a[0],a[1]),b.push(-c.y,c.x,0,0),b.push(n,0,0),d.push(a[2]);if(void 0===e||!1===e)b.push(a[0],a[1]),b.push(c.y,-c.x,0,0),b.push(n,0,0),d.push(a[2])}for(var k=a[0],l=a[a.length-1],n=0,r=void 0;k[0]===l[0]&&k[1]===l[1]&&k!==l;)a.pop(), l=a[a.length-1];a.push(k);a.push(a[1]);a.unshift(l);var q=a.length;a.forEach(function(a,d,k){var l=k[d-1];k=k[d+1];var u=void 0;l&&(n+=s.Vd(a,l));if(0===d||d===q-1)0===d?(u=s.normalize(new h(k[0]-a[0],k[1]-a[1])),c.push(0,1,2)):(u=s.normalize(new h(a[0]-l[0],a[1]-l[1])),d=b.length/p+2,c.push(d-3,d-1,d-2)),f(a,u);else{d=s.normalize(new h(a[0]-l[0],a[1]-l[1]));k=s.normalize(new h(k[0]-a[0],k[1]-a[1]));l=s.normalize(d.multiply(-1).sk(k));r=s.FS(l,d);f(a,e(d,k),!0);f(a,e(d,k),!1);f(a,e(d,k),!0);f(a,e(d, k),!1);a=b.length/p-4;k=a+2;var u=a*p,t=u+p,E=t+p,C=E+p;d=Math.abs(s.cos(d,l)/s.sin(d,l));l=m;r?(b[u+l]=d,b[t+l]=-d,b[E+l]=-d,b[C+l]=d):(b[u+l]=-d,b[t+l]=d,b[E+l]=d,b[C+l]=-d);c.push(a,a-1,a+1);c.push(k,k+1,k+2)}})}function e(c,d,e){function f(a,b){if(r)for(;0<a--;)r.push(b)}function m(a,b){A.push.apply(A,a.slice(0,k));A.push(b.x,b.y);A.push.apply(A,a.slice(l));A.push.apply(A,a)}var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"butt",r=arguments[4],q=c.length-1,D=d.length,A=[],B=[],G= [d.slice(0,p),d.slice(p,2*p)],H=[d.slice(D-p,D),d.slice(D-2*p,D-p)];"square"===n?(n=s.normalize((new h(c[0])).zf(new h(c[1]))),m(G[0],n),m(G[1],n),n=s.normalize((new h(c[q])).zf(new h(c[q-1]))),m(H[0],n),m(H[1],n),B.push(0,2,3,3,1,0),B.push(6,7,4,4,7,5),r&&(r.push(c[0][2]),r.push(c[q][2]))):"round"===n&&(n=G[0].slice(0,2).concat(0,0,0,0).concat(G[0].slice(l)),G=a(d,e,n,G[0],G[1],s.normalize((new h(c[0])).zf(new h(c[1])))),f(G,c[0][2]),n=H[0].slice(0,2).concat(0,0,0,0).concat(H[0].slice(l)),G=a(d, e,n,H[0],H[1],s.normalize((new h(c[q])).zf(new h(c[q-1])))),f(G,c[q][2]));d.push.apply(d,A);e.push.apply(e,B.map(function(a){return a+D/p}))}function f(a,b){var c=[];a.forEach(function(a){var d=a[0],e=a[1];a=a[2];b&&(d-=r[0],e-=r[1]);var f=c.length-1;if(-1===f)c.push([d,e,a]);else if(d!==c[f][0]||e!==c[f][1]||a!==c[f][2])if(1<=f){var k=s.normalize(new h(d-c[f][0],e-c[f][1])),l=s.normalize(new h(c[f][0]-c[f-1][0],c[f][1]-c[f-1][1]));k.$u(l)&&a===c[f][2]?c[f]=[d,e,a]:c.push([d,e,a])}else c.push([d, e,a])});return c}function h(a,b){"object"===typeof a&&a.length&&(b=a[1],a=a[0]);this.x=a;this.y=b}var k,l,m;function n(a){return[a[0]+q*a[2],a[1]+q*a[3]]}var p=9,q=1;k=4;l=6;m=7;var r=[215440491,106744817],s={normalize:function(a){var b=this.length(a);return a.ps(b)},Mf:function(a,b){return a.multiply(b)},js:function(a,b){return a.x*b.y-a.y*b.x},length:function(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))},sin:function(a,b){return this.js(a,b)/(this.length(a)*this.length(b))},cos:function(a, b){return this.Mf(a,b)/(this.length(a)*this.length(b))},FS:function(a,b){return 0<this.js(a,b)},Vd:function(a,b){return Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2))},O5:function(a,b){return a.multiply(-1).$u(b)},zJ:function(a){a=Math.atan2(a.y,a.x);0>=a&&(a+=2*Math.PI);return a}};h.prototype={sk:function(a){return new h(this.x+a.x,this.y+a.y)},zf:function(a){return new h(this.x-a.x,this.y-a.y)},multiply:function(a){return"number"===typeof a?new h(this.x*a,this.y*a):this.x*a.x+this.y*a.y}, ps:function(a){return new h(this.x/a,this.y/a)},$u:function(a){var b=a.y;return this.x===a.x&&this.y===b}};return{parse:function(a,b){var h=a.lineJoin,h=void 0===h?"bevel":h,k=a.lineCap,k=void 0===k?"butt":k,l=a.Tsa,l=void 0===l?!1:l,m=a.ez,n=void 0===m?!1:m,r=a.x7,m=a.Qya,s=void 0===m?!0:m,m=a.Jsa,q=[],B=[],G=f(a.Rv,void 0===r?!0:r),r=[];l?(d(G,q,B,r),h=q.length,[0,1,2,h/p-1,h/p-2].forEach(function(a){q[a*p+8]=-1})):(c(G,q,B,h,n,r),e(G,q,B,k,r));s&&(q=new Float32Array(q),B=65535<q.length/9?new Uint32Array(B): new Uint16Array(B));h=[q,B];m&&h.push(r);if(b)b(null,{data:h});else return h}}}g.LV=a();g.bAa=new g.KA(a,{lazy:"untilCall"})})();g.Km={Bsa:function(a,b,c){b=g.Km.createProgram(a,b,c);if(!b)return console.log("Failed to create program"),!1;a.useProgram(b);a.pa=b;return!0},createProgram:function(a,b,c){b=g.Km.w6(a,a.VERTEX_SHADER,b);c=g.Km.w6(a,a.FRAGMENT_SHADER,c);if(!b||!c)return null;var d=a.createProgram();if(!d)return null;a.attachShader(d,b);a.attachShader(d,c);a.bindAttribLocation(d,0,"a_Position");a.linkProgram(d);var e=a.getProgramParameter(d,a.LINK_STATUS);a.deleteShader(c);a.deleteShader(b);return e?d:(console.log("Failed to link program: "+ a.getProgramInfoLog(d)),a.deleteProgram(d),null)},w6:function(a,b,c){b=a.createShader(b);if(null===b)return console.log("unable to create shader"),null;a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log("Failed to compile shader: "+a.getShaderInfoLog(b)),a.deleteShader(b),null)},Ff:function(a,b,c,d){var e=d;"number"!==typeof d&&(e=d.toString());if(c.G1!==e){var f="uniform"+b;if(2===b.length)a[f].apply(a,[c].concat(d));else a[f](c,d);c.G1=e}},JC:function(a){a.length|| (a=[a]);for(var b=0,c=a.length;b<c;b++)delete a[b].G1}};g.M.Ye.qd=g.M.ce.Ui.extend({ka:[g.ax],A:function(a,b){this.ij=20;this.Ua=Math.min(2,window.devicePixelRatio||1);this.bp=1;arguments.callee.ma.apply(this,arguments);this.X("mapStyle",a.e);this.X("style",a.e);this.ll=this.Ei=!0;a.e.D.xq&&this.AC(a,b);this.ao=0;this.Xk={};this.yJ()||this.set("reload")},Jq:function(){this.oa.forEach(function(a){this.Lf(a)},this);this.ca.deleteProgram(this.ca.pa);g.F.G(this.xa,"webglcontextlost",this.zz,this);var a=this.ca.getExtension("WEBGL_lose_context");a&&a.loseContext(); this.xa=this.ca=null;for(var b in this)this.hasOwnProperty(b)&&g.a.hya(b,"u_")&&delete this[b];arguments.callee.ma.apply(this,arguments)},Lf:function(a){if(a.ra){if(a.ra.region&&a.ra.region.length){for(var b=a.ra.region.buffer,c=0,d=a.ra.region.length;c<d;c+=1){var e=a.ra.region[c];e[2]=null;e[4]=null}if(b){this.ca.deleteBuffer(b.Z);this.ca.deleteBuffer(b.cc);for(var f in b)b.hasOwnProperty(f)&&(b[f]=null);a.ra.region.buffer=null}delete a.ra.region}if(a.ra.road){for(c in a.ra.road)if(a.ra.road.hasOwnProperty(c))if("buffer"!== c)delete a.ra.road[c];else if(b=a.ra.road.buffer){if(b.Z&&b.Z.length)for(d=0,e=b.Z.length;d<e;d++)this.ca.deleteBuffer(b.Z[d]),this.ca.deleteBuffer(b.cc[d]);for(f in b)b.hasOwnProperty(f)&&(b[f]=null);a.ra.road.buffer=null}delete a.ra.road}if(a.ra.building){c=0;for(d=a.ra.building.length;c<d;c+=1)e=a.ra.building[c],this.ca.deleteBuffer(e[0]),e[0]=null,e[1]&&this.ca.deleteBuffer(e[1]),e[1]=null,this.ca.deleteBuffer(e[2]),e[2]=null,e[3]=null,e[4]=null,e[5]=null;delete a.ra.building}delete a.ra}},Fba:"precision highp float;attribute vec4 a_Position;attribute vec3 a_op,a_Next,a_Previous;attribute float a_Tags;uniform float u_xDelta,u_width;uniform lowp int u_type;uniform mat4 u_othMatrix,u_zoomMatrix,u_modelMatrix;uniform float u_scale;varying float v_distance;varying vec2 v_op;varying float v_TB;varying float v_cap;varying lowp float v_Tags;void main() {vec4 position=a_Position;position.x+=u_xDelta;if (u_type==0) {gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}else if(u_type>1) {v_op=a_op.xy;v_TB=a_op.z;vec3 curPos=position.xyz;v_distance=a_Next.z;float ddis=0.0;vec3 previous=vec3(a_Previous.x+u_xDelta,a_Previous.y,0);vec3 next=vec3(a_Next.x+u_xDelta,a_Next.y,0);vec4 up,dir;v_distance *= u_scale;if(previous==curPos){ dir= vec4(normalize(next-curPos).xy,0,0);}else if(next==curPos){dir= -vec4(normalize(previous-curPos).xy,0,0);}else {vec3 dir0=previous-curPos;vec3 dir1=next-curPos;vec3 dir2=normalize(dir0);vec3 dir3=normalize(dir1);float f0=dir0.x*dir1.y-dir1.x*dir0.y;dir = vec4(0); v_cap=1.0;if(f0==0.0){up = vec4(dir3.y,-dir3.x,0,0); }else{vec3 dir4=normalize(dir2+dir3);float sinA=length(cross(dir4,dir2));float cosA=dot(dir4,dir2);if(sinA<0.5){sinA=0.5;}up= vec4(dir4,0)/sinA;ddis=abs(length(up)*cosA*u_width*0.5);if(f0<0.0){up=-up;ddis=-ddis;}v_distance += v_TB*a_Previous.z*ddis;}}if(previous==curPos||next==curPos){ up = vec4(dir.y,-dir.x,0,0); if(u_type==4){v_cap=sqrt(v_TB*v_TB+a_Previous.z*a_Previous.z);}else if(u_type==3){v_cap=1.0;}else{dir = vec4(0);}}vec4 pos=u_zoomMatrix*u_modelMatrix*position;pos=pos+(up*v_TB-dir*a_Previous.z)*u_width*0.5;gl_Position=u_othMatrix*pos;}else if (u_type==1) {v_Tags=a_Tags;gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}}", paa:"precision lowp float;uniform vec4 u_FragColor,u_FragColor2;varying lowp float v_distance,v_TB;varying vec2 v_op;varying lowp float v_Tags;varying float v_cap;uniform lowp int u_type;uniform int u_isDash,u_onlyBorder;uniform vec4 u_dash;void main() {vec4 color=u_FragColor;if (u_type==0) {}else if(u_type>1) {if(v_op.x<-0.2||v_op.x>256.2||v_op.y<-0.2||v_op.y>256.2){discard;}if(v_cap>1.0){discard;}if(u_isDash==1){float all = u_dash[0] + u_dash[1] + u_dash[2] + u_dash[3];float off = mod(v_distance - u_dash[0], all);if(off> u_dash[0]&&off<=(u_dash[0]+u_dash[1])||off>(all-u_dash[3])){discard;}}if(u_onlyBorder==1&&v_TB<=0.7&&v_TB>=-0.7){discard;}}else if(u_type==1) {color=v_Tags==3.0?u_FragColor2:vec4((u_FragColor+(u_FragColor2-u_FragColor)*v_Tags/3.0).xyzw);}gl_FragColor=color;}", reloadChanged:function(){this.g&&(this.g.Ra=!1);this.oa.clear();this.xa&&this.xa.parentNode&&this.xa.parentNode.removeChild(this.xa);this.set("display")},Bz:function(a){if(this.g&&a.PS===this.g.mc)for(var b=0,c=a.Pc.length;b<c;b+=1)this.eE(a.Pc[b],a.Gv,a.Sq,a.ba)},cU:function(a,b){for(var c=this.ca,d=a.buffer,e=0,f=a.length;e<f;e+=1){var h=a[e];this.e.Dm&&h[3]&&!this.e.Dd&&(h[2]=this.J.zs(h[2],h[3],!1,b),d.Xe[e][0]=h[2])}d.Z=this.Ad(c.ARRAY_BUFFER,d.Z);d.cc=this.Ad(c.ELEMENT_ARRAY_BUFFER,d.cc)},zU:function(a, b){for(var c=this.ca,d=a.buffer,e=0,f=a.buffer.Z.length;e<f;e++)d.Z[e]=this.Ad(c.ARRAY_BUFFER,d.Z[e]),d.cc[e]=this.Ad(c.ELEMENT_ARRAY_BUFFER,d.cc[e]);if(this.e.Dm&&!this.e.Dd){var c=d.hash,d=null,h;for(h in c)if(c.hasOwnProperty(h))for(e=0,f=a[h].length;e<f;e++)d=a[h][e],d[10]&&(d[1]=this.J.km(d[1],d[10],1,!1,b),d[4]=this.J.km(d[4],d[10],0,!1,b))}},$P:function(a,b){for(var c=0,d=a.length;c<d;c+=1){var e=a[c];e.VD=e[0].length/3;e[0]=this.Ad(this.ca.ARRAY_BUFFER,e[0]);e.$J=e[1].length/3;e[1]=this.Ad(this.ca.ARRAY_BUFFER, e[1]);e.WD=e[2].length/3;e[2]=this.Ad(this.ca.ARRAY_BUFFER,e[2]);if(this.e.Dm&&e[3][2]&&!this.e.Dd){var f=this.J.Oy(e[3][0],e[3][1],e[3][2],!1,b);e[3][0]=f[0];e[3][1]=f[1]}}},Ad:function(a,b){if(b.length){var c=this.ca,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b,c.STATIC_DRAW);return d}},eE:function(a){var b=a.Gd,c=this.oa.get(a.Pi);if(c){var d=a.Ig.z;c.ra[b]=a.Oa;"region"===b?this.cU(a.Oa,d):"road"===b?this.zU(a.Oa,d):"building"===b&&(this.$P(a.Oa,d),a.Cn&&a.Cn.length&&!c.qe&&(c.qe={}, c.qe.uf=a.Cn,g.Mj&&g.Mj.r("vecTileParsed.buildings",{tp:c})));b===this.g.ha[this.g.ha.length-1]&&(c.Ba=!0,this.set("display"))}},Bd:function(){if(this.wg&&!this.g.Ra){var a=this.g;a.Ra=!0;a.Ld?a.qa("renderComplete"):(a.Ld=!0,a.qa("complete"))}},pc:function(a,b){!window.oa&&this.oa&&(window.oa=this.oa);this.up=a.up;this.ip(a,b);this.Bd();a.xD||(a.wma=this.wg,this.Nz(a,b),this.Ls=this.nb,this.ze&&this.set("display",0))},vj:function(){return this.xa},zz:function(){g.M.Ye.qd.is+=1;this.xa&&g.F.G(this.xa, "webglcontextlost",this.zz,this);this.xa.parentNode&&this.xa.parentNode.removeChild(this.xa);if(1<g.M.Ye.qd.is)this.kK();else{var a=this.xa.className;this.xa=document.createElement("canvas");this.xa.className=a;this.yJ()}this.set("reload");new g.kb.Ab(g.o.Cc+"://webapi.amap.com/count?"+["type=glfail","c="+g.M.Ye.qd.is,"crd="+g.l.WR,"k="+g.o.key,"u="+g.o.Ao,"m="+(g.l.ba?1:0),"pf="+g.l.Fz,"dpr="+window.devicePixelRatio,"scale="+(g.l.BL||0),"detect="+g.l.ja].join("&"))},kK:function(){g.l.Nf=!1;this.g&& this.g.e.D&&(this.g.e.set("baseRender",g.l.Yp?"dv":"d"),this.g.e.D.bT(),this.g.M=null,this.g.S.ct(),this.g=null);this.xa=this.J=null},Zg:function(a){this.xa=document.createElement("canvas");this.xa.className=a||"amap-layer"},yJ:function(){if(1<g.M.Ye.qd.is)return this.kK(),!1;var a=this.ca=this.xa.getContext(g.l.D$,g.l.E$);if(a)g.F.h(this.xa,"webglcontextlost",this.zz,this);else return this.kK(),!1;g.Km.Bsa(a,this.Fba,this.paa);this.zV=a.getUniformLocation(a.pa,"u_xDelta");this.o$=a.getUniformLocation(a.pa, "u_othMatrix");this.s$=a.getUniformLocation(a.pa,"u_zoomMatrix");this.m$=a.getUniformLocation(a.pa,"u_modelMatrix");this.Sd=a.getAttribLocation(a.pa,"a_Position");this.hj=a.getAttribLocation(a.pa,"a_op");this.gj=a.getAttribLocation(a.pa,"a_Previous");this.Rg=a.getAttribLocation(a.pa,"a_Next");this.cy=a.getAttribLocation(a.pa,"a_Tags");a.enableVertexAttribArray(this.Sd);this.Kj=a.getUniformLocation(a.pa,"u_FragColor");this.gA=a.getUniformLocation(a.pa,"u_FragColor2");this.Ak=a.getUniformLocation(a.pa, "u_type");this.zw=a.getUniformLocation(a.pa,"u_width");this.pV=a.getUniformLocation(a.pa,"u_isDash");this.rV=a.getUniformLocation(a.pa,"u_onlyBorder");this.mV=a.getUniformLocation(a.pa,"u_dash");this.wV=a.getUniformLocation(a.pa,"u_scale");a.enable(a.BLEND);a.enable(a.CULL_FACE);a.cullFace(a.FRONT);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);a.clearColor(0,0,0,0);this.tT=this.CQ=this.ez=void 0;this.qA=0;return!0}, $v:function(a){var b=Math.pow(2,a.P.zoom-this.Df),c=a.P.nb.bb(this.Ls).nd(this.ym);this.transform={translate:this.transform[0].translate.add(c),scale:b,rotate:0};this.nb=a.P.nb},Nz:function(a,b){var c=this.RP(a,b),d=this.ca,e=this.J.Ee;"function"===typeof e&&e(a.P.zoom);d.clear(d.COLOR_BUFFER_BIT);var e=this.g.ja?this.Ua:this.bp,f=0,h=0;0!==a.P.rotation?(f=2*Math.floor(a.P.Ha.Ac.x)*e,h=2*Math.floor(a.P.Ha.Ac.y)*e):(f=a.size.width*e,h=a.size.height*e);f&&h&&(this.xa.width=f,this.xa.height=h,d.viewport(0, 0,this.xa.width,this.xa.height),this.dt.apply(this,c),this.Oe(a))},ar:256*Math.pow(2,20),NQ:function(a,b){g.Km.JC([this.Kj]);for(var c=this.J.be,d=0,e=b.length;d<e;d++){var f=b[d],h=f.qb?f.qb.ra:f.ra;if(!h)break;if((h=h.region)&&h.length){this.$r(f.cl*this.ar);f=h.buffer;a.bindBuffer(a.ARRAY_BUFFER,f.Z);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f.cc);for(var k=0,l=f.wp.length;k<l;k++){var m=f.Xe[k],n=m[0];(m=m[1])&&c&&(n=this.J.zs(n,m),h[k].xd=n);n&&(a.vertexAttribPointer(this.Sd,2,a.FLOAT,!1,8,0),a.uniform4f(this.Kj, n[0],n[1],n[2],n[3]),a.drawElements(a.TRIANGLES,f.wp[k][0],a.UNSIGNED_SHORT,f.wp[k][1]))}}}},OQ:function(a,b){var c=g.Km,d=this.g.ja?this.Ua:this.bp,e=this.J.be;c.JC([this.Kj,this.Ak,this.zw]);for(var f={},h=0,k=b.length;h<k;h++){var l=b[h];if(l=l.qb?l.qb.ra:l.ra)if(l=l.road){var l=l.buffer.hash,m;for(m in l)l.hasOwnProperty(m)&&(f[m]?f[m].push(h):f[m]=[h])}}for(var n in f)if(f.hasOwnProperty(n))for(h=f[n],k=0,m=h.length;k<m;k++){for(var l=b[h[k]],p=(l.qb?l.qb.ra:l.ra).road,q=p.buffer,r=q.hash[n], p=p[n],s=!1,u=0,v=p.length;u<v;u++){var w=p[u],t=w,x=r[u],y=t[4],E=t[12],C=this.JN(t)[1],D=t[0];t.Mg&&(D=t.Mg.Kg[0]);E&&e&&(y=this.J.km(y,E,0),w.xd=y,(w=this.J.nv(E))&&w.strokeWidth&&w.fillWidth?C=w.fillWidth+2*w.strokeWidth:w&&w.strokeWidth?C=D+2*w.strokeWidth:w&&w.fillWidth&&(C=w.fillWidth+C-D));if(y&&C){c.Ff(a,"1i",this.Ak,"square"===t[9]?3:"round"===t[9]?4:2);this.$r(l.cl*this.ar);if(0===u||s)a.bindBuffer(a.ARRAY_BUFFER,q.Z[x[0]]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,q.cc[x[0]]),s&&(s=!1);a.vertexAttribPointer(this.Sd, 2,a.FLOAT,!1,44,0);a.vertexAttribPointer(this.hj,3,a.FLOAT,!1,44,8);a.vertexAttribPointer(this.gj,3,a.FLOAT,!1,44,20);a.vertexAttribPointer(this.Rg,3,a.FLOAT,!1,44,32);c.Ff(a,"1f",this.zw,C*d);c.Ff(a,"4f",this.Kj,y);this.Zp(t[5]?1:0,t[5],0);a.drawElements(a.TRIANGLES,x[1],a.UNSIGNED_SHORT,x[2])}else 0===u&&1<p.length&&(s=!0)}s=!1;u=0;for(v=p.length;u<v;u++)if(t=w=p[u],x=r[u],y=t[1],D=t[12],C=t.Mg.Kg[0],D&&e&&(y=this.J.km(y,D,1),w.xd=y,(w=this.J.nv(D))&&w.fillWidth&&(C=w.fillWidth)),C&&y){c.Ff(a,"1i", this.Ak,"square"===t[8]?3:"round"===t[8]?4:2);this.$r(l.cl*this.ar);if(0===u||s)a.bindBuffer(a.ARRAY_BUFFER,q.Z[x[0]]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,q.cc[x[0]]),s&&(s=!1);a.vertexAttribPointer(this.Sd,2,a.FLOAT,!1,44,0);a.vertexAttribPointer(this.hj,3,a.FLOAT,!1,44,8);a.vertexAttribPointer(this.gj,3,a.FLOAT,!1,44,20);a.vertexAttribPointer(this.Rg,3,a.FLOAT,!1,44,32);c.Ff(a,"1f",this.zw,C*d);c.Ff(a,"4f",this.Kj,y);this.Zp(t[2]?1:0,t[2],t[6]?1:0);a.drawElements(a.TRIANGLES,x[1],a.UNSIGNED_SHORT, x[2])}else 0===u&&1<p.length&&(s=!0)}},ec:new g.H(215440491,106744817),dt:function(a,b,c){if(a.length){this.jd+=1;b=this.xa.width;c=this.xa.height;var d=this.ca;b=(new g.Dc).JU(-b/2,b/2,c/2,-c/2,0,1);c=Math.pow(2,this.zoom-this.ij)*(this.g.ja?this.Ua:this.bp);c=(new g.Dc).scale(c,c,1);var e=this.nb.nd(this.T/Math.pow(2,this.ij-this.zoom)).bb(this.ec),e=(new g.Dc).translate(-e.x,-e.y,0);d.uniformMatrix4fv(this.o$,!1,b.elements);d.uniformMatrix4fv(this.s$,!1,c.elements);d.uniformMatrix4fv(this.m$,!1, e.elements);d.uniform1f(this.wV,Math.pow(2,this.zoom-this.ij)*(this.g.ja?this.Ua:1));b=this.Pk=[];for(c=a.length-1;0<=c;c-=1){e=a[c];d.disableVertexAttribArray(this.hj);d.disableVertexAttribArray(this.gj);d.disableVertexAttribArray(this.Rg);d.disableVertexAttribArray(this.cy);this.Zp(0,void 0,void 0);d.uniform1i(this.Ak,0);this.$r(0);for(var f=0,h=e.length;f<h;f+=1){var k=e[f];if(k.qb?k.qb.ra:k.ra)k.jd=this.jd,b.push(k)}this.NQ(d,e);d.enableVertexAttribArray(this.hj);d.enableVertexAttribArray(this.gj); d.enableVertexAttribArray(this.Rg);d.disableVertexAttribArray(this.cy);e.length&&this.OQ(d,e);if(!(14>this.zoom))for(d.uniform1i(this.Ak,1),this.Zp(0,void 0,void 0),d.disableVertexAttribArray(this.hj),d.disableVertexAttribArray(this.gj),d.disableVertexAttribArray(this.Rg),d.enableVertexAttribArray(this.cy),f=0,h=e.length;f<h;f+=1)k=e[f],(k.qb?k.qb.ra:k.ra)&&(k.qb?k.qb.ra:k.ra).building&&this.FI(d,k)}}},FI:function(a,b){for(var c=this.J.be,d=(b.qb?b.qb.ra:b.ra).building,e=0;e<d.length;e+=1){var f= d[e],h=f[3][0],k=f[3][1];if(!f||!h)break;var l=f[3][2];l&&c&&(k=this.J.Oy(h,k,l),h=k[0],k=k[1],f.xd=h);if(h||k)h||(h=[0,0,0,0]),k||(k=[0,0,0,0]),a.uniform4f(this.gA,h[0],h[1],h[2],h[3]),a.uniform4f(this.Kj,k[0],k[1],k[2],k[3]),f.VD&&(a.bindBuffer(a.ARRAY_BUFFER,f[0]),a.vertexAttribPointer(this.Sd,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.cy,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,f.VD)),f.WD&&(a.bindBuffer(a.ARRAY_BUFFER,f[2]),a.vertexAttribPointer(this.Sd,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.cy, 1,a.FLOAT,!1,12,8),a.drawArrays(a.LINES,0,f.WD)),f.$J&&(a.bindBuffer(a.ARRAY_BUFFER,f[1]),a.vertexAttribPointer(this.Sd,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.cy,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,f.$J))}},Zp:function(a,b,c){var d=this.ca;a!==this.ez&&(d.uniform1i(this.pV,a),this.ez=a);a&&b!==this.CQ&&(this.CQ=b,d.uniform4f(this.mV,b[0],b[1],b[2]||0,b[3]||0));c!==this.tT&&(d.uniform1i(this.rV,c),this.tT=c)},$r:function(a){a!==this.qA&&(this.ca.uniform1f(this.zV,a),this.qA=a)},Oe:function(){this.transform= {translate:{x:this.xa.width/2,y:this.xa.height/2},scale:this.g.ja?1/this.Ua:1/this.bp,rotate:0}},AP:function(a,b,c){var d=null;if(a.length&&c)d=a[11].id+"-"+c,this.Xk[d]&&(a[0]=this.Xk[d][0],a[3]=this.Xk[d][3]);else return c=[],b&&b[0]&&(c=b[0].split("&")),(b=c[2])&&0===b.indexOf("railway")?(a[0]=1,a[3]=3):a[0]=parseInt(c[0])||0,c[3]&&c[4]&&3<c.length?(a[3]=a[0]+parseInt(c[3]),0===g.a.indexOf(c[5],"dash")&&(a[3]+=1)):a[3]=0,d&&void 0===this.Xk[d]&&(this.Xk[d]=[a[0],0,0,a[3]]),a},JN:function(a){var b= this.zoom;if(a.Mg&&a.Mg.zoom===b)return a.Mg.Kg;var c=a[11].browserStyle,d=a[11].levelStyleMapping;if(18<this.zoom){var e=this.Rk(a,18,c,d),c=Math.pow(2,this.zoom-18);a.Mg={zoom:b,Kg:[e[0]*c,e[3]*c]}}else if(g.a.N5(this.zoom))e=this.Rk(a,this.zoom,c,d),a.Mg={zoom:b,Kg:[e[0],e[3]]};else{var e=this.Rk(a,Math.floor(this.zoom),c,d),d=this.Rk(a,Math.ceil(this.zoom),c,d),f=function(a,b,c){var d;a&&b?d=a+c%1*(b-a):0===a&&b?d=Math.max(0,c%1-0.5)/0.5*b:0===a&&0===b?d=0:0!==a&&0===b&&(d=0);return g.a.xb(d, 3)},c=f(e[0],d[0],this.zoom),e=f(e[3],d[3],this.zoom);a.Mg={zoom:b,Kg:[c,e]}}return a.Mg.Kg},Rk:function(a,b,c,d){a=a[11].id+"-"+b;this.Xk[a]||(this.Xk[a]=this.AP([],c[d[b]]));return this.Xk[a]}});g.M.Ye.qd.is=0;(function(){if(g.Fc&&!g.Fc.xS){var a=g.a.oD({Ue:"anole",Au:"addTransferList"});g.Fc.xS=function(){var b="\\n      let handlers = {}\\n      let transferList = []\\n      let _handlers = [ ("+g.F$+")(true) ]\\n\\n      for (let i = 0, l = _handlers.length; i < l; i++) {\\n        let _handlerObj = _handlers[i]\\n\\n        for (let methodName in _handlerObj) {\\n          if (_handlerObj.hasOwnProperty(methodName)) {\\n            handlers[methodName] = _handlerObj[methodName]    \\n          }\\n        }\\n      }\\n\\n      handlers.anole = "+ JSON.stringify(g.Ue)+";\\n\\n      handlers."+a.addTransferList+" = function(transferObjects) {\\n        transferList.push.apply(transferList, transferObjects)\\n      };\\n\\n      self.addEventListener(\'message\', function (e) {\\n        let data = e.data\\n\\n        // console.log(data.cmd, new Date().getTime() - data.ts)\\n\\n        if (data.cmd === \'ping\') {\\n          self.postMessage({\\n            ping: true,\\n            status: 200,\\n            ts: data.ts,\\n            _ts: new Date().getTime()\\n          })\\n\\n          return\\n        }\\n\\n        if (typeof handlers[data.cmd] === \'function\') {\\n\\n          data.args.push(function (err, result) {\\n            self.postMessage({\\n              err,\\n              result,\\n              taskId: data.taskId,\\n              parentTaskId: data.parentTaskId,\\n              ts: data.ts,\\n              _ts: new Date().getTime()\\n            }, transferList)\\n\\n            transferList = []\\n          })\\n\\n          if (handlers.anole) {\\n            data.args[0]."+ a.anole+" = handlers.anole\\n          }\\n        \\n          handlers[data.cmd].apply(handlers, data.args)\\n        }\\n      })\\n    ";if(b=g.a.createObjectURL(b))this.url=b,g.Fc.xf(null,{wna:b},function(){g.Fc.ssa()})}}})(); ');
_jsload_('sync', '(function(){if(g.o.Nc){var a=function(){var a=g.o.Nc.split("."),b=window;do if(b=b[a.shift()],!b)return null;while(a.length);return b||null},b=function(b){var c=a();if(c){if("function"!==typeof c)throw Error(g.o.Nc+" is not a function!");setTimeout(c,1)}else if(b)throw Error("Can not find callback: "+g.o.Nc+", try define it before load JsApi!");};document.body&&a()?b():setTimeout(function(){b(!0)},300)}var c=(new Date).getTime(),c=["s=rsv3&product=JsInit&key="+g.o.key,"t="+c];c.push("resolution="+ window.screen.width+"*"+window.screen.height);c.push("mob="+(g.l.ba?1:0));c.push("vt="+(g.l.Yp?1:0));c.push("dpr="+window.devicePixelRatio);c.push("scale="+g.l.BL||0);c.push("detect="+g.l.ja);g.o.Xa&&c.push("jscode="+g.o.Xa);c=g.o.fd+"/v3/log/init?"+c.join("&");new g.kb.Ab(c,{callback:"callback"})})(); ')
_jsload_('rbush', '(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.Yb=a():"function"===typeof define&&define.hma?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).TT=a()})(function(){return function b(c,d,e){function f(k,m){if(!d[k]){if(!c[k]){var n="function"==typeof require&&require;if(!m&&n)return n(k,!0);if(h)return h(k,!0);n=Error("Cannot find module \'"+k+"\'");n.code="MODULE_NOT_FOUND";throw n;}n=d[k]={Yb:{}};c[k][0].call(n.Yb, function(b){var d=c[k][1][b];return f(d?d:b)},n,n.Yb,b,c,d,e)}return d[k].Yb}for(var h="function"==typeof require&&require,k=0;k<e.length;k++)f(e[k]);return f}({1:[function(b,c){function d(b,c){if(!(this instanceof d))return new d(b,c);this.qO=Math.max(4,b||9);this.i_=Math.max(2,Math.ceil(0.4*this.qO));c&&this.uga(c);this.clear()}function e(b,c){f(b,0,b.children.length,c,b)}function f(b,c,d,e,f){f||(f=r(null));f.Jc=Infinity;f.hc=Infinity;f.Ic=-Infinity;f.tc=-Infinity;for(var k;c<d;c++)k=b.children[c], h(f,b.We?e(k):k);return f}function h(b,c){b.Jc=Math.min(b.Jc,c.Jc);b.hc=Math.min(b.hc,c.hc);b.Ic=Math.max(b.Ic,c.Ic);b.tc=Math.max(b.tc,c.tc)}function k(b,c){return b.Jc-c.Jc}function l(b,c){return b.hc-c.hc}function m(b){return(b.Ic-b.Jc)*(b.tc-b.hc)}function n(b){return b.Ic-b.Jc+(b.tc-b.hc)}function p(b,c){return b.Jc<=c.Jc&&b.hc<=c.hc&&c.Ic<=b.Ic&&c.tc<=b.tc}function q(b,c){return c.Jc<=b.Ic&&c.hc<=b.tc&&c.Ic>=b.Jc&&c.tc>=b.hc}function r(b){return{children:b,height:1,We:!0,Jc:Infinity,hc:Infinity, Ic:-Infinity,tc:-Infinity}}function s(b,c,d,e,f){for(var h=[c,d],k;h.length;)d=h.pop(),c=h.pop(),d-c<=e||(k=c+Math.ceil((d-c)/e/2)*e,u(b,k,c,d,f),h.push(c,k,k,d))}c.Yb=d;g.TT=d;var u=b("quickselect");d.prototype={search:function(b){var c=this.data,d=[],e=this.zk;if(!q(b,c))return d;for(var f=[],h,k,l,m;c;){h=0;for(k=c.children.length;h<k;h++)l=c.children[h],m=c.We?e(l):l,q(b,m)&&(c.We?d.push(l):p(b,m)?this.tca(l,d):f.push(l));c=f.pop()}return d},M2:function(b){var c=this.data,d=this.zk;if(!q(b,c))return!1; for(var e=[],f,h,k,l;c;){f=0;for(h=c.children.length;f<h;f++)if(k=c.children[f],l=c.We?d(k):k,q(b,l)){if(c.We||p(b,l))return!0;e.push(k)}c=e.pop()}return!1},load:function(b){if(!b||!b.length)return this;if(b.length<this.i_){for(var c=0,d=b.length;c<d;c++)this.Is(b[c]);return this}b=this.yr(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this.i1(this.data,b):(this.data.height<b.height&&(c=this.data,this.data=b,b=c),this.vB(b,this.data.height-b.height-1,!0)):this.data= b;return this},Is:function(b){b&&this.vB(b,this.data.height-1);return this},clear:function(){this.data=r([]);return this},remove:function(b,c){if(!b)return this;for(var d=this.data,e=this.zk(b),f=[],h=[],k,l,m,n;d||f.length;){d||(d=f.pop(),l=f[f.length-1],k=h.pop(),n=!0);if(d.We){a:{m=b;var r=d.children,s=c;if(s){for(var q=0;q<r.length;q++)if(s(m,r[q])){m=q;break a}m=-1}else m=r.indexOf(m)}if(-1!==m){d.children.splice(m,1);f.push(d);this.Ida(f);break}}n||d.We||!p(d,e)?l?(k++,d=l.children[k],n=!1): d=null:(f.push(d),h.push(k),k=0,l=d,d=d.children[0])}return this},zk:function(b){return b},sQ:k,tQ:l,tca:function(b,c){for(var d=[];b;)b.We?c.push.apply(c,b.children):d.push.apply(d,b.children),b=d.pop();return c},yr:function(b,c,d,f){var h=d-c+1,k=this.qO,l;if(h<=k)return l=r(b.slice(c,d+1)),e(l,this.zk),l;f||(f=Math.ceil(Math.log(h)/Math.log(k)),k=Math.ceil(h/Math.pow(k,f-1)));l=r([]);l.We=!1;l.height=f;var h=Math.ceil(h/k),k=h*Math.ceil(Math.sqrt(k)),m,n,p;for(s(b,c,d,k,this.sQ);c<=d;c+=k)for(n= Math.min(c+k-1,d),s(b,c,n,h,this.tQ),m=c;m<=n;m+=h)p=Math.min(m+h-1,n),l.children.push(this.yr(b,m,p,f-1));e(l,this.zk);return l},Cda:function(b,c,d,e){for(var f,h,k,l,n,p,r,s;;){e.push(c);if(c.We||e.length-1===d)break;r=s=Infinity;f=0;for(h=c.children.length;f<h;f++)k=c.children[f],n=m(k),p=(Math.max(k.Ic,b.Ic)-Math.min(k.Jc,b.Jc))*(Math.max(k.tc,b.tc)-Math.min(k.hc,b.hc))-n,p<s?(s=p,r=n<r?n:r,l=k):p===s&&n<r&&(r=n,l=k);c=l||c.children[0]}return c},vB:function(b,c,d){var e=this.zk;d=d?b:e(b);var e= [],f=this.Cda(d,this.data,c,e);f.children.push(b);for(h(f,d);0<=c;)if(e[c].children.length>this.qO)this.rla(e,c),c--;else break;this.sca(d,e,c)},rla:function(b,c){var d=b[c],f=d.children.length,h=this.i_;this.Ada(d,h,f);f=this.Bda(d,h,f);f=r(d.children.splice(f,d.children.length-f));f.height=d.height;f.We=d.We;e(d,this.zk);e(f,this.zk);c?b[c-1].children.push(f):this.i1(d,f)},i1:function(b,c){this.data=r([b,c]);this.data.height=b.height+1;this.data.We=!1;e(this.data,this.zk)},Bda:function(b,c,d){var e, h,k,l,n,p,r;n=p=Infinity;for(e=c;e<=d-c;e++){h=f(b,0,e,this.zk);k=f(b,e,d,this.zk);var s=h,q=k;l=Math.max(s.Jc,q.Jc);var u=Math.max(s.hc,q.hc),P=Math.min(s.Ic,q.Ic),s=Math.min(s.tc,q.tc);l=Math.max(0,P-l)*Math.max(0,s-u);h=m(h)+m(k);l<n?(n=l,r=e,p=h<p?h:p):l===n&&h<p&&(p=h,r=e)}return r},Ada:function(b,c,d){var e=b.We?this.sQ:k,f=b.We?this.tQ:l,h=this.sX(b,c,d,e);c=this.sX(b,c,d,f);h<c&&b.children.sort(e)},sX:function(b,c,d,e){b.children.sort(e);e=this.zk;var k=f(b,0,c,e),l=f(b,d-c,d,e),m=n(k)+n(l), p,r;for(p=c;p<d-c;p++)r=b.children[p],h(k,b.We?e(r):r),m+=n(k);for(p=d-c-1;p>=c;p--)r=b.children[p],h(l,b.We?e(r):r),m+=n(l);return m},sca:function(b,c,d){for(;0<=d;d--)h(c[d],b)},Ida:function(b){for(var c=b.length-1,d;0<=c;c--)0===b[c].children.length?0<c?(d=b[c-1].children,d.splice(d.indexOf(b[c]),1)):this.clear():e(b[c],this.zk)},uga:function(b){var c=["return a"," - b",";"];this.sQ=new Function("a","b",c.join(b[0]));this.tQ=new Function("a","b",c.join(b[1]));this.zk=new Function("a","return {minX: a"+ b[0]+", minY: a"+b[1]+", maxX: a"+b[2]+", maxY: a"+b[3]+"};")}}},{quickselect:2}],2:[function(b,c){function d(b,c,k,l,m){for(;l>k;){if(600<l-k){var n=l-k+1,p=c-k+1,q=Math.log(n),r=0.5*Math.exp(2*q/3),s=0.5*Math.sqrt(q*r*(n-r)/n)*(0>p-n/2?-1:1),q=Math.max(k,Math.floor(c-p*r/n+s)),n=Math.min(l,Math.floor(c+(n-p)*r/n+s));d(b,c,q,n,m)}n=b[c];p=k;r=l;e(b,k,c);for(0<m(b[l],n)&&e(b,k,l);p<r;){e(b,p,r);p++;for(r--;0>m(b[p],n);)p++;for(;0<m(b[r],n);)r--}0===m(b[k],n)?e(b,k,r):(r++,e(b,r,l));r<=c&&(k=r+1); c<=r&&(l=r-1)}}function e(b,c,d){var e=b[c];b[c]=b[d];b[d]=e}c.Yb=d},{}]},{},[1])(1)}); ');
_jsload_('promise', '(function qd(b,c,d){function e(h,l){if(!c[h]){if(!b[h]){var m="function"==typeof require&&require;if(!l&&m)return m(h,!0);if(f)return f(h,!0);m=Error("Cannot find module \'"+h+"\'");m.code="MODULE_NOT_FOUND";throw m;}m=c[h]={Yb:{}};b[h][0].call(m.Yb,function(c){var d=b[h][1][c];return e(d?d:c)},m,m.Yb,qd,b,c,d)}return c[h].Yb}for(var f="function"==typeof require&&require,h=0;h<d.length;h++)e(d[h]);return e})({1:[function(a,b){function c(){}var d=b.Yb={};d.Y6=function(){if("undefined"!==typeof window&& window.setImmediate)return function(a){return window.setImmediate(a)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var a=[];window.addEventListener("message",function(b){var c=b.source;c!==window&&null!==c||"process-tick"!==b.data||(b.stopPropagation(),0<a.length&&a.shift()())},!0);return function(b){a.push(b);window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}();d.title="browser";d.aDa=!0;d.SDa={};d.RCa=[];d.h=c;d.addListener=c;d.Dj=c;d.G= c;d.removeListener=c;d.WGa=c;d.r=c;d.VCa=function(){throw Error("process.binding is not supported");};d.CDa=function(){return"/"};d.hDa=function(){throw Error("process.chdir is not supported");}},{}],2:[function(a,b){function c(a,b,c,d){this.Nua="function"===typeof a?a:null;this.Yua="function"===typeof b?b:null;this.vU=c;this.o8=d}function d(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){d||(d=!0,c(e))}}var e=a("asap");b.Yb=function(a){function b(a){null=== n?q.push(a):e(function(){var b=n?a.Nua:a.Yua;if(null===b)(n?a.vU:a.o8)(p);else{var c;try{c=b(p)}catch(d){a.o8(d);return}a.vU(c)}})}function k(a){try{if(a===r)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"===typeof a||"function"===typeof a)){var b=a.NE;if("function"===typeof b){d(b.bind(a),k,l);return}}n=!0;p=a;m()}catch(c){l(c)}}function l(a){n=!1;p=a;m()}function m(){for(var a=0,c=q.length;a<c;a++)b(q[a]);q=null}if("object"!==typeof this)throw new TypeError("Promises must be constructed via new"); if("function"!==typeof a)throw new TypeError("not a function");var n=null,p=null,q=[],r=this;this.then=function(a,d){return new r.constructor(function(e,f){b(new c(a,d,e,f))})};d(a,k,l)}},{asap:4}],3:[function(a,b){function c(a){this.then=function(b){return"function"!==typeof b?this:new d(function(c,d){e(function(){try{c(b(a))}catch(e){d(e)}})})}}var d=a("./core.js"),e=a("asap");b.Yb=d;c.prototype=d.prototype;var f=new c(!0),h=new c(!1),k=new c(null),l=new c(void 0),m=new c(0),n=new c("");d.resolve= function(a){if(a instanceof d)return a;if(null===a)return k;if(void 0===a)return l;if(!0===a)return f;if(!1===a)return h;if(0===a)return m;if(""===a)return n;if("object"===typeof a||"function"===typeof a)try{var b=a.NE;if("function"===typeof b)return new d(b.bind(a))}catch(e){return new d(function(a,b){b(e)})}return new c(a)};d.all=function(a){var b=Array.prototype.slice.call(a);return new d(function(a,c){function d(f,h){try{if(h&&("object"===typeof h||"function"===typeof h)){var k=h.NE;if("function"=== typeof k){k.call(h,function(a){d(f,a)},c);return}}b[f]=h;0===--e&&a(b)}catch(l){c(l)}}if(0===b.length)return a([]);for(var e=b.length,f=0;f<b.length;f++)d(f,b[f])})};d.reject=function(a){return new d(function(b,c){c(a)})};d.race=function(a){return new d(function(b,c){a.forEach(function(a){d.vU(a).NE(b,c)})})};d.prototype["catch"]=function(a){return this.then(null,a)}},{"./core.js":2,asap:4}],4:[function(a,b){(function(a){function d(){for(;e.next;){e=e.next;var a=e.aV;e.aV=void 0;var b=e.domain;b&& (e.domain=void 0,b.Fpa());try{a()}catch(c){if(l)throw b&&b.Ipa(),setTimeout(d,0),b&&b.Fpa(),c;setTimeout(function(){throw c;},0)}b&&b.Ipa()}h=!1}var e={aV:void 0,next:null},f=e,h=!1,k=void 0,l=!1;if("undefined"!==typeof a&&a.Y6)l=!0,k=function(){a.Y6(d)};else if("function"===typeof setImmediate)k="undefined"!==typeof window?setImmediate.bind(window,d):function(){setImmediate(d)};else if("undefined"!==typeof MessageChannel){var m=new MessageChannel;m.port1.onmessage=d;k=function(){m.port2.postMessage(0)}}else k= function(){setTimeout(d,0)};b.Yb=function(b){f=f.next={aV:b,domain:l&&a.domain,next:null};h||(h=!0,k())}}).call(this,a("_process"))},{_process:1}],5:[function(){"function"!==typeof window.Promise.prototype.Xu&&(window.Promise.prototype.Xu=function(a,b){(arguments.length?this.NE.apply(this,arguments):this).NE(null,function(a){setTimeout(function(){throw a;},0)})})},{}],6:[function(a){a("asap");var b;"undefined"===typeof window.Promise&&(b=a("./lib/core.js"),a("./lib/es6-extensions.js"));g.Zw=window.Promise|| b;window.Promise=g.Zw;a("./polyfill-done.js")},{"./lib/core.js":2,"./lib/es6-extensions.js":3,"./polyfill-done.js":5,asap:4}]},{},[6]); ');
_jsload_('AMap.LabelsLayer', 'z.q.SL=z.q.Zb.extend({w:{visible:!0,zIndex:20,opacity:1,zooms:[3,20],collision:!0,alwaysRender:!0,animation:!0},Uw:{id:void 0,Ed:1,name:"",position:[],Tp:0,opacity:1,offset:[0,0],Za:[3,20],XDa:{},ee:{type:"image",Ba:"",KC:[0,0],size:[36,36],anchor:[0,0],IP:0,Kc:!0},text:{Rn:"",direction:"left",offset:[0,0],Za:[3,20],style:{fontSize:12,fontFamily:"sans-serif",fontWeight:"normal",fillColor:"#000",borderColor:"transparent",padding:[0,0,0,0]}}},A:function(a,b){this.CLASS_NAME=this.CLASS_NAME||"AMap.LabelLayer"; this.vD=!1;g.a.vb(this,b);this.kf(this.w);this.$0=this.BZ();this.Qu=[]},BZ:function(){var a=this;return g.a.ND(function(b){var c=a.g;c?c.Sz(b):a.vD=b},100)},setLabels:function(a){this.$0(a)},cg:function(a){this.get("map")||this.set("map",a.D,!0);this.g=new g.q.sr(this,a);this.vD&&(a=this.vD,this.vD=null,this.g.Sz(a));a=this.Qu;if(a.length){for(var b=0;b<a.length;b++)this.on.apply(this,a[b]);this.Qu=[]}return this.g},clear:function(){this.g&&this.g.clear()},destroy:function(){this.g&&this.g.ak();this.g= null},on:function(a){this.g?(this.Dh(arguments),this.g.b2(a)):this.Qu.push(arguments)},off:function(a){this.g&&this.g.t$(a)}});window.AMap.LabelLayer=z.q.SL;function se(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.iqa(a)} g.Pj={add:function(){for(var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=[],d=0;d<a.length;d++)c.push(a[d]+b[d]);return c},zf:function(){for(var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=[],d=0;d<a.length;d++)c.push(a[d]-b[d]);return c},multiply:function(){for(var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b=arguments[1],c=[], d=0;d<a.length;d++)c.push(a[d]*b);return c},ps:function(){for(var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b=arguments[1],c=[],d=0;d<a.length;d++)c.push(a[d]/b);return c},ioa:function(){return this.multiply(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],-1)}}; g.q.sr=g.q.Zb.extend({bd:{Daa:"__id__",Raa:20,Qaa:{ce:"div",id:"_amap_custom_labellayer_div_",className:"amap-layer",style:{cssText:"position:absolute;top:0;left:0;",zIndex:"",width:"",height:"",visible:""}},cba:{top:3,right:3,bottom:3,left:3},Ft:{xr:"top",Zn:"right",Lm:"bottom",Kk:"left",ur:"middle",Dl:"center",U$:"alphabetic"},ML:{WV:"click",aM:"mouseover",$L:"mouseout",ZL:"mousemove",uW:"mousedown",vW:"mouseup",NW:"touchstart",MW:"touchend"},Uw:{Ed:1,Tp:0,opacity:1,offset:[0,0],Za:[3,20],ee:{type:"image", Ba:"http://visuallocal.amap.com/public/poi-marker.png",KC:[0,0],ty:[36,36],size:[36,36],anchor:"bottom-center",IP:0,Kc:!0,Za:[3,20]},text:{type:"billboard",direction:"top",offset:[0,0],Za:[3,20],style:{fontFamily:"sans-serif",fontSize:12,fontWeight:"normal",fillColor:"#000",KE:0,strokeColor:"#fcfcfc",borderColor:"transparent",padding:[3,3,3,3],backgroundColor:""}}},tA:{Eaa:{opacity:0.2},fW:"fadeIn",oaa:"fadeOut",If:{qba:"start",jba:"running",XV:"complete"},SV:{yW:"opacity",bBa:"size"}},AW:3},A:function(a, b){arguments.callee.ma.apply(this,arguments);this.CLASS_NAME="AMap.LabelLayer";this.S=a;this.options=a.w||{};this.ZB();this.e=b;this.LN();this.X("display",b);this.b4=this.sc.bind(this);this.Xda();return this},bm:function(a){var b=this.bd;if(g.M.sr){var c=this.Ol(),d=c.Ua;return this.M=new g.M.sr(this,a,{width:c.width*d,height:c.height*d,cssText:b.Qaa.style.cssText})}},cm:function(a){if(g.Ea.bW)return this.M=new g.Ea.bW(this,a);var b=this;g.ub.Gg(["Map3D","webglLabelsLayer"],function(){b.set("display")})}, cra:function(){var a=arguments[1],b=arguments[2];if("text"===(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"icon")){var a=a.origin,c=b.padding,b=b.oh,d=void 0,e=void 0,f=c.offsetX,h=c.offsetY,k=c.Jm,c=c.uh;this.xB()?(d=b[0],e=b[1]):(d=a[0],e=a[1]);return{x:d+f,y:e+h,width:k,height:c}}c=a.size;c=void 0===c?[]:c;a=a.oh;return{x:a[0],y:a[1],width:c[0]||0,height:c[1]||0}},Soa:function(a,b){return JSON.stringify(a)===JSON.stringify(b)},Jf:function(a){return"undefined"===typeof a},iJ:function(a){return this.jf[a].opts.rank|| 1},lra:function(a){return a.data.rank||1},pla:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=1);return b},VBa:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=a.oc,a=a.wc,d=c.R,c=c.Q,e=a.Q,f=parseFloat(b[0]),b=parseFloat(b[1]);return f>=a.R&&f<=d&&b>=e&&b<=c?!0:!1},Toa:function(a){for(var b=this.uv,c=this.jf||{},d={},e=[],f=[],h=0;h<a.length;h++){var k= a[h]||{};if(k.data&&k.data.position){var l=k.data.id;if(this.Jf(l))e.push(k);else if(b[l]){var m=b[l];this.Soa(c[m]||{},k)||(e.push(a[h]),a[h].AM=m,f.push(m))}else e.push(k);d[l]=1}}for(var n in c)c.hasOwnProperty(n)&&(a=c[n].data.id,!this.Jf(a)&&d[a]||f.push(n));return{add:e,remove:f}},Xda:function(){this.dh=new g.TT;this.BK=[]},c1:function(){var a=this.BK||[];this.dh&&(this.dh.clear(),this.dh.load(a))},jCa:function(a){var b=this.dh;b&&b.Is(a)},Cka:function(a){var b=this.dh;b&&b.remove(a,function(a, b){return a.id===b.id})},bZ:function(a,b){var c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},d=this.cra(b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c),e=d.x,f=d.y,h=this.bd.AW;return{id:a,Ed:c.Ed||1,Jc:e-h,hc:f-h,Ic:e+d.width+h,tc:f+d.height+h}},PY:function(a){var b=a.x,c=a.y;a="";b=this.dh.search({Jc:b-1,hc:c-1,Ic:b+1,tc:c+1});b.length&&(a=(b=this.Eea(b,this.rj))&&b.id||"");return a},Eea:function(){for(var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b= 1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=0;c<a.length;c++){var d=a[c];if(d.id&&b[d.id])return d}return null},Zqa:function(){return++this.eta},FJ:function(){return this.options.animation},pFa:function(a){return a&&this.FJ()?!!(this.zo.Ku||{})[a]:!1},jI:function(){for(var a=this.bd.tA.If,b=this.zo.Ku||{},c=Object.keys(b),d=c.length,e=0;e<d;e++){var f=c[e];if(b[f].status!==a.XV)break;delete this.zo.Ku[f]}return e===d},Spa:function(a){var b=this.bd.tA;a+=b.Eaa[b.SV.yW];1<=a&&(a=1); return a},YDa:function(){},vca:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=this.bd.tA,d=c.fW,e=c.oaa,f=c.If,c=c.SV;if(a)switch(a){case d:1==(b.opacity=this.Spa(b[c.yW]))?b.status=f.XV:b.status=f.jba}else this.Sr(d),this.Sr(e)},Sr:function(){var a=this.bd.tA.fW,b=this.zo.Ku,c;for(c in b)b.hasOwnProperty(c)&&this.vca(a,b[c])},et:function(){this.M&&this.M.et();this.zo={Ku:{}}},NHa:function(){},qR:function(a){return(this.zo.Ku||{})[a]||null},ZB:function(){this.eta=0; this.W2={};this.uv={};this.Vu={add:[],remove:[]};this.jf={};this.yq={};this.nk={};this.sva={};this.nqa={};this.G3=!1;this.M=null;this.ja=g.l.ja;this.rj={};this.ss={};this.event={ZJ:null,hT:null,ol:{gE:0,move:0,fE:0}};this.vz=null;this.et()},YB:function(){this.uv={};this.Vu={add:[],remove:[]};this.jf={};this.yq={};this.nk={}},Rka:function(){this.Vu={add:[],remove:[]}},qB:function(){return this.e||null},ne:function(){return{I:this.cJ(),rg:this.get("__source__"),Za:this.get("zooms"),visible:this.get("visible"), opacity:this.get("opacity"),Oc:this.zn()}},vfa:function(a){var b=a.Cd,c=a.hf,d=a.he,e=a.up,f=a.pt,h=a.UE,k=a.mL;a="dragging moving zooming zoomOuting touchDragging touchZooming".split(" ");b=[void 0===b?!1:b,void 0===c?!1:c,void 0===d?!1:d,void 0===e?!1:e,void 0===f?!1:f,void 0===h?!1:h,void 0===k?!1:k].indexOf(!0);return-1==b?!1:a[b]},LN:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=this.bd,c=this.qB().D,d=a.size,e=void 0===d?{}:d,d=a.Vf,f=a.P,h=void 0===f?{}:f,a=this.vfa(a), f=e.width,e=e.height;if("undefined"==typeof f||"undefined"==typeof e)f=c.getSize().width,e=c.getSize().height;var k=h.nb,l=h.Ha,h=h.zoom,b=b.Raa-h,m=Math.min(2,window.devicePixelRatio||1),m=this.ja?m:1;h||(h=c.getZoom());d||(d=c.getViewMode_());l&&l.Xd||(l="2D"==d?c.getCoordsBoundByZoom(h):c.getBounds().toBounds());this.X0({width:f,height:e,Vf:d,nb:k,zoom:h,scale:b,Ha:l,Ua:m,cz:a})},Ol:function(){return this.W2||{}},X0:function(a){a=a||{};g.extend(this.W2,a)},xB:function(){return"3D"===this.Ol().Vf}, Cb:function(a){var b=this.sva,c=a.join("-");b[c]||(a=this.qB().Cb(a),b[c]=[a.x,a.y]);return b[c]},tta:function(a){var b=this.nqa,c=a.join("-");b[c]||(a=this.qB().uta(a,20),b[c]=[a.x,a.y]);return b[c]},Uea:function(){var a=this.Ol().Ha,a=void 0===a?{}:a;return[a.kc.x,a.kc.y]},Xea:function(a,b,c){a=g.Pj.zf(b,a);return g.Pj.ps(a,Math.pow(2,c))},dha:function(a){var b=this.Ol().scale,c=this.Uea();a=this.Cb(a);return this.Xea(c,a,b)},eha:function(a){return this.tta(a)},LY:function(){var a=0<arguments.length&& void 0!==arguments[0]?arguments[0]:[],b=arguments[1],c=this.bd.Ft,d=a[0],a=a[1];if("[object Array]"===Object.prototype.toString.apply(b)){if(c=b[1],"number"==typeof b[0]&&"number"==typeof c)return g.Pj.ioa(b)}else if("string"==typeof b){var e=b.split("-"),b=e[0],e=e[1],f=0,h=0;b!=c.Dl||e||(b=c.ur,e=c.Dl);switch(e){case c.Kk:f=0;break;case c.Dl:f=-d/2;break;case c.Zn:f=-d;break;default:f=0}switch(b){case c.xr:h=0;break;case c.ur:h=-a/2;break;case c.Lm:h=-a;break;default:h=0}return[f,h]}return[0,0]}, nfa:function(a,b){if(!b||!b.image)return{size:[0,0],origin:a,anchorOffset:[0,0],coords:a};var c=this.bd.Uw.ee,d=b.size||this.p4(b.image),c=this.LY(d,b.anchor||c.anchor),e=g.Pj.add(a,c);return{size:d,origin:a,anchorOffset:c,coords:e}},Sea:function(a){return this.LY(a.size,"middle-center")},Ifa:function(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},e=this.bd.Ft,f=d.L$,f=void 0===f?0:f,h=d.Bn,h=void 0===h?!1:h,k=d.padding,l=this.Sea(a),m=a.anchorOffset,d=m[0],m=m[1],n=a.size, p=n[0],n=n[1],q=d-l[0],l=m-l[1],r=void 0,s=void 0,s=k[0],r=k[1],u=k[2],k=k[3];switch(c){case e.xr:h?(r=q,s=m-u-0.2*f):(r=d+k,s=m-u);break;case e.Zn:h?(r=d+p+k,s=l+4*f/5/2):(r=d-r,s=m-u);break;case e.Lm:h?(r=q,s=m+n+s+4*f/5):(r=d+k,s=m-u);break;case e.Kk:h?(r=d-r,s=l+4*f/5/2):(r=d+k,s=m-u);break;case e.ur:case e.Dl:h?(r=d+p/2,s=l+f/2):(r=d,s=m-u);break;default:r=d,s=m-u}return[r,s]},Ofa:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:12,b=1<arguments.length&&void 0!==arguments[1]? arguments[1]:1,c=this.bd.cba,d=c.top,c=c.bottom;return 1.25*a*b+(b-1)*(d+c)},Jfa:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=this.bd.Ft,d=b.hAa,e=b.L$,f=a[0],a=a[1],h=void 0,k=void 0;switch(this.gZ(b.direction,b.Bn).textAlign){case c.Kk:h=f;k=a-e;break;case c.Zn:h=f-d;k=a-e;break;case c.Dl:h=f-d/2,k=a-e}return{x:h,y:k,Jm:d,uh:e,mGa:f,nGa:a}},hZ:function(a,b,c){if(!b||!c.Rn)return{origin:a.origin,offset:[0, 0],coords:a.coords,start:{}};var d=this.bd.Uw.text,e=d.direction,f=d.offset,h=d.style,d=c.Bn;c=c.Rn;var e=b.direction||e,f=b.offset||f,k=b.style||h;b=k.fontSize||12;h=k.padding||h.padding;k=c.split("^").length;k=this.Ofa(b,k);d={hAa:this.M.measureText(c,b),L$:k,Bn:d,direction:e,padding:h};c=this.Ifa(a,a.size,e,d);c=g.Pj.add(c,f);e=this.xB()?g.Pj.add(g.Pj.zf(a.oh,a.anchorOffset),c):g.Pj.add(a.origin,c);return{origin:a.origin,offset:c,coords:e,start:this.Jfa(e,d)}},xfa:function(a,b,c){if(!b||!c.Rn)return{offsetX:0, offsetY:0,Jm:0,uh:0};var d=this.bd,e=d.Ft,f=a.start,h=a.offset;a=h[0];var h=h[1],k=f.Jm,f=f.uh,l=d.Uw.text,d=l.direction,l=l.style,d=b.direction||d,m=(b.style||l).padding||l.padding;b=m[0];var l=m[1],n=m[2],m=m[3],p=void 0,q=void 0;if(c.Bn)switch(d){case e.xr:p=a-k/2-m;q=h+n;break;case e.Zn:p=a-m;q=h+n;break;case e.Lm:p=a-k/2-m;q=h+n;break;case e.Kk:p=a-k-m;q=h+n;break;case e.ur:case e.Dl:p=a-k/2-m;q=h+n;break;default:p=a-k/2-m,q=h+n}else switch(d){case e.xr:p=a-m;q=h+n;break;case e.Zn:p=a-k-m;q= h+n;break;case e.Lm:p=a-m;q=h+n;break;case e.Kk:p=a-m;q=h+n;break;case e.ur:case e.Dl:p=a-k/2-m;q=h+n;break;default:p=a-k/2-m,q=h+n}return{offsetX:p,offsetY:q-4*f/5-b-n,Jm:k+m+l,uh:f+b+n}},WO:function(a,b,c){a=b.data;var d=b.opts||{};b=a.position;a=a.txt;var e=d.offset||[0,0],d=d.icon;c=c.text;var f=this.xB();b=f?this.eha(b):this.dha(b);var h=g.Pj.add(b,e),e=!!d,d=this.nfa(h,d);f&&this.options.collision?(f=this.qB().Zd(new (Function.prototype.bind.apply(g.H,[null].concat(se(d.origin))))),d.oh=g.Pj.add([f.x, f.y],d.anchorOffset)):d.oh=d.coords;f=this.hZ(d,c,{Rn:a,Bn:e});return{origin:b,ee:d,text:f,padding:this.xfa(f,c,{Rn:a,Bn:e})}},N4:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[3,20],b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[3,20],c=a[0],a=a[1],d=b[0],b=b[1];return[d<c?c:d,b>a?a:b]},Jpa:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1],c={};c.type=a.type||b.type;c.Ba=a.image||"";c.KC=a.clipOrigin||b.KC;c.ty=a.clipSize; c.size=a.size;c.anchor=a.anchor||b.anchor;c.IP=a.angel||b.IP;c.Kc=a.retina||b.Kc;c.Za=a.zooms||b.Za;return c},Kpa:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1],c={};c.type=a.type||b.type;c.direction=a.direction||b.direction;c.offset=a.offset||b.offset;c.Za=a.zooms||b.Za;b=b.style;a=a.style||{};c.style={};c.style.fontFamily=a.fontFamily||b.fontFamily;c.style.fontSize=a.fontSize||b.fontSize;c.style.fontWeight=a.fontWeight||b.fontWeight;c.style.fillColor=a.fillColor|| b.fillColor;var d=a.strokeColor,e=a.strokeWidth;c.style.KE=this.Jf(e)&&this.Jf(d)?b.KE:this.Jf(e)&&!this.Jf(d)?1:a.strokeWidth;c.style.strokeColor=a.strokeColor||b.strokeColor;c.style.borderColor=a.borderColor||b.borderColor;c.style.backgroundColor=a.backgroundColor;c.style.padding=a.padding||b.padding;return c},p4:function(a){a=(this.M.Hv||{})[a]||{};return[a.width||36,a.height||36]},ofa:function(a,b){var c=this.Jpa(a,this.bd.Uw.ee);c.Za=a.zooms||b.c6;var d=this.N4(b.Za,c.Za);c.Za=d;if(!c.size|| !c.ty){var e=this.p4(a.image),d=e[0],e=e[1];c.size||(c.size=[d,e]);c.ty||(c.ty=[d,e])}return c},gZ:function(a,b){var c=this.bd.Ft,d=void 0,e=void 0;if(b)switch(a){case c.Kk:d=c.Zn;break;case c.Zn:d=c.Kk;break;case c.xr:case c.Lm:d=c.Dl;e=c.Lm;break;default:d=c.Dl,e=c.Lm}else switch(a){case c.Kk:case c.Dl:case c.Zn:d=a;e=c.Lm;break;case c.xr:case c.Lm:case c.ur:d=c.Kk;e=a;break;default:d=c.Kk,e=a}return{textAlign:d,verticalAlign:e}},Kfa:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]: {},b=arguments[1],c=this.Kpa(a,this.bd.Uw.text);c.Za=a.zooms||b.c6;var a=this.gZ(c.direction,b.Bn),d=a.verticalAlign;c.style.textAlign=a.textAlign;c.style.verticalAlign=d;b=this.N4(b.Za,c.Za);c.Za=b;return c},z0:function(a,b){var c=b.data.txt||"",d=b.opts||{},e=d.icon,f=d.text,h={Tp:d.angle||0,opacity:this.Jf(d.opacity)?1:d.opacity,Za:this.options.zooms,c6:d.zooms},d=e?this.ofa(e,h):null;h.Bn=!!e;(e=c?this.Kfa(f,h):null)&&(e.Rn=c);return{ee:d,text:e}},y0:function(a,b,c){this.BK.push(this.bZ(a,b,c, 3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}))},yK:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},e=b[a],f=e.ee,h=e.text,e=e.padding;c.opts.icon&&this.y0(a,"icon",f,d);c.data.txt&&(d.padding=e,d.oh=g.Pj.zf(f.oh,f.anchorOffset),this.y0(a,"text",h,d))},x0:function(a,b){var c=this.bd.AW,d=this.jf||{},e=this.yq||{},f={},h=b?this.ss:{};if(!d||!e||g.a.vh(d)||g.a.vh(e))return{rj:{},ss:{}};var k={},l;for(l in a)if(a.hasOwnProperty(l)){var m= this.lra(d[l]);k[m]||(k[m]={});k[m][l]=d[l]}d=Object.keys(k).reverse();for(l=0;l<d.length;l++)for(var m=Object.keys(k[d[l]]).reverse(),n=0;n<m.length;n++){var p=m[n];if(!h[p]){var q=e[p],r=q.ee,r=void 0===r?{}:r,s=q.text,s=void 0===s?{}:s,q=q.padding,u=r.size,v=r.oh;if(u[0]&&u[1])for(u=this.dh.search({Jc:v[0]-c,hc:v[1]-c,Ic:v[0]+u[0]+c,tc:v[1]+u[1]+c}),v=0;v<u.length;v++){var w=u[v];w.id==p?f[w.id]=1:h[w.id]=1}v=s.start;u=v.Jm;v=v.uh;r={padding:q,oh:g.Pj.zf(r.oh,r.anchorOffset)};r=this.bZ(p,"text", s,r);if(u&&v)for(r=this.dh.search(r),s=0;s<r.length;s++)q=r[s],q.id==p?f[q.id]=1:h[q.id]=1}}return{rj:f,ss:h}},dka:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,b=this.jf||{},c=this.Vu,d=c.add,d=void 0===d?[]:d,c=c.remove,e=void 0===c?[]:c,c=this.yq||{},f=this.nk||{},h=this.Ol().cz,h=void 0===h?!1:h;this.BK=[];if(!a)for(var k=0;k<e.length;k++){var l=e[k];delete c[l];delete f[l]}var e=h?this.rj:c,m;for(m in e)e.hasOwnProperty(m)&&(h=b[m]||{},m&&f[m]&&Object.keys(h).length&& (c[m]=this.WO(m,h,f[m]),this.yK(m,c,h,{Ed:this.iJ(m)})));if(!a)for(a=0;a<d.length;a++)e=((d[a]||{}).data||{}).id,m=this.uv[e]||"",e&&m&&(e=b[m]||{},m&&(f[m]=this.z0(m,e),c[m]=this.WO(m,e,f[m]),this.yK(m,c,e,{Ed:this.iJ(m)})));this.yq=c;this.nk=f;this.c1()},eka:function(){var a=this.jf||{},b=this.Vu,c=b.add,c=void 0===c?[]:c,b=b.remove,d=void 0===b?[]:b,b=this.yq||{},e=this.nk||{},f=!0,h=this.Ol().cz,h=void 0===h?!1:h;this.BK=[];for(var k=0;k<d.length;k++){var l=d[k];this.Cka({id:l},l);delete b[l]; delete e[l]}var d=h?this.rj:b,m;for(m in d)if(d.hasOwnProperty(m)&&(h=a[m]||{},m&&e[m]&&Object.keys(h).length)){var l=h.data.txt,n=e[m].text,p=!!(h.opts||{}).icon,k=b[m].ee,q=this.options.collision?this.qB().Zd(new (Function.prototype.bind.apply(g.H,[null].concat(se(k.origin))))):k.coords;k.oh=g.Pj.add([q.x,q.y],k.anchorOffset);l=this.hZ(k,n,{Rn:l,Bn:p});b[m].ee=k;b[m].text=l;this.yK(m,b,h,{Ed:this.iJ(m)})}for(m=0;m<c.length;m++)h=(c[m]||{}).data.id,d=this.uv[h]||"",h&&d&&(h=a[d]||{},d&&(e[d]=this.z0(d, h),b[d]=this.WO(d,h,e[d]),h.data.txt&&(f=!1),this.yK(d,b,h,{Ed:this.iJ(d)})));this.b7=f;this.yq=b;this.nk=e;this.options.collision&&this.c1()},VO:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,b=this.Ol().cz,c=void 0===b?!1:b;this.xB()?this.eka():this.dka(a);var d=b=void 0;this.options.collision?c&&!g.a.vh(this.rj)?"moving"===c||"dragging"===c||"touchDragging"===c||"touchMoving"===c?(b=this.rj,d=this.ss):(c=this.x0(this.rj,c),b=c.rj,d=c.ss):(c=this.x0(this.jf,c),b=c.rj, d=c.ss):(b=this.pla(this.jf),d={});this.FJ()&&this.Exa(b);this.rj=b;this.ss=d;a||this.Rka()},Exa:function(a){var b=this.bd.tA,c=this.rj||{},d=this.zo.Ku||{},e;for(e in a)a.hasOwnProperty(e)&&(c[e]||(d[e]={id:e,status:b.If.qba,opacity:0}));this.zo.Ku=d},C2:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this.$y)return!0;if(Object.keys(this.jf||{}).length){if(!this.G3)return this.LN(a),this.G3=!0;var b=this.Ol(),c=b.nb,d=b.zoom,e=b.width,f=b.height,b=b.cz;this.LN(a);var a= this.Ol(),h=a.zoom,k=a.width,l=a.height,m=a.cz;if(c==a.nb&&d==h&&e==k&&f==l&&!(void 0!==m&&m||b))return!1}return!0},b1:function(a){var b=this.jf||{},c=this.uv,d=this.Toa(a);a=d.add;a=void 0===a?[]:a;d=d.remove;d=void 0===d?[]:d;this.M&&(a.length||d.length)&&this.M.YB();for(var e=0;e<d.length;e++){var f=d[e],h=((b[f]||{}).data||{}).id;this.Jf(h)||delete c[h];delete b[f]}for(e=0;e<a.length;e++)h=a[e],f=this.Jf(h.AM)?this.Zqa():h.AM,b[f]=g.a.Lna(h),delete h.AM,(h=h.data&&h.data.id)&&(c[h]=f);e=this.Vu; c=e.add;e=e.remove;e=void 0===e?[]:e;this.Vu.add=(void 0===c?[]:c).concat(a);this.Vu.remove=e.concat(d);this.jf=b},Sz:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];"[object Array]"!==Object.prototype.toString.apply(a)&&(a=[a]);this.vz=a;this.$y=!0;this.b7=!1;this.set("display")},vb:function(){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];this.options=Object.assign({},this.options,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});this.vz=a;this.$y= !0;this.jf={};this.uv={};this.set("display",1)},zR:function(a){var b=this.ss||{};return(a=(this.uv||{})[a])?!!b[a]:!1},xR:function(a,b,c){var d=this.jf||{};return c&&d[c]?{type:b,data:d[c],target:this.S,pixel:a.Db,lnglat:a.Of}:null},qa:function(a,b){if(!this.Ol().cz){var c=this.bd.ML,d=c.aM,e=c.$L,f=c.ZL,h=this.event.ol,k=h.move,c=h.gE,h=h.fE,l=this.xn(b),m=this.xR(b,a,l),n=this.event.ZJ;l&&m&&(a===d||a==f)?(l==n?k&&this.S.r(a,m):(n&&l!=n&&(f=this.xR(b,e,n),h&&this.S.r(e,f),this.event.hT=n),m.type= d,c&&this.S.r(d,m)),this.event.ZJ=l):a===e&&n||!l&&n?(d=this.xR(b,e,n),h&&this.S.r(e,d),this.event.ZJ=null):l&&m?a===f&&!k||a===d&&!c||a===e&&!h||(this.S.r(a,m),this.event.hT=n):(this.event.hT=null,this.event.ZJ=null)}},xn:function(a){var b=void 0,b=this.S.getMap(),c=this.S.get("visible");if(!b||!c)return null;if(this.xB())b=this.M&&this.M.xn(a);else{if(b=this.PY(a))if(c=(this.nk||{})[b]||{},a=c.ee&&c.ee.Za,c=c.text&&c.text.Za,a=a?a:c?c:[3,20],c=this.e.wi.P.zoom,c>=a[0]&&c<=a[1])return b;return null}return b}, sc:function(){},b2:function(a){var b=this.bd.ML,c=b.WV,d=b.aM,e=b.$L,f=b.ZL,h=b.uW,k=b.vW,l=b.NW,b=b.MW,m=this.e,n=this.b4;switch(a){case c:m.h(c,n);break;case h:m.h(h,n);break;case k:m.h(k,n);break;case d:case e:case f:this.event.ol.gE||this.event.ol.fE||this.event.ol.move||(m.h(d,n),m.h(e,n),m.h(f,n));a===d&&(this.event.ol.gE=1);a===e&&(this.event.ol.fE=1);a===f&&(this.event.ol.move=1);break;case l:m.h(l,n);break;case b:m.h(b,n)}},t$:function(a){var b=this.bd.ML,c=b.WV,d=b.aM,e=b.$L,f=b.ZL,h=b.uW, k=b.vW,l=b.NW,b=b.MW,m=this.e,n=this.b4;switch(a){case c:m.G(c,n);break;case h:m.G(h,n);break;case k:m.G(k,n);break;case d:case e:case f:a===d&&(this.event.ol.gE=0);a===e&&(this.event.ol.fE=0);a===f&&(this.event.ol.move=0);this.event.ol.gE||this.event.ol.fE||this.event.ol.move||(m.G(d,n),m.G(e,n),m.G(f,n));break;case l:m.G(l,n);break;case b:m.G(b,n)}},clear:function(){this.Sz([]);this.M&&this.M.clear();this.YB()},ak:function(){var a=this;this.clear();this.M&&this.M.ak();setTimeout(function(){a.ZB()}, 0)},warn:function(a){console&&console.warn&&console.warn(a)}});g.pba={JL:{HW:"_AMap_sdf_com_words",GA:"https://sdf.amap.com",IL:4,vF:4,Vc:{yba:"\\u7eb9\\u7406\\u52a0\\u8f7d\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5",EW:"\\u8d44\\u6e90\\u52a0\\u8f7d\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5"}},OHa:function(){},sd:function(a){var b=this.Nn||[],c=this.info||{};"number"!==typeof a&&(a=a.substr(0).charCodeAt(0));for(var d=0;d<b.length;d++){var e=b[d],f=e.split("-"),h=parseInt(f[1]||"");if(a>=parseInt(f[0]||"")&&a<=h&&(c[e]&&c[e].info||{})[a])return!0}return!1},yta:function(a,b,c){try{var d= new XMLHttpRequest;d.open("GET",a);d.responseType="blob";d.onerror=function(){c({code:0})};d.onload=function(){if(200===d.status){var a=new FileReader;a.onload=function(){c(a.result,b)};a.readAsDataURL(d.response)}else c({code:0})};d.send()}catch(e){c({code:0})}},Eta:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],c=b.length,d=this.info,e=0,f=this.JL.GA;return new g.Zw(function(h){for(var k=0;k<b.length;k++){var l=b[k];a.yta(f+l.url,l.Nn,function(b,f){e++;b&&(!d[f]&& (d[f]={}),d[f].Tva=b,a.info=d);e===c&&h()})}})},Gta:function(a){var b=this,c=a.length,d=this.info,e=0,f=this.JL,h=f.GA,k=f.HW;return new g.Zw(function(f,m){function n(n){n=a[n];var p=n.url,s=n.Nn;localStorage.removeItem(k);g.a.GP({url:h+p,dataType:"json",YU:function(a){e++;a&&(!d[s]&&(d[s]={}),d[s].info=a,b.info=d);e===c&&f()},error:function(){m()}})}for(var p=0;p<a.length;p++)n(p)})},Bra:function(a,b){var c=this,d=a.range||[],e=a.urlPrefix||"",f=[],h=[];this.Nn=d;for(var k=0;k<d.length;k++){var l= d[k],m=e+l,n=m+".json";f.push({Nn:l,url:m+".v1.png"});h.push({Nn:l,url:n})}d=this.Eta(f);h=this.Gta(h);g.Zw.all([d,h]).then(function(){b&&b(c.info)},function(){b&&b(null)})},getData:function(a){g.a.vh(this.info)?this.pra(a):a&&a(this.info)},pra:function(a){var b=this;g.a.GP({url:this.JL.GA+"/getcommonwords",dataType:"json",YU:function(c){1==c.code&&b.Bra(c.data,a)},error:function(){}})},ak:function(){},Dg:function(){var a=null;this.Nn=[];this.info={};a&&(a=JSON.parse(a),this.Nn=Object.keys(a),this.info= a);this.info=a||{}}};g.M.sr=g.M.Zb.extend({A:function(a,b,c){arguments.callee.ma.apply(this,arguments);this.mc=g.a.zb(this);var d=this.rsa(c);this.canvas=d;this.QC=d.getContext("2d");this.Hv={};this.q=a;this.Oe();this.reset=!0;this.YR={};this.q.Ra=!0;this.et();return d},zG:function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=this.q.jf;if(d&&d[c]){var d=this.q.jf[c],e=d.data||{},d=(d.opts||{}).zIndex||e.rank||1;b[d]||(b[d]=[]);b[d].push(c)}}return b},drawImage:function(a,b,c,d){var e=this.ne().Ua,e=void 0=== e?1:e,f=this.QC,h=b.KC,k=b.size,l=void 0===k?[]:k;b=b.ty;k=void 0===b?[]:b;d=d.opacity;c=c.coords;b=l[0];var l=l[1],m=a.width||b,n=a.height||l,p=k[0],k=k[1],q=h[0],h=h[1];this.q.Jf(p)&&(p=b);this.q.Jf(k)&&(k=l);p>m&&(p=m);k>n&&(k=n);f.globalAlpha=void 0===d?1:d;f.drawImage(a,q,h,p,k,c[0]*e,c[1]*e,b*e,l*e)},oz:function(a){var b=this;return new g.Zw(function(c,d){if(b.Hv[a])c(null);else{var e=new Image;e.src=a;e.onload=function(){c(e)};e.onerror=function(){d(null)}}})},bD:function(a,b,c){var d=this.ne().Ua, d=void 0===d?1:d,e=this.QC,f=a.Rn;a=a.style;a=void 0===a?{}:a;b=b.coords;b=void 0===b?[]:b;var h=c.opacity,k=a.fontWeight,l=a.fontSize,m=a.fontFamily;c=a.fillColor;var n=a.strokeColor,p=a.KE,p=void 0===p?1:p,q=a.textAlign;a=a.THa;e.globalAlpha=void 0===h?1:h;e.font=k+" "+l*d+"px "+(void 0===m?"sans-serif":m);e.textAlign=void 0===q?"center":q;e.textBaseline=void 0===a?"Alphabetic":a;a=b[0];b=b[1];e.lineJoin="round";n&&p&&(e.strokeStyle=n,e.lineWidth=p,e.strokeText(f,a*d,b*d));e.fillStyle=c;e.fillText(f, a*d,b*d)},measureText:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:12,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"sans-serif",d=this.QC;return d?(d.font=b+"px "+c,d.measureText(a).width):0},fpa:function(a,b){var c=this.QC,d=this.ne().Ua,d=void 0===d?1:d,e=a.style.backgroundColor,f=b.padding,h=b.text.origin,k=f.Jm,l=f.uh,m=h[0]+f.offsetX,f=h[1]+f.offsetY;e&&(c.fillStyle=e,c.fillRect(m*d,f*d,k*d,l*d))}, JQ:function(){},rsa:function(a){var b=document.createElement("canvas");b.width=a.width;b.height=a.height;b.style=a.cssText;b.setAttribute("class","amap-labellayers");return b},ne:function(){return this.q.Ol()||{}},vta:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new g.Zw(function(c){var d=0,e=Object.keys(b).length,f;for(f in b)b.hasOwnProperty(f)&&function(){var h=((b[f]||{}).opts||{}).icon||{};if(h.image)a.oz(h.image).then(function(b){b&&(a.Hv[h.image]= {Ba:b,width:b.width,height:b.height});e===++d&&c()})["catch"](function(){a.q.warn("Fail to load "+h.Ba+"!");e===++d&&c()});else e===++d&&c()}()})},FC:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=b[1]||20;return a>=(b[0]||3)&&a<=c?!0:!1},display:function(){this.set("display",0)},pc:function(a){var b=this,c=this.q;c.$y&&(c.$y=!1,c.b1(c.vz),c.vz=[],this.vta(c.jf).then(function(){c.VO();b.YR=b.zG(c.rj,c.nk);b.display()})["catch"](function(a){console.log("e","   -- ",a)})); this.reset=!1;this.F2();var d=a.P.zoom;if(this.FC(d,this.q.options.Za)){var e=this.Hv||{},f=this.YR||{},h=c.C2(a);this.zm();h&&(Object.keys(f).length&&c.VO(!0),this.YR=f=this.zG(c.rj,c.nk));c.jI()||c.Sr();var h=c.yq||{},k=c.nk||{},l=c.jf||{},m;for(m in f)if(f.hasOwnProperty(m))for(var n=f[m]||[],p=0;p<n.length;p++){var q=n[p];if(q){var r=l[q]||{},s=h[q]||{},u=k[q]||{},v=(r.data||{}).txt,w=r.opts||{},r=(w.icon||{}).image,w=this.q.Jf(w.opacity)?1:w.opacity;c.FJ()&&(q=c.qR(q))&&(w*=q.opacity);r&&e[r]&& u.ee&&this.FC(d,u.ee&&u.ee.Za)&&(q=e[r],this.drawImage(q.Ba,u.ee,s.ee,{Ba:{width:q.width,height:q.height},opacity:w}));v&&u.text&&this.FC(d,u.text&&u.text.Za)&&(v={opacity:w},this.fpa(u.text,s,v),this.bD(u.text,s.text,v))}}c.jI()?c.et():this.display();this.Oe(a)}},vj:function(){return this.canvas},Oe:function(){var a=this.ne();this.transform={translate:{x:this.canvas.width/2,y:this.canvas.height/2},scale:1/a.Ua,rotate:0}},YB:function(){this.reset=!0},zm:function(){var a=this.canvas,b=this.ne(),c= b.width,d=b.height,b=b.Ua,b=void 0===b?1:b;a&&(a.width=c*b,a.height=d*b)},et:function(){},F2:function(){this.canvas.width=this.canvas.width},clear:function(){this.F2();this.Oe();this.reset=!0;this.et()},ak:function(){this.clear();this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.QC=null)},nq:function(a,b){var c=void 0,d=this.q,c=d.S.getMap(),e=d.S.get("visible");if(!c||!e)return null;c=c.Zd(new g.H(a.x,a.y));if(c=d.PY(c)){var f=(d.nk||{})[c]||{},e=f.ee&&f.ee.Za, f=f.text&&f.text.Za,e=e?e:f?f:[3,20],f=d.e.wi.P.zoom;f>=e[0]&&f<=e[1]?(c=(d.jf||{})[c])&&c.data&&c.data.id?(e=d.S.q4(c.data.id),e.vo=e,e.ZW=c,b([e],d)):b([],d):b([],d)}else b([],d)}}); ');
_jsload_('labelcanvas', 'g.M.canvas.qM=g.M.canvas.Qj.extend({A:function(a,b){arguments.callee.ma.apply(this,arguments);a.e.D.xq&&this.AC(a,b);this.Vo=!1;this.Vj=g.q.bx.Bi;this.Vj.Vf=this.e.D.get("viewMode");a.e.h("zoomend",this.dk,this);a.e.h("moveend",this.dk,this)}});g.l.eL&&!g.v2&&(g.v2=function(){function a(a,l,m,n){var p=a.Gd,q=a.Oa.slice(1),r=a.Ig,s=a.td,u=m?15:7,v,w=[];h=[];for(var t=[],x=0,y=q.length;x<y;x+=1){var E=q[x][0];v=q[x][1].split("&");var C=parseInt(v[1]);if(!s){var D="Microsoft YaHei",A=b(v[2]),B=null;C>=u&&(D="SimHei");"roadlabel"===p&&(D="Arial Narrow,Arial");v[3]&&(B=b(v[3]));E.font=D;E.K3=A;E.strokeColor=B;E.Sra=b(v[4]);E.rv=v[5]}v=v[0];l&&(C*=d);E.fontSize=Math.round(C);E.fg=v;for(C=0;C<E.length;C+=1){A=E[C];v=A[1];var G=e,D="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM", G=G||"v5",H=B=void 0;"v5"<G?(B=D.length,H=512):(B=27,D=D.substr(0,27),H=333);for(var I=G=void 0,P=void 0,L=void 0,M=void 0,I=[],P=NaN,L=0,M=v.length;L<M;L++)G=v[L],G=D.indexOf(G),isNaN(P)?P=G*B:(I.push(P+G-H),P=NaN);v=I;if(!(0>v[0]||256<=v[0]||0>v[1]||256<=v[1])){B=D=0;H=1;D=256*r.x;B=256*r.y;H=r.T;v={textBaseline:"top",textAlign:"left",za:[(D+v[0])*H,(B+v[1])*H],name:"aw"===A[0]?"\\u2191":A[0].replace("^",""),Ta:v,Ca:[],aa:[],visible:!0,xk:!0,Cm:q[x][4]};if("roadlabel"===p){v.Zc=q[x][3];v.Cm=q[x][4]; D=v;B=E;H=s;M=r;G=l;I=m;P=n;L=!1;D.Bj=!0;D.margin=0;D.z=M.z;D.zIndex=9E3;D.id="roadlabel_"+f(D);M="";if((M=B.fg)&&A[3]){D.Bv=!0;var K=void 0;D.Ca.push(P+"://vdata.amap.com/style_icon/icon-normal-"+(I||G?"big":"small")+".png");var M=parseInt(M)-1,P=Math.floor(M/10),M=M%10,F=K=0,L=0;G?(K=48,F=40,L=28):I?(K=F=40,L=28):(K=F=24,L=20);I=D.name.length*(G?16:10)+2;I=Math.max(G?48:24,I);K=[-I/2,-K/2-1,I,K,F*M,F*P,F,F];D.A2=L;D.te=7;D.aa.push(K);L=!0}I=void 0;H?A[4]&&(I=H.u,D.Ca.push(I),H=H.b[A[4][0]],D.te= B.fontSize,D.aa.push([-Math.floor(H[2]/2),-Math.floor(H[3]/2)+1,H[2],H[3],H[0],H[1],H[2],H[3]])):(D.textBaseline="middle",D.textAlign="center",M=B.strokeColor,L&&(B.fontSize=Math.min(18,B.fontSize)),D.A2=G?28:16,D.rc||(D.rc=[]),D.rc.push([D.name,B.font,L&&!G?9:B.fontSize,B.K3,M,0,0,L,[0,0,0,0]]),D.aa.push([0,0,0,0]));D.Wq=A[2]?"\\u2191"!==A[0]&&(15>A[2]%90||75<A[2]%90)?90*Math.floor((A[2]+15)/90):A[2]:0}else if("poilabel"===p){v.Cm=q[x][6];v.Ed=0>q[x][2]?0:q[x][2];q[x][3]?2E4<v.Ed?(20008<v.Ed?v.Ji= 4:20007<v.Ed?v.Ji=5:20004<v.Ed?v.Ji=7:20002<v.Ed&&(v.Ji=8),v.Ji=Math.min(q[x][3],v.Ji)):v.Ji=10===a.Ig.z?9:q[x][3]:v.Ji=3;v.Zc=q[x][4];v.Uu=q[x][5];D=v;B=E;H=s;G=l;I=m;F=n;D.mk=1;P=A[0].split("^");L=A[2];K=B.fg;M=!1;D.id=A[4]||"poilabel_"+f(D);D.margin=c;D.zIndex=9001;if(K&&A[3]){M=void 0;D.Ca.push(F+"://vdata.amap.com/style_icon/icon-"+("1"===B.rv?"biz-":"normal-")+(I||G?"big":"small")+".png");var K=parseInt(K)-1,M=Math.floor(K/10),F=K%10,Q=0,N=0;G?(Q=48,N=40):Q=I?N=40:N=24;M=[-Q/2,-Q/2,Q,Q,N*F, N*M,N,N];if(151===K||152===K||153===K)D.A2=G?20:10;2<=K&&5>=K&&(M[8]=!0);D.fg=K;D.rv=parseInt(B.rv,10);D.te=7;D.aa.push(M);M=!0}if(0<L.length)for(N=void 0,K=0;K<L.length;K+=1)if(H)A[6]&&(D.Ca.push(H.u),N=H.b[A[6][K]],D.te=B.fontSize,G&&(L[K][0]=Math.round(L[K][0]*d),L[K][1]=Math.round(L[K][2]*d)),F=L[K][0],Q=M?Math.min(L[K][2],N[2]):N[2],D.aa.push([F,L[K][1]-(G?4:2),Q,N[3],N[0],N[1],N[2],N[3]]));else{D.rc||(D.rc=[]);var N=P[K],F=L[K][0],J=L[K][1]+K,Q=L[K][2],O=L[K][3];G&&(F=Math.round(F*d),J=Math.round(J* d),Q=Math.round(Q*d),O=Math.round(O*d));J-=I?3:1;D.rc.push([N,B.font,B.fontSize,B.K3,B.strokeColor,0,0,B.Sra,[F,J,Q,O]]);D.aa.push([F,J,Q,O])}A[4]&&(D.Ys=A[4]);A[5]&&(D.Hs=A[5]);v.Hs&&t.push(v.Hs)}w.push(v)}}}a.Oa=w;t.length&&(a.Cn=t);return[a,h]}function b(a){if(!a)return"";for(var b=[],c=0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c,2),16));b.push((b.shift()/255).toFixed(2));return"rgba("+b.join(",")+")"}var c,d,e,f=function(){var a=0;return function(b){b._amap_label_id_||(a+=1,b._amap_label_id_= a);return b._amap_label_id_}}(),h=[];return{parseLabel:function(b,f){function h(a){var b=a.Oa;s&&b&&1<b.length&&b.slice(1).forEach(function(b){if(b&&null===b[1]){var c=b.length-1,d=s[b[c]];b[1]=d.browserStyle[d.levelStyleMapping[n]];"4"!==b[c].charAt(0)&&"roadlabel"===a.Gd&&(b[1]=b[1][1])}})}c="3D"==b.Vf?0:6>b.Gv?-5:3;e=b.df;var n=b.Gv,p=b.Sq;d=b.F8;var q=b.ba,r=b.iwa,s=null,u=[];void 0!==b.iy&&(s=b.Ue[b.iy].stylemaps);for(var v=0,w=b.Pc.length;v<w;v+=1){var t=b.Pc[v];h(t);t=a(t,p,q,r);u.push.apply(u, t[1])}delete b.Ue;f(null,{data:b,icons:u.length?u:null})},postStyle:function(){}}},g.Lk&&g.Lk.xf(null,g.v2,function(a){a||(g.Lk.Sza=!0)}));g.M.canvas.Qj.Ib({lpa:function(a,b,c){if(b.RS){var d=this.g.ja;a=g.l.pz&&g.l.CE?"800":"400";var e=this.Sk;e.textAlign=b.textAlign;e.textBaseline=b.textBaseline;var f=b.name,f=b.font,h=b.dr,k=c?c[0]:b.$z;c=c?c[1]:b.Zy;var l=[0,0,0,0];b.xd=k||c;e.font=a+" "+h+"px "+f;for(var m=0;m<b.RS.length;m+=1){f=b.name[m%b.name.length];a=this.mJ(b.RS[m]);var n=b.lta[m]%360*-Math.PI/180;if(0!==n){var p=Math.cos(n),q=Math.sin(n),r=a[0],s=a[1];e.transform(p,q,-q,p,(1-p)*r+q*s,(1-p)*s-q*r)}this.bD(a,l,f,k,c,h,!1,d); 0!==n&&e.setTransform(1,0,0,1,0,0)}b.te=h}},LQ:function(a,b,c){var d=b.Bj,e=this.g.ja,f=g.l.pz&&g.l.CE?"800":"400",h=this.Sk,k=b.Wq%360*-Math.PI/180;h.textAlign=b.textAlign;h.textBaseline=b.textBaseline;if(k){var l=Math.cos(k),m=Math.sin(k),n=a[0],p=a[1];h.transform(l,m,-m,l,(1-l)*n+m*p,(1-l)*p-m*n)}if(d){var q=b.rc[0],d=q[0],p=q[1],l=c&&c[6]?c[6]:q[2],m=c?c[0]:q[3],n=c?c[1]:q[4];c=q[8];b.xd=m||n;p=g.l&&(g.l.BJ||g.l.CJ)?\'sans-serif, BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, sans-serif\': \'sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, sans-serif\';h.font=f+" "+l+"px "+p;if(!b.QQ){l=parseInt(h.font);if(100<l||!l)l=parseInt(h.font.split(" ")[1]);f=h.measureText(d).width;b.aa[b.Ca.length]=[-f/2,-l/2,f,l]}this.bD(a,c,d,m,n,b.aa[b.Ca.length][2],!1,e);b.te=l}else for(var r=0;r<b.rc.length;r+=1){var q=b.rc[r],d=q[0],p=q[1],m=c?c[0]:q[3],n=c?c[1]:q[4],s=c?c[2]:q[7],l=b.fontSize||q[2], u=b.aa[b.Ca.length+r];b.jm&&(u=q[8]);b.xd=s||m||n;h.font=f+" "+l+"px "+p;this.bD(a,u,d,m,n,u[2],s,e);b.te=l}b.QQ=!0;0!==k&&h.setTransform(1,0,0,1,0,0)},Kra:function(a){return Math.min(Math.max(100*(a-this.Z1),400),500)+""},bD:function(a,b,c,d,e,f,h,k){var l=this.Sk,m=a[0]+b[0];a=a[1]+b[1];h&&(l.fillStyle!==h&&(l.fillStyle=h),l.fillRect(m-4,a-2,b[2]+8,b[3]+4));e&&(b=k?3:2,l.lineWidth!==b&&(l.lineWidth=b),l.strokeStyle!==e&&(l.strokeStyle=e),l.strokeText(c,m,a,f));d&&(l.fillStyle!==d&&(l.fillStyle= d),l.fillText(c,m,a,f))}}); ')
_jsload_('AMap.CustomLayer', 'z.q.El=z.q.Zb.extend({w:{visible:!0,opacity:1,zIndex:11,rejectMapMask:!1,zooms:[3,20],alwaysRender:!1},A:function(a,b){this.CLASS_NAME=this.CLASS_NAME||"AMap.CustomLayer";g.c.ya(this,b);this.hi=g.f.create("div",null,"amap-e");a&&(this.hi.appendChild(a),a.className="amap-custom");g.a.vb(this,b);this.kf(this.w)},setOpacity:function(a){g.c.add(this,"setOpacity");this.hi&&g.f.Yq(this.hi,a);this.set("opacity",a,!0)},getContainer:function(){g.c.add(this,"getContainer");return this.hi},show:function(){g.c.add(this, "show");this.set("visible",!0)},hide:function(){g.c.add(this,"hide");this.set("visible",!1)},setzIndex:function(a){g.c.add(this,"setzIndex");this.set("zIndex",a,!0);this.hi&&(this.hi.style.zIndex=a)},cg:function(a){this.get("map")||this.set("map",a.D,!0);return new g.q.El(this,a)}});window.AMap.CustomLayer=z.q.El; z.q.Rw=z.q.El.extend({A:function(a,b){this.CLASS_NAME=this.CLASS_NAME||"AMap.GLCustomLayer";arguments.callee.ma.apply(this,arguments)},setzIndex:function(a){g.c.add(this,"setzIndex");this.set("zIndex",a)},cg:function(a){this.get("map")||this.set("map",a.D,!0);return new g.q.Rw(this,a)},setMap:function(a){g.c.add(this,"setMap");var b=this.get("map");a?(b&&a!==b&&b.uk(this),"3D"===a.view.type&&this.set("map",a)):b&&(b.uk(this),this.set("map",null,!0),this.ri=!1,this.hg&&this.hg())}}); window.AMap.GLCustomLayer=z.q.Rw;g.q.El=g.q.Zb.extend({A:function(a,b){this.S=a;this.zj=!0;this.hx=g.a.zb(this);a&&this.bf("opacity visible zIndex zooms container alwaysRender".split(" "),a);this.e=b;this.X("display",b)},ne:function(){return{visible:this.get("visible"),zIndex:this.get("zIndex"),Za:this.get("zooms"),opacity:this.get("opacity"),K:this.get("container"),hy:this.get("alwaysRender")}},D4:function(){return this.S.render},bm:function(a){if(g.M.El)return new g.M.El(this,a)}}); g.q.Rw=g.q.El.extend({bm:function(){return null},cm:function(a){if(g.Ea.Rw)return new g.Ea.Rw(this,a)},ne:function(){return{visible:this.get("visible"),zIndex:this.get("zIndex"),Za:this.get("zooms"),opacity:this.get("opacity"),K:this.get("container"),hy:this.get("alwaysRender"),Oc:this.zn()}},zn:function(){if(this.e.Oc){if(this.S.get("rejectMapMask"))return!1;if(this.S.Esa){if(this.S.tg.get("rejectMapMask"))return!1;if(this.S.tg.options["3d"]&&0==this.S.tg.options["3d"].heightScale)return!0}}else return!1}});g.M.El=g.M.Zb.extend({vj:function(){return this.g.get("container")},pc:function(a,b){if(this.g){var c=a.P.nb;if(this.Na&&!this.g.S.Gw){if(this.Na===c&&this.Df===a.P.zoom&&!this.e.jt)return;if(!b.hy&&(a.hf||a.he)){if(!g.f.qg&&a.he){b.K.style.visibility="hidden";return}var c=Math.pow(2,a.P.zoom-this.Df),d=a.P.nb.bb(this.Na);d.x<-g.a.Fa/2&&(d.x+=g.a.Fa);d.x>g.a.Fa/2&&(d.x-=g.a.Fa);d=d.nd(this.ym);1!==c&&(b.K.style[g.f.qg]="scale3d("+c+","+c+",1)");b.K.style.top=-d.y*c+"px";b.K.style.left=-d.x*c+"px"; return}}(d=this.g.D4())&&d.call(this.g.S,a);this.g.Ra||(this.g.Ra=!0,g.a.Xc(function(){this.g&&(this.g.Ld?this.g.qa("renderComplete"):(this.g.Ld=!0,this.g.qa("complete")))},this));this.Na=c;this.ym=a.P.T;this.Df=a.P.zoom;b.K.style.zIndex=b.zIndex;b.K.style[g.f.qg]="";b.K.style.top="";b.K.style.left="";b.K.style.height="";b.K.style.visibility="";g.f.Yq(b.K,b.opacity)}}}); ');
_jsload_('cvector', 'g.M.canvas.Hl=g.M.Ui.extend({A:function(a,b){arguments.callee.ma.apply(this,arguments);var c=this;this.vZ=function(){c.g.om=!0;c.set("display",0)};this.Zg();this.g.X("feature",this,!0)},XHa:function(a,b){return g.I.$g(a,b.Pv)||g.I.$g(a,b.Aua)},OR:function(){return this.$a.$U},Zg:function(){this.xa=document.createElement("canvas");this.xa.className="amap-layer amap-vectors";this.Bb=this.xa.getContext("2d",{alpha:!0});this.lh=this.g.Kc?this.g.Ua:1;this.$a=new g.M.canvas.hd(this.xa,this.vZ,this.lh)}, TEa:function(a,b,c){var d=a.x;a=a.y;return[this.vT*d-b*this.Hg,this.vT*a-c*this.Hg,this.vT*(d+1)+b*this.Hg,this.vT*(a+1)+c*this.Hg]},jDa:function(){500<this.g.Nv.length&&this.oa.clear();if(!this.oa.vh()&&0!==this.g.Nv.length)for(var a in this.g.Nv)if(this.g.Nv.hasOwnProperty(a)){var b=this.g.Nv[a];if(b.W){var c=b.W.Md(),d=[];this.oa.forEach(function(a,b){g.I.$g(a[1],c)&&d.push(b)},this);for(b=0;b<d.length;b+=1)this.oa.remove(d[b])}}this.g.Nv=[]},pc:function(a,b){if(this.w8||this.Na!==a.P.nb||this.Na.zoom!== a.P.zoom||this.Na.rotation!==a.P.rotation||this.g.om||this.e.jt||this.e.kR){var c=this.P=a.P,d=this.T=c.T,e=this.g;this.zoom=c.zoom;this.ob=c.nb;this.Dq=a.T;this.rotation=c.rotation;var f=a.P.Ha;this.oe=c.oe;var h=this.lh;if(!this.Na||this.g.om||!a.hf&&!a.he||b.hy&&!a.ba){this.Na=this.ob;this.Na.zoom=this.zoom;this.Na.rotation=this.rotation;this.ym=this.T;this.g.om=!1;this.$a.lh=h;this.$a.T=a.P.T/h;this.$a.Hg=a.P.Hg/h;this.$a.Dq=a.T;this.$a.ge=[f.kc.x,f.kc.y];this.$a.ob=this.ob;c=this.xa;c.style.display= "none";c.width=Math.round(2*f.Ac.x)*h;c.height=Math.round(2*f.Ac.y)*h;this.Bb.clearRect(0,0,c.width,c.height);var k=this.g.rz||0,l=this.g.sz||0,h=Math.max(this.g.Bf,k/this.T)+l,k=Math.max(this.g.jg,k/this.T)+l,f=[f.kc.x,f.kc.y,f.Xd.x,f.Xd.y];f[0]-=h*d;f[1]-=k*d;f[2]+=h*d;f[3]+=k*d;h=e.yn(f);d=[[f[0],f[1]],[f[2],f[1]],[f[2],f[3]],[f[0],f[3]],[f[0],f[0]]];this.$a.Bb.uI=0;this.$a.Bb.JE=!1;if(this.g.S.Aj)e=this.g.get("style"),this.$a.u8(h,e)||(this.w8=!0);else{for(var m in h)h.hasOwnProperty(m)&&(h[m].get("visible")|| delete h[m]);e=e.XR(h);m=e.length;this.w8=!1;for(f=0;f<m;f+=1)this.$a.u8(e[f][0],null,d)}c.style.display="block";this.Oe(a)}else this.Oe(a,b,!0)}},Oe:function(){var a=Math.pow(2,this.zoom-this.Na.zoom),b=this.g.Kc?this.g.Ua:1;this.transform={translate:this.ob.bb(this.Na).nd(this.ym/b).add({x:this.xa.width/2,y:this.xa.height/2}),scale:a/b,rotate:0}},vj:function(){return this.xa}});g.M.canvas.hd=g.da.extend({A:function(a,b,c){if(this.xa=a)this.Bb=a.getContext("2d");this.RU=3;this.Rb=this.lh=c;this.Fy={};this.T2("white");this.Ca={};this.Xt=b},T2:function(a){if(!this.Fy[a]){var b=document.createElement("canvas"),c=24*this.Rb;b.width=c;b.height=c;var d=b.getContext("2d");d.strokeStyle=a;d.lineJoin="round";d.lineWidth=8*this.Rb;d.moveTo(-4,c-4);d.lineTo(c/2,6);d.lineTo(c+4,c-4);d.stroke();return this.Fy[a]=b}return this.Fy[a]},Ata:function(a){if(!this.Fy[a]){var b=this,c=document.createElement("img"); c.onload=function(){c.loaded=!0;b.Xt()};c.onerror=function(){c.loaded=!0};c.src=a;return this.Fy[a]=c}return this.Fy[a]},u8:function(a,b,c){var d=!0,e;for(e in a)if(a.hasOwnProperty(e)){var f=a[e],h=f.name.split("-")[0];"circle"===h?d=this.Jwa(f,b||f.style):"point"===h?d=this.x8(f,b):"polyline"===h?d=this.pU(f,b||f.style):"polygon"===h||"multipolygon"===h?d=this.nU(f,b||f.style,c):"text"===h&&this.aHa(f,b||f.style)}return d},Jwa:function(a,b){var c=this.Bb,d=b.strokeColor,e=b.strokeWeight,f=b.strokeOpacity, h=b.fillColor,k=b.fillOpacity,l=b.strokeStyle,m=b.strokeDasharray,n,p=2*Math.PI,q,r;c.setLineDash&&c.setLineDash([]);c.save();if(m)for(var m=m.slice(0),s=0;s<m.length;s+=1)m[s]*=this.Rb;h&&(c.fillStyle=h);d&&(e&&(c.lineWidth=e*this.Rb),c.strokeStyle=d);e=a.fc();e instanceof g.Aa.Ng&&(r=[e]);e=0;for(s=r.length;e<s;e+=1){c.beginPath();q=r[e].za;q=this.ig(q,q[0]);var u=0,u=a.Av?a.get("radius")*this.Rb:a.get("radius")/(this.Dq*Math.cos(Math.PI*a.get("center").Q/180))*this.Rb;c.arc(q[0],q[1],u,0,p,!0); c.closePath();h&&k!==n&&(n=c.globalAlpha=k);c.fill();d&&(f!==n&&(n=c.globalAlpha=f),"dashed"===l?c.setLineDash?(c.setLineDash(m),c.stroke()):c.Eoa(q[0],q[1],u,m):c.stroke())}c.restore();return!0},x8:function(a,b){b instanceof Array&&(b="number"===typeof a.ib.style&&b[a.ib.style]?b[a.ib.style]:b[0]);var c=this.Bb,d,e,f=0,h=0;d=this.Oo(b.url);if(!d)return!1;var k=b.size.width*this.Rb,l=b.size.height*this.Rb,f=b.anchor.x*this.Rb,h=b.anchor.y*this.Rb;e=a.fc();e=this.ig(e.za,e.za[0]);var m=b.rotation_; if(0!==m){var n=Math.cos(m),p=Math.sin(m),q=e[0],r=e[1];c.transform(n,p,-p,n,(1-n)*q+p*r,(1-n)*r-p*q)}c.drawImage(d,Math.round(e[0]-f),Math.round(e[1]-h),k,l);0!==m&&c.setTransform(1,0,0,1,0,0);return!0},rD:function(a,b,c){return[(b[0]-a[0])*c+a[0],(b[1]-a[1])*c+a[1]]},pU:function(a,b){var c=this.Bb,d,e,f,h,k,l,m,n,p;m=[NaN,NaN,0];var q=[NaN,NaN],r=[NaN,NaN];c.globalAlpha=b.strokeOpacity;d=b.strokeStyle;e=b.strokeDasharray;var s=b.dashOffset||0;s&&(s*=this.Rb);c.lineCap=b.lineCap||"butt";c.lineJoin= b.lineJoin||"round";c.setLineDash&&c.setLineDash([]);c.save();if(e){e=e.slice(0);for(var u=0;u<e.length;u+=1)e[u]*=this.Rb}c.beginPath();f=a.Lw||a.fc();f instanceof g.Aa.tr?h=[f]:f instanceof g.Aa.Ww&&(h=f.ke);(u=b.dirImg)?"CANVAS"!==u.tagName&&(u=this.Ata(u)):u=this.T2(b.dirColor);var v=b.strokeWeight/u.width*0.8,w=8*b.strokeWeight,t=b.showDir&&u&&u.width,x=[],y=this.XW||f.hv()[0];f=0;for(k=h.length;f<k;f+=1){l=h[f].za;var E=[],C=0;n=0;for(p=l.length;n<p;n+=1)if(m=l[n],m=this.ig(m,y),E.push(m),0=== n)r[0]=m[0],r[1]=m[1],c.moveTo(m[0],m[1]);else if(q[0]=m[0],q[1]=m[1],n===l.length-1||Math.abs(q[0]-r[0])>=this.RU||Math.abs(q[1]-r[1])>=this.RU){if(t){var D=Math.sqrt(Math.pow(q[0]-r[0],2)+Math.pow(q[1]-r[1],2));if(D+C>w){var A=0,A=r,B=q;if(B[0]===A[0])A=B[1]>A[1]?Math.PI:0;else if(B[1]===A[1])A=B[0]>A[0]?Math.PI/2:-Math.PI/2;else{var G=B[0]-A[0],B=B[1]-A[1],A=Math.atan(G/B);0<G&&0<B?A=Math.PI-A:0>G&&0>B?A=-A:0<G&&0>B?A=-A:0>G&&0<B&&(A=Math.PI-A)}for(G=w-C;G<D;)B=this.rD(r,q,G/D),0<B[0]&&B[0]<this.xa.width&& 0<B[1]&&B[1]<this.xa.height&&x.push(B[0],B[1],A),G+=w;C=(D-(w-C))%w}else C+=D}"dashed"!==d||c.setLineDash?c.lineTo(m[0],m[1]):c.DQ(r[0],r[1],m[0],m[1],e);r[0]=q[0];r[1]=q[1]}}"dashed"===d&&c.setLineDash&&(c.setLineDash(e),c.KFa=s);b.isOutline&&(c.strokeStyle=b.outlineColor,c.lineWidth=(b.strokeWeight+2*b.borderWeight)*this.Rb,c.stroke());b.strokeColor&&b.strokeWeight&&(c.strokeStyle=b.strokeColor,c.lineWidth=b.strokeWeight*this.Rb,c.stroke());c.restore();if(x.length)for(d=-u.width/2*v*this.Rb,h=u.width* v*this.Rb,e=0;e<x.length;e+=3)c.save(),c.translate(x[e],x[e+1]),c.rotate(x[e+2]),c.drawImage(u,d,d,h,h),c.restore();return!0},nU:function(a,b,c){var d=this.Bb,e=b.strokeColor,f=b.strokeWeight,h=b.strokeOpacity,k=b.fillColor,l=b.fillOpacity,m=b.strokeStyle,n=b.strokeDasharray,p,q,r,s,u,v,w,t;r=[NaN,NaN,0];var x=[NaN,NaN],y=[NaN,NaN];d.setLineDash&&d.setLineDash([]);d.save();if(n)for(n=n.slice(0),r=0;r<n.length;r+=1)n[r]*=this.Rb;e&&(d.strokeStyle=e,f&&(d.lineWidth=f*this.Rb),d.lineCap="butt",d.lineJoin= b.lineJoin||"miter");k&&(d.fillStyle=k);d.beginPath();this.nA={};b=0;a=a.Lw||a.fc();a instanceof g.Aa.Ec?q=[a]:a instanceof g.Aa.zp&&(q=a.ke);var E=this.XW||a.hv()[0];a=0;for(f=q.length;a<f;a+=1)if(r=q[a],s=r.Rf,u=s.length,0<u)for(var C=0;C<u;C+=1){var D;v=s[C].za;c&&2<v.length&&(r=E-this.ob.x,r>g.a.Fa/2?c=[[c[0][0]+g.a.Fa,c[0][1]],[c[1][0]+g.a.Fa,c[1][1]],[c[2][0]+g.a.Fa,c[2][1]],[c[3][0]+g.a.Fa,c[3][1]],[c[4][0]+g.a.Fa,c[4][1]]]:r<-g.a.Fa/2&&(c=[[c[0][0]-g.a.Fa,c[0][1]],[c[1][0]-g.a.Fa,c[1][1]], [c[2][0]-g.a.Fa,c[2][1]],[c[3][0]-g.a.Fa,c[3][1]],[c[4][0]-g.a.Fa,c[4][1]]]),v=g.yd.V7(v,c));this.nA[b]=[];w=0;for(t=v.length;w<t;w+=1)if(r=v[w],r=this.ig(r,E),this.nA[b].push(r),0===w)y[0]=NaN,y[1]=NaN,D=[r[0],r[1]],d.moveTo(r[0],r[1]);else if(x[0]=r[0],x[1]=r[1],x[0]!==y[0]||x[1]!==y[1])d.lineTo(r[0],r[1]),y[0]=x[0],y[1]=x[1];b+=1;D&&d.lineTo(D[0],D[1])}d.closePath();k&&(l!==p&&(p=d.globalAlpha=l),d.fill());if(e){h!==p&&(d.globalAlpha=h);if("dashed"===m)if(d.setLineDash)d.setLineDash(n);else{d.beginPath(); for(var A in this.nA)if(this.nA.hasOwnProperty(A))for(k=this.nA[A],l=0,m=k.length;l<m;l+=1)p=l===m-1?0:l+1,c=Math.round(k[l][0]),e=Math.round(k[l][1]),h=Math.round(k[p][0]),p=Math.round(k[p][1]),d.DQ(c,e,h,p,n)}d.stroke()}d.restore();return!0},Oo:function(a){var b=this.Ca[a];if("undefined"===typeof b)b=document.createElement("img"),b.src=a,this.Ca[a]=b,b.loaded=!1,g.F.Dj(b,"load",function(){b.loaded=!0;var a=document.createElement("canvas");a.width=b.naturalWidth;a.height=b.naturalHeight;a.getContext("2d").drawImage(b, 0,0);b.canvas=a;this.Xt&&this.Xt()},this);else if(b.loaded)return b.canvas||b},KEa:function(a){a=this.Oo(a);if(a.pattern)return a.pattern;if(a){var b=this.Bb.createPattern(a,"repeat");return a.pattern=b}return null},ig:function(a,b){var c=this.T,d=a[0];if(void 0!==b&&this.ob){var e=b-this.ob.x;e>g.a.Fa/2?d-=g.a.Fa:e<-g.a.Fa/2&&(d+=g.a.Fa)}d=(d-this.ge[0])/c;return[d,(a[1]-this.ge[1])/c]}}); ');
_cssload_('AMap.IndoorMap', '.amap-indoor-map .label-canvas{position:absolute;top:0;left:0}.amap-indoor-map .highlight-image-con *{pointer-events:none}.amap-indoormap-floorbar-control{position:absolute;margin:auto 0;bottom:165px;right:12px;width:35px;text-align:center;line-height:1.3em;overflow:hidden;padding:0 2px}.amap-indoormap-floorbar-control .panel-box{background-color:rgba(255,255,255,.9);border-radius:3px;border:1px solid #ccc}.amap-indoormap-floorbar-control .select-dock{position:absolute;top:0;left:0;width:100%;box-sizing:border-box;height:30px;border:solid #4196ff;border-width:0 2px;border-radius:2px;pointer-events:none;background:linear-gradient(to bottom,#f6f8f9 0,#e5ebee 50%,#d7dee3 51%,#f5f7f9 100%)}.amap-indoor-map .transition{transition:opacity .2s},.amap-indoormap-floorbar-control .transition{transition:top .2s,margin-top .2s}.amap-indoormap-floorbar-control .select-dock:after,.amap-indoormap-floorbar-control .select-dock:before{content:"";position:absolute;width:0;height:0;left:0;top:10px;border:solid transparent;border-width:4px;border-left-color:#4196ff}.amap-indoormap-floorbar-control .select-dock:after{right:0;left:auto;border-left-color:transparent;border-right-color:#4196ff}.amap-indoormap-floorbar-control.is-mobile{width:37px}.amap-indoormap-floorbar-control.is-mobile .floor-btn{height:35px;line-height:35px}.amap-indoormap-floorbar-control.is-mobile .select-dock{height:35px;top:36px}.amap-indoormap-floorbar-control.is-mobile .select-dock:after,.amap-indoormap-floorbar-control.is-mobile .select-dock:before{top:13px}.amap-indoormap-floorbar-control.is-mobile .floor-list-box{height:105px}.amap-indoormap-floorbar-control .floor-list-item .floor-btn{color:#555;font-family:"Times New Roman",sans-serif,"Microsoft Yahei";font-size:16px}.amap-indoormap-floorbar-control .floor-list-item.selected .floor-btn{color:#000}.amap-indoormap-floorbar-control .floor-btn{height:28px;line-height:28px;overflow:hidden;cursor:pointer;position:relative;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.amap-indoormap-floorbar-control .floor-btn:hover{background-color:rgba(221,221,221,.4)}.amap-indoormap-floorbar-control .floor-minus,.amap-indoormap-floorbar-control .floor-plus{position:relative;text-indent:-1000em}.amap-indoormap-floorbar-control .floor-minus:after,.amap-indoormap-floorbar-control .floor-plus:after{content:"";position:absolute;margin:auto;top:9px;left:0;right:0;width:0;height:0;border:solid transparent;border-width:10px 8px;border-top-color:#777}.amap-indoormap-floorbar-control .floor-minus.disabled,.amap-indoormap-floorbar-control .floor-plus.disabled{opacity:.3}.amap-indoormap-floorbar-control .floor-plus:after{border-bottom-color:#777;border-top-color:transparent;top:-3px}.amap-indoormap-floorbar-control .floor-list-box{max-height:153px;position:relative;overflow-y:hidden}.amap-indoormap-floorbar-control .floor-list{margin:0;padding:0;list-style:none}.amap-indoormap-floorbar-control .floor-list-item{position:relative}.amap-indoormap-floorbar-control .floor-btn.disabled,.amap-indoormap-floorbar-control .floor-btn.disabled *,.amap-indoormap-floorbar-control.with-indrm-loader *{-webkit-pointer-events:none!important;pointer-events:none!important}.amap-indoormap-floorbar-control .with-indrm-loader .floor-nonas{opacity:.5}.amap-indoor-map-moverf-marker{color:#555;background-color:#FFFEEF;border:1px solid #7E7E7E;padding:3px 6px;font-size:12px;white-space:nowrap;display:inline-block;position:absolute;top:1em;left:1.2em}.amap-indoormap-floorbar-control .amap-indrm-loader{-moz-animation:amap-indrm-loader 1250ms infinite linear;-webkit-animation:amap-indrm-loader 1250ms infinite linear;animation:amap-indrm-loader 1250ms infinite linear;border:2px solid #91A3D8;border-right-color:transparent;box-sizing:border-box;display:inline-block;overflow:hidden;text-indent:-9999px;width:13px;height:13px;border-radius:7px;position:absolute;margin:auto;top:0;left:0;right:0;bottom:0}@-moz-keyframes amap-indrm-loader{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes amap-indrm-loader{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes amap-indrm-loader{0%{-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)}}');
_jsload_('AMap.IndoorMap', 'g.Laa=g.da.extend({ka:[g.va],A:function(a){this.jx=g.extend({size:120,r9:0.7,z3:2,q9:300},a);this.Rj={};this.Ep=0;this.CM=this.jx.size},fca:function(a){return{Kg:a,KP:g.a.eg(),PH:0}},get:function(a,b){if(!this.Nd(a))return b;var c=this.Rj[a];c.KP=g.a.eg();c.PH+=1;return c.Kg},forEach:function(a,b){for(var c in this.Rj)if(this.Rj.hasOwnProperty(c)&&!1===a.call(b,this.Rj[c].Kg,c))break},sK:function(a,b){return this.get(a,b)},set:function(a,b){this.Nd(a)?this.Rj[a].Kg=b:(this.Ep+=1,this.Rj[a]=this.fca(b)); this.Ep>this.CM&&this.hca()},Nd:function(a){return this.Rj.hasOwnProperty(a)},Cw:function(a){if(!this.Nd(a))return null;this.Ep-=1;var b=this.Rj[a];delete this.Rj[a];return b.Kg},clear:function(){this.vM();this.Rj={};this.Ep=0},vM:function(){this.DM&&clearTimeout(this.DM)},hca:function(){if(this.Ep>this.CM*this.jx.z3)this.vM(),this.hX();else if(!(10>g.a.eg()-this.jca)){this.vM();var a=this;this.DM=setTimeout(function(){a.DM=null;a.hX()},this.jx.q9);this.jca=g.a.eg()}},hX:function(){var a=Math.round(this.CM* this.jx.r9);if(!(this.Ep<a))for(var a=this.bca(this.Ep-a),b,c,d=0,e=a.length;d<e;d+=1)b=a[d],c=this.Cw(b),this.r("drop",{key:b,Kg:c})},Yba:function(a,b){var c=this.Rj[a],d=this.Rj[b],e=c.KP-d.KP;return 0!==e?e:c.PH-d.PH},bca:function(a){var b=[],c;for(c in this.Rj)this.Rj.hasOwnProperty(c)&&b.push(c);return this.cca(b,a,this.Yba)},cca:function(a,b,c){if(0>=b)return[];for(var d=0,e=a.length-1,f,h,k;d<e;){f=d;h=e;for(k=a[b];f<=b&&h>=b;){for(;f<=b&&0>c.call(this,a[f],k);)f+=1;for(;h>=b&&0<c.call(this, a[h],k);)h-=1;var l=a[f];a[f]=a[h];a[h]=l;f+=1;h-=1}h<b&&(d=f);f>b&&(e=h)}return a.slice(0,b)}});g.Tw={FQ:function(a){g.f.fb(a,"transition")},kT:"function"!==typeof Object.create?function(){function a(){}return function(b){a.prototype=b;b=new a;a.prototype=null;return b}}():Object.create,V1:function(a,b){var c=this.zla;c||(c=this.zla=this.Mfa());if(!1!==c){this.FQ(a);var d,e=this,f=function k(){clearTimeout(d);e.FQ(a);g.F.G(a,c,k,e)};d=setTimeout(f,b||1E3);g.f.Wa(a,"transition");g.F.Dj(a,c,f,this)}},Mfa:function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd", MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a];return!1}};(function(){var a="strokeColor strokeOpacity strokeWeight fillColor fillOpacity strokeStyle strokeDasharray fontSize".split(" "),b=g.da.extend({A:function(){this.Cca=1;this.pP={};this.oda(c);this.j_=[]},J5:function(a){for(var b=!0,c=13;22>=c;c++){var h=this.x4(a,c);if(h&&(0<h.fontSize||h.fg)){b=!1;break}}return b},x4:function(a,b){return this.Rk(a,b)},ora:function(a,b){return this.Rk(a,b)},BR:function(a,b){return this.Rk(a,b)},loa:function(b,c){if(c)for(var f in c)c.hasOwnProperty(f)&&0<=a.indexOf(f)&& void 0===b[f]&&(b[f]=c[f]);return b},QI:function(b,c){if(!b)return null;for(var f={},h=0,k=a.length;h<k;h++){var l=a[h];b.hasOwnProperty(l)&&void 0!==b[l]&&(f[l]=b[l])}this.loa(f,c);return f},cDa:function(a,b){return void 0===a?b:this.fJ(a?this.QI(a,b):null)},i2:function(a){if(!a)return null;a=this.QI(a);return g.extend(a,{ln:this.vra(a)})},Rk:function(a,b){var c=a[0]+"_"+a[1];b=Math.round(b);var h=this.pP[c];if(!h)return 0>this.j_.indexOf(c)&&this.j_.push(c),null;for(var c=0,k=h.length;c<k;c++)if(0<= h[c].mz.indexOf(""+b))return h[c].XU;return 20<b&&(h=h[h.length-1],0<=h.mz.indexOf("20"))?(h.mz.push(""+b),h.XU):null},oda:function(a){for(var b in a)a.hasOwnProperty(b)&&this.pda(a[b],b)},pda:function(a,b){for(var c=0,h=a.length;c<h;c++)this.lda(a[c],b)},lda:function(a,b){var c=a.$;if(c){var h=a.StyleItem,c=c.mainkey+"_"+c.subkey;this.pP[c]&&console.error("Style key duplicate",c);this.pP[c]=this.nda(h,b)}else console.warn("Missing group $",a)},nda:function(a,b){for(var c=[],h=0,k=a.length;h<k;h++){var l= this.mda(a[h],b);l&&c.push(l)}return c},mda:function(a,b){var c=a.$;if(c){var h={};h.mz=c.level.split(",");h.Qoa=c.desc.split(",");h.XU=this.kda(h,h.Qoa,b);h.XU.mz=h.mz;return h}console.warn("Missing $",a)},Qp:function(a){a.trim&&(a=a.trim());return g.a.Tr(a.substr(2,8))},L4:function(){return this.Cca++},vra:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);b.sort();for(var h=[],k=0,l=b.length;k<l;k++)h.push(b[k]+":"+a[c]);return h.join(";")||"empty"},G6:function(a,b){return a?b?g.extend({}, a,b,{ln:b.ln+";"+a.ln}):a:b},fJ:function(a){return g.extend({},a,{ln:this.L4()})},kda:function(a,b,c){switch(c){case "PoiStyle":a={fg:parseInt(b[1],10),fontSize:Math.min(15,parseInt(b[4],10)||0),fillColor:this.Qp(b[5]),strokeColor:this.Qp(b[6]),$X:0===parseInt(b[8],10)};1===a.fg&&(a.fg=0);break;case "LineStyle":a={fillColor:"rgba(252,249,242,1)",strokeColor:this.Qp(b[7]),strokeWeight:Math.max(2,Math.round(parseInt(b[2],10)/3))};break;case "RegionStyle":a={fillColor:this.Qp(b[2])};break;case "BuildingStyle":a= {fillColor:this.Qp(b[1]),strokeColor:this.Qp(b[2])};break;default:return console.warn("Unknown style type",c),null}a.ln=this.L4();return a}}),c={PoiStyle:[{$:{mainkey:"10001",subkey:"1"},StyleItem:[{$:{level:"18,19,20",desc:"50,2,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,7,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"3"},StyleItem:[{$:{level:"19,20",desc:"50,8,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001", subkey:"4"},StyleItem:[{$:{level:"18",desc:"50,25,2,1,0,0xff84638E,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,25,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,59,2,1,0,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"6"},StyleItem:[{$:{level:"18,19,20",desc:"50,3,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"7"},StyleItem:[{$:{level:"18,19,20",desc:"50,4,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"8"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,9,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"9"},StyleItem:[{$:{level:"18,19,20",desc:"50,10,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"10"},StyleItem:[{$:{level:"18,19,20",desc:"50,14,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"11"},StyleItem:[{$:{level:"18,19,20",desc:"50,15,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"12"}, StyleItem:[{$:{level:"18,19,20",desc:"50,17,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"13"},StyleItem:[{$:{level:"18,19,20",desc:"50,18,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"14"},StyleItem:[{$:{level:"18,19,20",desc:"50,19,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"15"},StyleItem:[{$:{level:"18,19,20",desc:"50,22,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"16"},StyleItem:[{$:{level:"20",desc:"50,24,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"17"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"18"},StyleItem:[{$:{level:"18,19,20",desc:"50,27,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"19"},StyleItem:[{$:{level:"18,19,20",desc:"50,36,1,1,12,0xff8E3A3D,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"20"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,39,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"21"},StyleItem:[{$:{level:"18,19", desc:"50,44,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,44,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"22"},StyleItem:[{$:{level:"18,19",desc:"50,45,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,45,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"23"},StyleItem:[{$:{level:"18,19",desc:"50,46,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,46,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"24"}, StyleItem:[{$:{level:"18,19",desc:"50,47,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,47,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"25"},StyleItem:[{$:{level:"18,19",desc:"50,48,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,48,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"26"},StyleItem:[{$:{level:"18,19",desc:"50,49,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,49,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"27"},StyleItem:[{$:{level:"18,19",desc:"50,50,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,50,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"28"},StyleItem:[{$:{level:"18,19",desc:"50,51,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,51,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"29"},StyleItem:[{$:{level:"18,19",desc:"50,52,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,52,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"30"},StyleItem:[{$:{level:"18,19",desc:"50,53,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,53,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"31"},StyleItem:[{$:{level:"18,19",desc:"50,54,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,54,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"32"},StyleItem:[{$:{level:"18,19",desc:"50,55,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,55,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"33"},StyleItem:[{$:{level:"18,19",desc:"50,56,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,56,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"34"},StyleItem:[{$:{level:"18,19",desc:"50,57,2,1,0,0xff696F71,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,57,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"35"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,6,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"36"}, StyleItem:[{$:{level:"18,19,20",desc:"50,12,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"37"},StyleItem:[{$:{level:"19,20",desc:"50,13,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"38"},StyleItem:[{$:{level:"18,19,20",desc:"50,16,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"39"},StyleItem:[{$:{level:"17",desc:"50,20,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,20,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001", subkey:"40"},StyleItem:[{$:{level:"17",desc:"50,5,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,5,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"41"},StyleItem:[{$:{level:"20",desc:"50,28,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"42"},StyleItem:[{$:{level:"18,19,20",desc:"50,29,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"43"},StyleItem:[{$:{level:"18,19,20",desc:"50,31,1,1,12,0xff000000,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"44"},StyleItem:[{$:{level:"18,19,20",desc:"50,32,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"45"},StyleItem:[{$:{level:"18,19,20",desc:"50,33,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"46"},StyleItem:[{$:{level:"18",desc:"50,34,2,1,0,0xff935676,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,34,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"47"},StyleItem:[{$:{level:"18,19,20",desc:"50,35,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"48"},StyleItem:[{$:{level:"19,20",desc:"50,37,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"49"},StyleItem:[{$:{level:"18,19,20",desc:"50,38,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"50"},StyleItem:[{$:{level:"18,19,20",desc:"50,42,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"51"},StyleItem:[{$:{level:"18,19,20",desc:"50,41,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"52"},StyleItem:[{$:{level:"20", desc:"50,43,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"53"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,58,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"54"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,21,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"55"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,30,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"56"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff000000,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"57"},StyleItem:[{$:{level:"18,19,20",desc:"50,23,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"58"},StyleItem:[{$:{level:"18,19,20",desc:"50,40,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"59"},StyleItem:[{$:{level:"18,19,20",desc:"50,11,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"60"},StyleItem:[{$:{level:"16,17",desc:"50,1,0,1,20,0xff6590a6,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"62"},StyleItem:[{$:{level:"17,18,19,20", desc:"50,61,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"63"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,60,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"64"},StyleItem:[{$:{level:"17",desc:"50,62,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,62,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"65"},StyleItem:[{$:{level:"17",desc:"50,63,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,63,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"66"},StyleItem:[{$:{level:"17",desc:"50,64,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,64,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"67"},StyleItem:[{$:{level:"17",desc:"50,65,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,65,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"68"},StyleItem:[{$:{level:"17",desc:"50,66,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,66,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"69"},StyleItem:[{$:{level:"17",desc:"50,67,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,67,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"70"},StyleItem:[{$:{level:"17",desc:"50,68,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,68,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"71"},StyleItem:[{$:{level:"17",desc:"50,69,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,69,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"72"},StyleItem:[{$:{level:"17",desc:"50,70,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,70,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"73"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,71,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"74"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,72,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"75"},StyleItem:[{$:{level:"18,19",desc:"50,73,2,1,0,0xff62686B,0xffffffff,0x0,0"}}, {$:{level:"20",desc:"50,73,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"76"},StyleItem:[{$:{level:"18,19",desc:"50,74,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,74,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"77"},StyleItem:[{$:{level:"18,19",desc:"50,75,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,75,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"78"},StyleItem:[{$:{level:"18,19",desc:"50,76,2,1,0,0xff62686B,0xffffffff,0x0,0"}}, {$:{level:"20",desc:"50,76,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"79"},StyleItem:[{$:{level:"19,20",desc:"50,81,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"80"},StyleItem:[{$:{level:"19,20",desc:"50,89,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"81"},StyleItem:[{$:{level:"19,20",desc:"50,85,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"82"},StyleItem:[{$:{level:"19,20",desc:"50,90,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"83"},StyleItem:[{$:{level:"19,20",desc:"50,83,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"84"},StyleItem:[{$:{level:"19,20",desc:"50,103,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"85"},StyleItem:[{$:{level:"19,20",desc:"50,98,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"86"},StyleItem:[{$:{level:"19,20",desc:"50,86,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"87"},StyleItem:[{$:{level:"19,20", desc:"50,87,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"88"},StyleItem:[{$:{level:"19,20",desc:"50,111,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"89"},StyleItem:[{$:{level:"19,20",desc:"50,88,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"90"},StyleItem:[{$:{level:"19,20",desc:"50,91,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"91"},StyleItem:[{$:{level:"19,20",desc:"50,93,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"92"},StyleItem:[{$:{level:"19,20",desc:"50,113,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"93"},StyleItem:[{$:{level:"19,20",desc:"50,95,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"94"},StyleItem:[{$:{level:"19,20",desc:"50,100,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"95"},StyleItem:[{$:{level:"19,20",desc:"50,97,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"96"},StyleItem:[{$:{level:"19,20", desc:"50,94,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"97"},StyleItem:[{$:{level:"18,19,20",desc:"50,108,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"98"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"99"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,1"}}]},{$:{mainkey:"10001",subkey:"105"},StyleItem:[{$:{level:"16,17,18",desc:"50,1,0,1,14,0xff696F71,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"106"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"107"},StyleItem:[{$:{level:"16,17,18,19,20",desc:"50,109,1,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]}],LineStyle:[{$:{mainkey:"20001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,10,0,0,0,0xffe68e00,0xffe68e00,0xffe68e00,0xffe68e00"}}]},{$:{mainkey:"20001",subkey:"2"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,8,0,0,0,0xffababab,0xffababab,0xff5e492f,0xffffe080"}}]}], RegionStyle:[{$:{mainkey:"30001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"90,1,0xfffcfbed"}}]},{$:{mainkey:"30001",subkey:"99"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x1a151b2b"}}]},{$:{mainkey:"30001",subkey:"98"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x8c151b2b"}}]}],BuildingStyle:[{$:{mainkey:"30001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"3"},StyleItem:[{$:{level:"15,16,17,18,19,20", desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"4"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd6e9 ,0xff6f7c87,0xffacc0d1,0xff99abba,255"}}]},{$:{mainkey:"30001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffcce3e8 ,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"6"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffcce3e8,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"7"},StyleItem:[{$:{level:"15,16,17,18,19,20", desc:"99,0xffe5dae8,0xff857f87,0xffcec4d0,0xffb7aeba,255"}}]},{$:{mainkey:"30001",subkey:"8"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfffaeccd,0xff948c79,0xffe1d4b8,0xffc8bda4,255"}}]},{$:{mainkey:"30001",subkey:"9"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff90bae8,0xff546d87,0xff81a7d0,0xff7395ba,255"}}]},{$:{mainkey:"30001",subkey:"10"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff0e3df,0xff8f8d8c,0xffd8ccc8,0xffc0b6b2,255"}}]},{$:{mainkey:"30001",subkey:"11"}, StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd3e9,0xff6f7b87,0xffacbdd1,0xff99a9ba,255"}}]},{$:{mainkey:"30001",subkey:"12"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdae2f4,0xff7f848f,0xffc4cbdb,0xffaeb5c3,255"}}]},{$:{mainkey:"30001",subkey:"13"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff95e3f5,0xff598791,0xff86ccdc,0xff77b6c4,255"}}]},{$:{mainkey:"30001",subkey:"14"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffc9edf5,0xff778d91,0xffb5d5dc,0xffa1bec4,255"}}]}, {$:{mainkey:"30001",subkey:"15"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff4c4ba,0xff8f726d,0xffdbb0a7,0xffc39d95,255"}}]},{$:{mainkey:"30001",subkey:"16"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdbe8b3,0xff7f8768,0xffc5d0a1,0xffafba8f,255"}}]},{$:{mainkey:"30001",subkey:"17"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff5cedc,0xff917a82,0xffdcb9c6,0xffc4a5b0,255"}}]}]};g.AF=new b;c=null})();(function(){function a(a){function c(a,b,c){a=a.subarray(b,c);b=0;c="";var d=0;for(b=d=0;b<a.length;)d=a[b],0===d>>>7?(d=String.fromCharCode(a[b]),"0"!==d.charCodeAt(0).toString(16)&&(c+=d),b+=1):252===(d&252)?(d=(a[b]&3)<<30,d|=(a[b+1]&63)<<24,d|=(a[b+2]&63)<<18,d|=(a[b+3]&63)<<12,d|=(a[b+4]&63)<<6,d|=a[b+5]&63,c+=String.fromCharCode(d),b+=6):248===(d&248)?(d=(a[b]&7)<<24,d|=(a[b+1]&63)<<18,d|=(a[b+2]&63)<<12,d|=(a[b+3]&63)<<6,d|=a[b+4]&63,c+=String.fromCharCode(d),b+=5):240===(d&240)?(d=(a[b]&15)<< 18,d|=(a[b+1]&63)<<12,d|=(a[b+2]&63)<<6,d|=a[b+3]&63,c+=String.fromCharCode(d),b+=4):224===(d&224)?(d=(a[b]&31)<<12,d|=(a[b+1]&63)<<6,d|=a[b+2]&63,c+=String.fromCharCode(d),b+=3):192===(d&192)?(d=(a[b]&63)<<6,d|=a[b+1]&63,c+=String.fromCharCode(d),b+=2):(d=String.fromCharCode(a[b]),"0"!==d.charCodeAt(0).toString(16)&&(c+=d),b+=1);return c.trim()}function d(a,b){a=a.toString(2);b=b.toString(2);a=Array(32-a.length+1).join("0")+a;b=Array(32-b.length+1).join("0")+b;var c=k;c.lastIndex=0;if(c=(b+a).toString().match(c)){var d= 0;-1===c[0].indexOf(".")&&(d=parseInt(c,2));return d=d.toString(36).toUpperCase()}return"error"}function e(a){for(var b,e,f,k,r,s={},u={},v=new Uint8Array(a),w=new DataView(a),t=0,t=t+4,t=t+4,x=w.getInt32(t,!0),t=t+4,t=t+4,y=w.getInt32(t,!0),t=t+(4+y),t=t+4,E=w.getUint32(t,!0).toString(2),C=w.getUint32(t+4,!0).toString(2),D=d(E,C),t=t+8,A=c(v,t,t+64),t=t+64,B=c(v,t,t+64),t=t+64,G=w.getInt8(t,!0),t=t+1,H=c(v,t,t+8),t=t+8,I=w.getInt16(t,!0),P=w.getInt16(t+2,!0),t=t+4,L=w.getFloat32(t,!0),M=w.getFloat32(t+ 4,!0),t=t+8,K=w.getFloat32(t,!0),F=w.getFloat32(t+4,!0),t=t+8,Q=w.getFloat32(t,!0),N=w.getFloat32(t+4,!0),t=t+8,J=w.getInt32(t,!0),t=t+4,O=w.getInt32(t,!0),t=t+4,V=w.getInt32(t,!0),t=t+4,R=[],S=0;S<J;S++)R.push(w.getInt32(t,!0)),t+=4;for(var T=[],S=0;S<V;S++)T.push(w.getInt32(t,!0)),t+=4;for(var W=[],S=0;S<J;S++){var U=c(v,t,t+48);W.push(U);t+=48}for(var X=[],S=0;S<J;S++){var Z=c(v,t,t+8);X.push(Z);t+=8}for(var Y=[],S=0;S<O;S++){var aa=w.getInt32(t,!0)*h+M,da=w.getInt32(t+4,!0)*h+L;Y.push([aa,da]); t+=8}b={type:"Feature",geometry:{type:"Polygon",coordinates:[Y]},properties:{pid:D,name_cn:A,name_en:B,default_floor:G,buildingtype:H,building_poi_style:[I,P],centerPoint:[M,L],left_bottom_Point:[K,F],width:Q,height:N,numberofFloor:J,numberofGeoPoints:O,park_floor_count:V,floor_indexs:R,park_floors:T,floor_names:W,floor_nonas:X}};for(var Aa=0;Aa<x;Aa++){var ha=c(v,t,t+8),t=t+8,ea=w.getInt8(t,!0),t=t+1;u[ea]={floor:{},shops:[],pubs:[],cons:[]};for(var la=w.getInt16(t,!0),ia=w.getInt16(t+2,!0),t=t+ 4,ta=w.getInt16(t,!0),Ia=w.getInt16(t+2,!0),t=t+4,Ha=w.getInt16(t,!0),Ba=w.getInt16(t+2,!0),t=t+4,Ca=w.getInt32(t,!0),t=t+4,tc=w.getInt32(t,!0),t=t+4,uc=w.getInt32(t,!0),t=t+4,Hb=w.getInt32(t,!0),t=t+4,Ib=[],Oa=0;Oa<Hb;Oa++){for(var Bd=w.getInt32(t,!0),t=t+4,zc=[],ja=0;ja<Bd;ja++)aa=w.getInt32(t,!0)*h+M,da=w.getInt32(t+4,!0)*h+L,zc.push([aa,da]),t+=8;Ib.push(zc)}var Ac="Polygon",Bc=Ib[0];1<Hb&&(Ac="MultiPolygon",Bc=Ib);e={type:"Feature",geometry:{type:Ac,coordinates:[Bc]},properties:{namecode:ha, index:ea,floor_region_type:[la,ia],unhighlighted_floor_line_style:[ta,Ia],highlighted_floor_line_style:[Ha,Ba],numberofShopCount:Ca,numberofPubCount:tc,numberofConCount:uc,floor_area_count:Hb}};u[ea].floor=e;for(var Cc=[],ua=0,ua=0;ua<Ca;ua++){for(var Cd=c(v,t,t+128),t=t+128,Dd=w.getUint32(t,!0).toString(2),Ed=w.getUint32(t+4,!0).toString(2),Fd=d(Dd,Ed),t=t+8,Gd=c(v,t,t+24),t=t+24,Hd=c(v,t,t+12),t=t+12,Id=w.getInt32(t,!0),t=t+4,Jd=w.getFloat32(t,!0),t=t+4,Kd=w.getInt8(t,!0),t=t+1,Ld=w.getInt16(t, !0),Md=w.getInt16(t+2,!0),t=t+4,Nd=w.getInt16(t,!0),Od=w.getInt16(t+2,!0),t=t+4,Pd=w.getInt32(t,!0)*h+M,Qd=w.getInt32(t+4,!0)*h+L,t=t+8,Dc=w.getInt32(t,!0),t=t+4,Ec=[],Oa=0;Oa<Dc;Oa++)aa=w.getInt32(t,!0)*h+M,da=w.getInt32(t+4,!0)*h+L,Ec.push([aa,da]),t+=8;f={type:"Feature",geometry:{type:"Polygon",coordinates:[Ec]},properties:{name:Cd,pid:Fd,cpid:Gd,logo:Hd,area:Id,rank:Jd,height:Kd,poitype:[Ld,Md],regiontype:[Nd,Od],font_anthor_point:[Pd,Qd],shop_point_number:Dc}};Cc.push(f)}u[ea].$K=Cc;for(var Fc= [],ua=ua=0;ua<tc;ua++){var Rd=c(v,t,t+24),t=t+24,Sd=w.getUint32(t,!0).toString(2),Td=w.getUint32(t+4,!0).toString(2),Ud=d(Sd,Td),t=t+8,Vd=c(v,t,t+48),t=t+48,Wd=w.getFloat32(t,!0),t=t+4,Xd=w.getInt16(t,!0),Yd=w.getInt16(t+2,!0),t=t+4,aa=w.getInt32(t,!0)*h+M,da=w.getInt32(t+4,!0)*h+L,t=t+8;r={type:"Feature",geometry:{type:"Point",coordinates:[aa,da]},properties:{cpid:Rd,pid:Ud,name:Vd,rank:Wd,poitype:[Xd,Yd]}};Fc.push(r)}u[ea].zK=Fc;for(var Gc=[],ua=0;ua<uc;ua++){var Zd=c(v,t,t+24),t=t+24,$d=w.getUint32(t, !0).toString(2),ae=w.getUint32(t+4,!0).toString(2),be=d($d,ae),t=t+8,ce=c(v,t,t+48),t=t+48,de=w.getFloat32(t,!0),t=t+4,ee=w.getInt16(t,!0),fe=w.getInt16(t+2,!0),t=t+4,aa=w.getInt32(t,!0)*h+M,da=w.getInt32(t+4,!0)*h+L,t=t+8;k={type:"Feature",geometry:{type:"Point",coordinates:[aa,da]},properties:{cpid:Zd,pid:be,name:ce,rank:de,poitype:[ee,fe]}};Gc.push(k)}u[ea].qI=Gc}for(var t=t+4,ge=w.getInt32(t,!0),t=t+(4+ge),he=w.getInt32(t,!0),t=t+4,Hc=[],S=0;S<he;S++)aa=w.getInt32(t,!0)*h+M,da=w.getInt32(t+4, !0)*h+L,Hc.push([aa,da]),t+=8;b.properties.outside_outline=Hc;var Pa={},ka;for(ka in u)if(u.hasOwnProperty(ka)){Pa.floor=u[ka].floor;for(ja=0;ja<u[ka].$K.length;ja++){var ie=w.getInt16(t,!0),t=t+2,je=w.getInt16(t,!0),t=t+2;u[ka].$K[ja].properties.zoom_min=ie;u[ka].$K[ja].properties.zoom_max=je}Pa.shops=u[ka].$K;for(ja=0;ja<u[ka].zK.length;ja++){var ke=w.getInt16(t,!0),t=t+2,le=w.getInt16(t,!0),t=t+2;u[ka].zK[ja].properties.zoom_min=ke;u[ka].zK[ja].properties.zoom_max=le}Pa.pubs=u[ka].zK;for(ja=0;ja< u[ka].qI.length;ja++){var me=w.getInt16(t,!0),t=t+2,ne=w.getInt16(t,!0),t=t+2;u[ka].qI[ja].properties.zoom_min=me;u[ka].qI[ja].properties.zoom_max=ne}Pa.cons=u[ka].qI;s.floor=Pa}var t=t+4,oe=w.getInt32(t,!0),t=t+(4+oe),pe=w.getInt8(t,!0),t=t+1;b.properties.dDa=pe;s.building=b;return s}var f=f||{};f.Ap=function(){this.Pr=0};f.Ap.prototype.create=function(a){this.nx&&this.Pr===a||(this.nx=[]);this.Pr=a;this.uH=this.bj=0};f.Ap.prototype.flush=function(){var a=this.bj-this.uH;if(0!==a){for(;a--;)this.Lr.kAa(this.nx[this.uH++]); this.bj>=this.Pr&&(this.bj=0);this.uH=this.bj}};f.Ap.prototype.IK=function(){this.flush();this.Lr=null};f.Ap.prototype.LU=function(a){this.IK();this.Lr=a};f.Ap.prototype.Dg=function(a){a||(this.bj=this.uH=0)};f.Ap.prototype.koa=function(a,b){var c=this.bj-a-1;for(0>c&&(c+=this.Pr);b--;)c>=this.Pr&&(c=0),this.nx[this.bj++]=this.nx[c++],this.bj>=this.Pr&&this.flush()};f.Ap.prototype.kwa=function(a){this.nx[this.bj++]=a;this.bj>=this.Pr&&this.flush()};f.Ap.prototype.T3=function(a){a=this.bj-a-1;0>a&& (a+=this.Pr);return this.nx[a]};f.$w=function(){};f.$w.prototype.LU=function(a){this.Lr=a};f.$w.prototype.IK=function(){this.Lr=null};f.$w.prototype.Dg=function(){var a=5;this.Sj=0;for(this.Ih=-1;a--;)this.Sj=this.Sj<<8|this.Lr.Sh()};f.$w.prototype.Joa=function(a){for(var b=0,c;a--;)this.Ih>>>=1,c=this.Sj-this.Ih>>>31,this.Sj-=this.Ih&c-1,b=b<<1|1-c,0===(this.Ih&4278190080)&&(this.Sj=this.Sj<<8|this.Lr.Sh(),this.Ih<<=8);return b};f.$w.prototype.Zj=function(a,b){var c=a[b],d=(this.Ih>>>11)*c;if((this.Sj^ 2147483648)<(d^2147483648))return this.Ih=d,a[b]+=2048-c>>>5,0===(this.Ih&4278190080)&&(this.Sj=this.Sj<<8|this.Lr.Sh(),this.Ih<<=8),0;this.Ih-=d;this.Sj-=d;a[b]-=c>>>5;0===(this.Ih&4278190080)&&(this.Sj=this.Sj<<8|this.Lr.Sh(),this.Ih<<=8);return 1};f.To=function(a,b){for(;b--;)a[b]=1024};f.Mm=function(a){this.tO=[];this.YG=a};f.Mm.prototype.Dg=function(){f.To(this.tO,1<<this.YG)};f.Mm.prototype.Ge=function(a){for(var b=1,c=this.YG;c--;)b=b<<1|a.Zj(this.tO,b);return b-(1<<this.YG)};f.Mm.prototype.fxa= function(a){for(var b=1,c=0,d=0,e;d<this.YG;++d)e=a.Zj(this.tO,b),b=b<<1|e,c|=e<<d;return c};f.gxa=function(a,b,c,d){for(var e=1,f=0,h=0,k;h<d;++h)k=c.Zj(a,b+e),e=e<<1|k,f|=k<<h;return f};f.EA=function(){this.TM=[];this.oO=[];this.sO=[];this.qZ=new f.Mm(8);this.LB=0};f.EA.prototype.create=function(a){for(;this.LB<a;++this.LB)this.oO[this.LB]=new f.Mm(3),this.sO[this.LB]=new f.Mm(3)};f.EA.prototype.Dg=function(){var a=this.LB;for(f.To(this.TM,2);a--;)this.oO[a].Dg(),this.sO[a].Dg();this.qZ.Dg()};f.EA.prototype.Ge= function(a,b){return 0===a.Zj(this.TM,0)?this.oO[b].Ge(a):0===a.Zj(this.TM,1)?8+this.sO[b].Ge(a):16+this.qZ.Ge(a)};f.sF=function(){this.nG=[]};f.sF.prototype.Dg=function(){f.To(this.nG,768)};f.sF.prototype.Loa=function(a){var b=1;do b=b<<1|a.Zj(this.nG,b);while(256>b);return b&255};f.sF.prototype.Moa=function(a,b){var c=1,d,e;do if(d=b>>7&1,b<<=1,e=a.Zj(this.nG,(1+d<<8)+c),c=c<<1|e,d!==e){for(;256>c;)c=c<<1|a.Zj(this.nG,c);break}while(256>c);return c&255};f.BF=function(){};f.BF.prototype.create=function(a, b){var c;if(!this.fG||this.MB!==b||this.AO!==a)for(this.AO=a,this.Xja=(1<<a)-1,this.MB=b,this.fG=[],c=1<<this.MB+this.AO;c--;)this.fG[c]=new f.sF};f.BF.prototype.Dg=function(){for(var a=1<<this.MB+this.AO;a--;)this.fG[a].Dg()};f.BF.prototype.Jqa=function(a,b){return this.fG[((a&this.Xja)<<this.MB)+((b&255)>>>8-this.MB)]};f.Ow=function(){this.Op=new f.Ap;this.Jh=new f.$w;this.LZ=[];this.QZ=[];this.RZ=[];this.SZ=[];this.TZ=[];this.PZ=[];this.Qx=[];this.t0=[];this.s0=new f.Mm(4);this.eO=new f.EA;this.eP= new f.EA;this.iO=new f.BF;this.oN=this.nN=-1;this.Qx[0]=new f.Mm(6);this.Qx[1]=new f.Mm(6);this.Qx[2]=new f.Mm(6);this.Qx[3]=new f.Mm(6)};f.Ow.prototype.Cxa=function(a){if(0>a)return!1;this.nN!==a&&(this.nN=a,this.oN=Math.max(this.nN,1),this.Op.create(Math.max(this.oN,4096)));return!0};f.Ow.prototype.Ixa=function(a,b,c){var d=1<<c;if(8<a||4<b||4<c)return!1;this.iO.create(b,a);this.eO.create(d);this.eP.create(d);this.Yja=d-1;return!0};f.Ow.prototype.Dg=function(){var a=4;this.Op.Dg(!1);f.To(this.LZ, 192);f.To(this.PZ,192);f.To(this.QZ,12);f.To(this.RZ,12);f.To(this.SZ,12);f.To(this.TZ,12);f.To(this.t0,114);for(this.iO.Dg();a--;)this.Qx[a].Dg();this.eO.Dg();this.eP.Dg();this.s0.Dg();this.Jh.Dg()};f.Ow.prototype.Ge=function(a,b,c){var d=0,e=0,h=0,k=0,u=0,v=0,w=0;this.Jh.LU(a);this.Op.LU(b);for(this.Dg();0>c||v<c;)if(a=v&this.Yja,0===this.Jh.Zj(this.LZ,(d<<4)+a))w=this.iO.Jqa(v++,w),w=7<=d?w.Moa(this.Jh,this.Op.T3(e)):w.Loa(this.Jh),this.Op.kwa(w),d=4>d?0:d-(10>d?3:6);else{if(1===this.Jh.Zj(this.QZ, d))w=0,0===this.Jh.Zj(this.RZ,d)?0===this.Jh.Zj(this.PZ,(d<<4)+a)&&(d=7>d?9:11,w=1):(0===this.Jh.Zj(this.SZ,d)?b=h:(0===this.Jh.Zj(this.TZ,d)?b=k:(b=u,u=k),k=h),h=e,e=b),0===w&&(w=2+this.eP.Ge(this.Jh,a),d=7>d?8:11);else if(u=k,k=h,h=e,w=2+this.eO.Ge(this.Jh,a),d=7>d?7:10,a=this.Qx[5>=w?w-2:3].Ge(this.Jh),4<=a)if(b=(a>>1)-1,e=(2|a&1)<<b,14>a)e+=f.gxa(this.t0,e-a-1,this.Jh,b);else{if(e+=this.Jh.Joa(b-4)<<4,e+=this.s0.fxa(this.Jh),0>e){if(-1===e)break;return!1}}else e=a;if(e>=v||e>=this.oN)return!1; this.Op.koa(e,w);v+=w;w=this.Op.T3(0)}this.Op.flush();this.Op.IK();this.Jh.IK();return!0};f.Ow.prototype.Bxa=function(a){var b,c;if(5>a.size)return!1;b=a.Sh();c=b%9;b=~~(b/9);if(!this.Ixa(c,b%5,~~(b/5)))return!1;b=a.Sh();b|=a.Sh()<<8;b|=a.Sh()<<16;b+=16777216*a.Sh();return this.Cxa(b)};f.Noa=function(a,b){var c=new f.Ow,d;if(!c.Bxa(a))throw"Incorrect stream properties";d=a.Sh();d|=a.Sh()<<8;d|=a.Sh()<<16;d+=16777216*a.Sh();a.Sh();a.Sh();a.Sh();a.Sh();if(!c.Ge(a,b,d))throw"Error in data stream";}; var h=1E-9,k=RegExp("^[+\\\\-]?[0-1]*[.]?[0-1]*$","gi");a.getUnifyJson=function(a){var b=[];if(!(a instanceof ArrayBuffer)){var d={status:3,building:{},floor:{},id:""};b.push(d);return b}new Uint8Array(a);a=new DataView(a);var h;h=4;var k=a.getInt16(h,!1);for(h+=2;0<k;){h+=4;var r=a.getUint8(h,!1);h+=1;for(var s=new ArrayBuffer(r),s=new Uint8Array(s),u=0;u<r;u++)s[u]=a.getUint8(h,!1),h+=1;r=c(s,0,r);h+=2;s=a.getInt8(h,!1);h+=1;0!==s&&(d={},d.status=s,d.building={},d.floor={},d.id=r,b.push(d));var v= a.getInt32(h,!1);h+=4;u=a.getInt32(h,!0);h+=4;v-=u;if(0!==u){for(var w=8*Math.ceil(u/8),d=u%8,w=new ArrayBuffer(w),t=new Int32Array(w),x=0;8<=u;){var y=a.getInt32(h,!0),E=a.getInt32(h+4,!0),y=y^2078870821,E=E^292664;t[x]=y;t[x+1]=E;x+=2;h+=8;u-=8}0!==u&&(y=a.getInt32(h,!0),E=a.getInt32(h+4,!0),y^=2078870821,E^=292664,t[x]=y,t[x+1]=E,h+=u);x=new Uint8Array(w);E=x.length;w=E-8+d;t=new Uint8Array(w);for(u=0;u<w;u++)t[u]=x[u];for(u=0;u<d;u++)t[w-d+u]=x[E-1-u];d={data:[],offset:0,kAa:function(a){this.data[this.offset++]= a}};f.Noa({data:t,offset:0,Sh:function(){return this.data[this.offset++]}},d);d=d.data;w=d.length;t=new ArrayBuffer(w);x=new Int8Array(t);for(u=0;u<w;u++)x[u]=d[u];d=e(t);d.status=s;d.id=r;b.push(d)}h+=v;k-=1}return b}}g.oW={Qja:a};a(g.oW)})();(function(){var a=g.oW,b=new g.KA(function(b){var d;(d=b?b.getUnifyJson:a.getUnifyJson)||console.error("getUnifyJson not found!!");return{Era:function(a,b){try{var c=d(a);b(null,c)}catch(k){b(k.message||k.toString())}}}},{clientId:"indoor",lazy:"untilCall",batchSend:!1,libPolyfills:[a.Qja]});g.pW={oy:function(){return b.oy()},rma:function(a){b.Au([a]);return b.Era.apply(b,arguments)}}})();g.Haa=g.da.extend({A:function(a){this.vc(a.map)},vc:function(a){this.map=a},VT:function(a){return this.Ava(a)},Ava:function(a){a=this.Ova(a);var b=[],c;if(a instanceof g.bi)b=[a];else if(a instanceof g.Aa.Pe)c=new g.bi,c.FU(a),b=[c];else if(this.isArray(a))for(var d,e,f=0,h=a.length;f<h;f+=1)if(d=a[f],e=e||d instanceof g.Aa.Pe)c=new g.bi({zIndex:1,map:this.map,W:d,style:null}),c.name=d.dj+"-"+g.a.zb(c),b[f]=c;else{b=a;break}return b},Ova:function(a){if("FeatureCollection"===a.type){var b=a.features, c=b.length,d;a=Array(c);for(d=0;d<c;d+=1)a[d]=this.DT(b[d])}else a="Feature"===a.type?this.DT(a):"GeometryCollection"===a.type?this.uGa(a):this.DT({type:"Feature",W:a}).fc();return a},DT:function(a){var b=a.geometry,c=null,d=new g.bi({zIndex:1,map:this.map});a.id&&(d.id=a.id);if(b){var e=b.type;switch(e){case "Point":c=this.Iva(b);d.yB=!0;d.set("radius",2,!0);d.set("center",c.gi,!0);d.set("strokeWeight",0,!0);d.X("resolution",this.map);break;case "LineString":c=this.Eva(b);break;case "Polygon":c= this.Jva(b);break;case "MultiPoint":c=this.wGa(b);break;case "MultiLineString":c=this.Fva(b);break;case "MultiPolygon":c=this.Gva(b);break;default:throw Error("Bad geometry type: "+e);}c&&(c.dj=e.toLowerCase(),d.name=c.dj+"-"+g.a.zb(d));d.wa=a.properties;d.FU(c)}return d},nL:function(a){a[0][0]||console.log(a);var b=a.length,c,d=[];c=this.map.Cb(new g.U(a[0][0],a[0][1]));for(var e=c.x,f=c.y,h=c.x,k=c.y,l=0;l<b;l+=1)c=this.map.Cb(new g.U(a[l][0],a[l][1])),d[l]=[c.x,c.y],d[l][0]<e&&(e=d[l][0]),d[l][0]> h&&(h=d[l][0]),d[l][1]<f&&(f=d[l][1]),d[l][1]>k&&(k=d[l][1]);d.yg=[e,f,h,k];return d},Jva:function(a){var b=[];a=a.coordinates;for(var c=0;c<a.length;c+=1)b[c]=this.nL(a[c]);return new g.Aa.Ec(b)},Iva:function(a){a=a.coordinates;a=new g.U(a[0],a[1]);var b=this.map.Cb(a),b=new g.Aa.Ng([b.x,b.y]);b.gi=a;return b},Gva:function(a){a=a.coordinates;for(var b=a.length,c=[],d=0;d<b;d+=1){c[d]=[];for(var e=0;e<a[d].length;e+=1)c[d][e]=this.nL(a[d][e])}return new g.Aa.zp(c)},Eva:function(a){a=this.nL(a.coordinates); return new g.Aa.tr(a)},Fva:function(a){for(var b=a.coordinates.length,c=[],d=0;d<b;d+=1)c[d]=this.nL(a.coordinates[d]);return new g.Aa.Ww(c)},isArray:function(a){return g.a.isArray(a)}});(function(){var a={cons:{name:"",rank:0.20000000298023224,zoom_max:20,zoom_min:18},pubs:{name:"",rank:0.5,zoom_max:20,zoom_min:18},shops:{name:"",pid:"0",logo:"",area:1,rank:0.10000000149011612,height:0,shop_point_number:5,zoom_max:20,zoom_min:18}},b;for(b in a)a.hasOwnProperty(b)&&(a[b].Kl=b);var c={poitype:{},regiontype:{}},d=g.Tw.kT;g.Iaa={$na:function(b,f,h){f={Pt:f,sG:h};for(var k in b)if(b.hasOwnProperty(k)){h=b[k];var l=g.extend(d(f),a[k]);g.a.isArray(h)||(h=[h]);for(var m=0,n=h.length;m<n;m++){var p= h[m],q=h[m].properties,r=d(l),s=void 0;for(s in q)q.hasOwnProperty(s)&&q[s]!==r[s]&&(r[s]=q[s]);q=void 0;for(q in c)c.hasOwnProperty(q)&&r[q]&&(s=r[q].join("-"),c[q][s]||(c[q][s]=[].concat(r[q])),r[q]=c[q][s]);p.properties=r}}return b}}})();g.zF=g.da.extend({ka:[g.va],qi:{loaded:20,Ke:10,empty:0,Zna:-10,axa:-20},fna:{pubs:"public",cons:"connection",shops:"shop"},Go:-9999,A:function(a){this.sa=a;this.ms=new g.Laa({size:g.l.size,r9:0.7,z3:2,q9:300});this.ms.h("drop",function(){});this.eea=g.pW;this.JY=new g.Haa({map:a});this.Kh=g.AF;this.eea.oy()},vc:function(a){this.sa=a;this.JY.vc(a)},forEach:function(){return this.ms.forEach.apply(this.ms,arguments)},kDa:function(){this.ms.clear()},Hta:function(a){for(var b=0,c=a.length;b<c;b++)this.VS(a[b])}, lm:function(a,b){b=b||a.Tc||a.Go;var c=this.mq(a,b,!0),d=null;c?d=c.I:a.p2&&(d=a.p2.I);return d?new g.Xf(d):null},DS:function(a){return a.Yr&&a.Yr>=this.qi.loaded},G5:function(a,b){return this.RY(a,b)>=this.qi.loaded},Dna:function(a,b,c){var d=b||a.Tc;if(d&&d!==this.Go){d=""+d;b=a.gI;for(var e=[a.ha,a.bv,a.My,a.gv],f=[a.TI,a.hR,a.jz],h=[],k=0,l=b.length;k<l;k++){var m=b[k],n=a.My[m];n<this.qi.loaded&&n>=this.qi.empty||h.push(""+m)}this.lY(e,function(a){a=""+a;return 0<=h.indexOf(""+a)&&a!==d});this.lY(f, function(a){var b=a.split("_"),b=b[0];return 0<=h.indexOf(b)&&0!==a.indexOf(d+"_"+(c?c:""))})}},lY:function(a,b){for(var c=0,d=a.length;c<d;c++)this.hea(a[c],b)},hea:function(a,b){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(d);d=0;for(var e=c.length;d<e;d++)b.call(this,c[d])&&delete a[c[d]]},RY:function(a,b){return a.My[b||a.Tc||a.Go]||this.qi.empty},ES:function(a,b){return this.DS(a)&&this.G5(a,b)},Kda:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];g.a.isArray(e)&&(e=new g.H(e[0], e[1]));b.push(this.sa.Qd(e))}return b},hfa:function(a){a=a.fc();if(!a||!a.F4)return null;a=a.Rf;for(var b=[],c=0,d=a.length;c<d;c++)b.push(this.Kda(a[c].za));return b},S3:function(a){a=this.Rh(a);if(!a)return null;a=a.Xp;if(!a)return null;a=a.wa;return a.name||a.name_cn},vqa:function(a){return(a=this.Rh(a))?this.rR(a):null},rR:function(a,b){if(!a)return null;if(!a.YF){var c=a.Xp;if(!c)return null;var c=c.wa,d=g.Tw.kT(this.Vea(a));a.YF=g.extend(d,{id:c.pid,name:c.name||c.name_cn,lnglat:a.TS,floor_details:{floor_indexs:c.floor_indexs, floor_nonas:c.floor_nonas,floor_names:c.floor_names}})}g.extend(a.YF,{floor:a.Tc});b&&b.floorPath&&(c=(c=this.mq(a,a.Tc,!0))&&c.im?this.hfa(c.im):null,g.extend(a.YF,{floorPath:c}));return a.YF},tra:function(a,b,c){a=this.mq(a,b,!0);if(!a)return null;a=a.ha;b=null;for(var d=0,e=a.length;d<e;d++)if(a[d].wa.cpid===c){b=a[d];break}return this.YP(b)},Vea:function(a){var b=this;return{getAllShops:function(c){var d=b.mq(a,c||a.Tc,!0);c=[];if(!d)return c;for(var d=d.ha,e=0,f=d.length;e<f;e++)d[e].wa.cpid&& c.push(b.YP(d[e]));return c}}},Gfa:function(a){var b=this;return{setCustomStyle:function(c,d){d=g.extend({autoRefresh:!0},d);a.gN=c?b.Kh.i2(c):null;d.autoRefresh&&b.r("featureStyleUpdate",{L:a});return this},getCustomStyle:function(){return b.Kh.QI(a.gN)},setCustomLabelStyle:function(c,d){d=g.extend({autoRefresh:!0},d);a.fN=c?b.Kh.i2(c):null;d.autoRefresh&&b.r("featureLabelStyleUpdate",{L:a});return this},getCustomLabelStyle:function(){return b.Kh.QI(a.fN)},setOptions:function(c,d){d=g.extend({autoRefresh:!0, replace:!0},d);a.vx=d.replace?c:g.extend({},a.vx,c);d.autoRefresh&&b.r("featureOptionsUpdate",{L:a});return this},disableIconRender:function(){this.setOptions({disableIconRender:!0},{replace:!1})},enableIconRender:function(){this.setOptions({disableIconRender:!1},{replace:!1})},disableLabelRender:function(){this.setOptions({disableLabelRender:!0},{replace:!1})},enableLabelRender:function(){this.setOptions({disableLabelRender:!1},{replace:!1})},getOptions:function(){return a.vx}}},YP:function(a){if(!a)return null; if(!a.g1){var b=a.wa,c=b.font_anthor_point?new g.U(b.font_anthor_point[0],b.font_anthor_point[1]):null,d=b.Pt;c||(c=g.I.yi(a.fc().Md()),c=this.sa.Qd(new g.H(c[0],c[1])));var e=g.Tw.kT(this.Gfa(a));a.g1=g.extend(e,{id:b.cpid,poiId:b.pid,building_id:d,name:b.name||b.name_cn,lnglat:c,category:this.fna[b.Kl]})}return a.g1},mq:function(a,b,c){if(!this.ES(a))return null;b=b||a.Tc;var d=null;a.ha?d=a.ha[b]:a.ha={};if(!d&&c){c=a.gv[b];if(!c)return console.warn("Missing geojson of floor",b,a),null;d=a.ha[b]= this.Tca(a,b,c);a.gv[b]=-1}return d},AT:function(a){for(var b=[Infinity,Infinity,-Infinity,-Infinity],c=0,d=a.length;c<d;c++){var e=a[c].fc();e&&g.I.extend(b,e.Md())}return{ha:a,I:b,ge:[b[0],b[1]]}},Tca:function(a,b,c){b=this.AT(this.FX(c));c=b.ha;"floor"===c[0].wa.Kl&&(b.im=c[0],b.ha=c.slice(1));a.I?g.I.extend(a.I,b.I):a.I=b.I;return b},Cea:function(a){var b=a.wa,c=1,d=a.name.split("-"),d=d[0];switch(d){case "point":if(b.poitype&&this.Kh.J5(b.poitype)){a.Zba=1;return}break;case "polygon":break;case "multipolygon":break; default:console.warn("Unknown geoType",d)}switch(b.Kl){case "building":break;case "floor":c=2;break;case "shops":c=3;break;case "pubs":case "cons":c=3;break;default:console.warn("Unknown category",b.Kl)}a.zIndex=c},FX:function(a){a=this.JY.VT(a);for(var b=0,c=a.length;b<c;b++)a[b].Wm=b,this.Cea(a[b]),a[b].Zba&&(a.splice(b,1),b--,c--);a.sort(function(a,b){var c=a.zIndex-b.zIndex;if(0!==c)return c;c=(a.wa.rank||0)-(b.wa.rank||0);return 0!==c?c:a.Wm-b.Wm});return a},Xfa:function(a){for(var b=[],c=0, d=a.length;c<d;c++)b.push(this.Yfa(a[c]));return b},Vca:function(a){var b=[],c=a.floor.floor;a.building.properties.Kl="building";c.properties.Kl="floor";b.push(c);a=a.floor;for(var c=["shops","pubs","cons"],d=0,e=c.length;d<e;d++)for(var f=a[c[d]],h=0,k=f.length;h<k;h++)b.push(f[h]);return{type:"FeatureCollection",features:b}},Ffa:function(a){switch(a){case 2:return Error("Building not found!");default:return Error("Server error")}},Yfa:function(a){var b=a.id,c=this.Rh(b);if(!c)return console.warn("Can not find: ", b),{error:Error("Can not find: "+b),result:c};if(0!==a.status)return{error:this.Ffa(a.status),result:c};var d=a.floor.floor.properties.index;c.Go||(c.Tc=c.Go=d);c.C8=null;a.floor=g.Iaa.$na(a.floor,b,d);c.gv||(c.gv={});if(!c.Xp&&a.building){b=a.building;b.properties.Kl="building";var e=this.FX(b);c.p2=this.AT(e);c.Xp=e[0];c.gI=b.properties.floor_indexs}a.floor&&(c.My[d]>=this.qi.loaded?console.warn("Floor alreay load!",d,c):(c.gv[d]=this.Vca(a,c),c.My[d]=this.qi.loaded));a=c.Xp;if(!a)return console.log("Missing building geojson", c.gv),c.Yr=this.qi.Zna,c;a=a.wa;c.TS||(c.TS=new g.U(a.centerPoint[0],a.centerPoint[1]));c.Yr=this.qi.loaded;return{error:null,result:c}},hka:function(a,b){b&&(a.an||(a.an=[]),a.an.push(b))},VS:function(a,b,c){c=c||{};"string"===typeof a&&(a={id:a});var d=this.Rh(a);d?d!==a&&g.extend(d,a):(d=g.extend({Yr:this.qi.empty,My:{}},a),this.dla(d));var e=this.wG(d);if(this.ES(d,e))return b&&setTimeout(function(){b(null,d)},0),!1;e=parseInt(e,10);if(isNaN(e))b&&b(Error("Floor should be an integer!"));else if(d.gI&& 0>d.gI.indexOf(e))b&&b(Error("Floor out of range, try these: "+d.gI));else{var f=this;a=!1;this.hka(d,function(a,d){e===f.Go&&(e=f.wG(d));a||f.ES(d,e)?b&&b(a,d):e===f.wG(d)?c.oxa?b&&b(Error("Floor request failed!"),null):f.VS(d,b,g.extend({},c,{oxa:!0})):b&&b(Error("Requested floor expired!"),null)});d.Yr<this.qi.Ke?(d.Yr=this.qi.Ke,a=!0):d.Yr===this.qi.Ke?a=!1:this.RY(d,e)<this.qi.Ke&&(d.My[e]=this.qi.Ke,a=!0);a&&this.pca([d])}},Rh:function(a){if(0===a)return null;if(!a)return console.warn("Empty building!"), null;var b=a.id;b||"string"!==typeof a||(b=a);return this.ms.get(b)},Ewa:function(a){this.ms.Cw(a)},dla:function(a){return this.ms.set(a.id,a)},wG:function(a){return a.C8||a.Tc||a.Go||this.Go},pca:function(a){g.a.isArray(a)||(a=[a]);if(this.Ux)for(var b=this.Ux,c=0,d=a.length;c<d;c++){for(var e=a[c],f=!1,h=0,k=b.length;h<k;h++)e.id===b[h].id&&(f=!0,b[h]=e);f||b.push(e)}else this.Ux=[],this.Ux.push.apply(this.Ux,a);if(!this.F0){var l=this;this.F0=setTimeout(function(){l.F0=null;l.gha(l.Ux);l.Ux.length= 0},0)}},iN:function(a,b){a&&b&&(b.Yr=this.qi.axa,b.zO=g.a.eg()+3E3);if(b&&b.an){var c=b.an;b.an=null;for(var d=0,e=c.length;d<e;d++)c[d](a,b)}this.r(a?"loaded_error":"loaded",{error:a,data:b})},Efa:function(a){var b=g.o.fd+"/v3/indoor/indoormaps?",c=[];c.push("poiid="+a.id);c.push("floor="+a.floor);c.push("version="+a.version);c.push("s=rsv3");c.push("key="+g.o.key);c.push.apply(c,["from=indoorH5Map","servicetype=unify","platform=JS","logversion=2.0","sdkversion="+g.o.Xl,"appname="+g.o.Ao]);g.o.Xa&& c.push("jscode="+g.o.Xa);return b+c.join("&")},bla:function(a){function b(b,c){b?e(b):g.a.isArray(c)?a.pya(d.Xfa(c)):e(Error("Indoor parser not return an array"))}var c=this.Efa(a),d=this,e=a.t3;setTimeout(function(){g.zF.sxa(c,b,a.t3)},0)},Qka:function(a){if(a&&a.length){for(var b=[],c=[],d=[],e=[],f=this,h,k=function(a){console.warn&&console.warn("\\u5ba4\\u5185\\u6570\\u636e\\u52a0\\u8f7d\\u89e3\\u6790\\u5931\\u8d25",a);for(var b=0,c=d.length;b<c;b++)f.iN(a,d[b])},l=0,m=a.length;l<m;l++){h=a[l].data;if(h.zO)if(g.a.eg()< h.zO){f.iN(Error("Holding errored request!"),h);continue}else h.zO=null;e.push(0);b.push(a[l].id);c.push(a[l].floor);d.push(h)}b.length&&this.bla({version:e.join(";"),id:b.join(";"),floor:c.join(";"),t3:k,pya:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];f.iN(d.error,d.result)}}})}},gha:function(a){g.a.isArray(a)||(a=[a]);if(a.length){for(var b=[],c={},d=0,e=a.length;d<e;d++){var f=a[d];"string"===typeof f&&(f=this.Rh(f));var f={data:f,id:f.id,floor:this.wG(f)},h=f.id+"_"+f.floor;c[h]?console.warn("Param duplicate", h):(c[h]=!0,b.push(f))}this.Qka(b)}}}); g.extend(g.zF,{sxa:function(a,b,c){var d=this.Oka;d||(this.Oka=d={});d[a]||(d[a]={py:[]});var e=d[a].py;e.push({succ:b,err:c});if(!d[a].txa){d[a].txa=!0;var f=new XMLHttpRequest,h=function(b,c){for(var f=0,h=e.length;f<h;f++)e[f][b]&&e[f][b].apply(this,c);d[a]=null;delete d[a]},k=function(){h("err",arguments)},l=function(a){g.pW.rma(a,function(a,b){h("succ",[a,b])})};f.onreadystatechange=function(){4===f.readyState&&(200!==f.status?k(Error("Status code not 200: "+f.status+"_"+f.statusText)):l(this.response))}; f.onerror=k;f.open("GET",a,!0);f.responseType="arraybuffer";f.send()}}});g.xp=g.q.hd.extend({A:function(a,b){g.xp.cd.A.apply(this,arguments);this.AB=!0;this.LA=new g.B.Fh(new z.B.Fh({innerOverlay:!0}),b);this.LA.Mb.set("bubble",!0)},zEa:function(){return this.LA},QH:function(a){g.xp.cd.QH.apply(this,arguments);a.vo=this.LA},bm:function(a){this.Ra||(this.Ra=!0,this.S.r("complete"));return new g.xp.DW(this,a)}});g.xp.UV=z.q.hd.extend({A:function(){g.xp.UV.cd.A.apply(this,arguments);this.AB=!0},cg:function(a){return new g.xp(this,a)},hg:function(){}}); g.xp.DW=g.M.Zb.extend({A:function(){g.xp.DW.cd.A.apply(this,arguments)},pc:function(a){a=this.P=a.P;this.zoom=a.zoom;this.T=a.T},vj:function(){return[]}});g.rW=g.M.canvas.hd.extend({ka:[g.va],A:function(){g.rW.cd.A.apply(this,arguments)},Owa:function(a){var b={},c=[],d,e,f;d=0;for(e=a.length;d<e;d++){var h=a[d];f=h.name.split("-")[0];h.style&&(h.style.ln?"polygon"!==f&&"multipolygon"!==f?console.warn("Not polygon"):(b[h.zIndex]||(b[h.zIndex]={zIndex:h.zIndex,E9:{}},c.push(b[h.zIndex])),f=b[h.zIndex].E9,f[h.style.ln]||(f[h.style.ln]=[]),f[h.style.ln].push(h)):console.warn("Style missing uid",h))}c.sort(function(a,b){return a.zIndex-b.zIndex});d=0;for(e= c.length;d<e;d++){f=c[d].E9;for(var k in f)f.hasOwnProperty(k)&&this.Kka(f[k])}},ida:function(a,b){for(var c=null,d=0,e=b.length;d<e;d+=1){var f=this.ig(b[d]),f=[Math.round(f[0])+0.5,Math.round(f[1])+0.5];0<d?a.lineTo(f[0],f[1]):(c=f,a.moveTo(f[0],f[1]))}c&&a.lineTo(c[0],c[1])},hda:function(a,b){for(var c=0,d=b.length;c<d;c+=1)this.ida(a,b[c].za)},gda:function(a,b){for(var c=0,d=b.length;c<d;c+=1)this.hda(a,b[c].Rf)},Kka:function(a,b){b||(b=a[0].style);var c=this.Bb,d=b.strokeColor,e=b.strokeWeight, f=b.strokeOpacity,h=b.fillColor,k=b.fillOpacity,l=b.strokeStyle,m=b.strokeDasharray,n,p;c.save();d&&(c.strokeStyle=d,e&&(c.lineWidth=e),c.lineCap="butt",c.lineJoin=b.lineJoin||"miter");h&&(c.fillStyle=h);c.beginPath();for(var e=0,q=a.length;e<q;e++){p=a[e].fc();if(p instanceof g.Aa.Ec||p.F4)p=[p];else if(p instanceof g.Aa.zp||p.Y3)p=p.ke;else{console.warn("Unknown geometry",p);continue}this.gda(c,p)}c.closePath();h&&(k!==n&&(n=c.globalAlpha=k),c.fill());d&&(f!==n&&(c.globalAlpha=f),"dashed"===l&& c.setLineDash&&c.setLineDash(m),c.stroke());c.restore()},LK:function(a){return this.Owa(a)}});g.Jaa=g.da.extend({ka:[g.va],A:function(a,b){this.sa=a;this.Fb=b;this.kga=g.a.bind(this.Xt,this);this.Kh=g.AF;this.g9(1);this.Kza=!0;this.a9();this.c9();this.qN=!1},g9:function(a){this.lh=a;this.uo=Math.log(this.lh)/Math.log(2)},a9:function(a){this.lga=a||new g.H(0,0)},c9:function(a){this.WZ=a||new g.H(0,0)},Dxa:function(a){this.qN=a},NEa:function(){return this.lh},cha:function(a){return this.sa.Cb(a)},Xt:function(){},lH:function(a){a.canvas=a.canvas||a.Ba;this.$a&&this.$a.xa===a.canvas||(this.$a= new g.rW(a.canvas,this.kga));!1!==a.kh?g.f.zm(this.$a.xa,a.width,a.height,!0):a.width!==a.canvas.width?console.warn("width not match"):a.height!==a.canvas.height&&console.warn("height not match");this.$a.ge=a.ge;this.$a.T=a.T},WM:function(a,b,c,d){d=g.extend({split:!0,UU:!0,margin:{x:0,y:0}},d);c=c||a.Tc;this.gwa(a,c,b,d);if(!a.bv)return null;var e=a.bv[c];if(!e)return null;var e=e.RV[b],f=this.Fb.mq(a,c,!0);if(!f)return null;c=e.labels;var h=e.eh;h<e.total&&(c=c.slice(0,e.eh));if(!c||!c.length)return null; var k=d.I||f.I,f=d.ge||f.ge,l=Math.pow(2,20-b),m=d.margin,n=Math.ceil((k[2]-k[0])/l)+2*m.x,k=Math.ceil((k[3]-k[1])/l)+2*m.y,f=[f[0]-m.x*l,f[1]-m.y*l];b={Vv:new g.Mk,zoom:b,T:l,ge:f,width:n,height:k};d.canvas&&(b.Ba=d.canvas);b=this.nP(b,{split:d.split,Ly:d.split?50:0,LI:d.split?50:0});k=0;for(f=b.length;k<f;k++){var p;d.xs&&g.a.isArray(d.xs)&&d.xs[k]&&(b[k].Ba=d.xs[k].Ba,g.f.zm(b[k].Ba,b[k].width,b[k].height,!0));b[k].Ba?(p=b[k].Ba,!0===d.kh&&g.f.zm(p,b[k].width,b[k].height,!0)):this.tB||(p=this.jG(), g.f.zm(p,b[k].width,b[k].height,!0),b[k].Ba=p);l=p?p.getContext("2d"):null;this.Hka(c,g.extend({},b[k],{yD:!d.jT,canvas:p,cf:l}));h<e.total?g.extend(b[k],{status:0,eh:h,total:e.total}):(b[k].status=1,b[k].Vv=null)}d.jT&&(a.bv=null);return b},vY:function(a,b,c){c=g.extend({},c);var d=a.wa;return"label"===c.tt&&(!(20===d.zoom_max&&20<b-this.uo)&&d.zoom_max&&b-this.uo>d.zoom_max||d.zoom_min&&b-this.uo<d.zoom_min)?!1:this.EE(a,b,c)?!0:!1},xN:function(a,b,c){if(a.filter)return a.filter(b,c);for(var d= [],e=0,f=a.length;e<f;e++)!1!==b.call(c,a[e],e)&&d.push(a[e]);return d},Dea:function(a,b){if(!a)return a;var c=this.xN(a,function(a){return this.vY(a.L,b,{tt:"label"})?(a=a.L.xh)&&(a.fontSize||a.fg)?!0:!1:!1},this);return c.length===a.length?a:c},wY:function(a,b){if(!a)return a;var c=this.xN(a,function(a){return 0>a.name.indexOf("polygon")||!this.vY(a,b,{tt:"polygon"})||!a.style?!1:!0},this);return c.length===a.length?a:c},dY:function(a,b,c,d){d=g.extend({split:!0,margin:{x:10,y:10}},d);var e=d.I|| a.I,f=d.ge||a.ge,h=Math.pow(2,20-c),k=d.margin,l=Math.ceil((e[2]-e[0])/h)+2*k.x,e=Math.ceil((e[3]-e[1])/h)+2*k.y,f=[f[0]-k.x*h,f[1]-k.y*h];c=this.nP({zoom:c,T:h,ge:f,width:l,height:e},{split:d.split});f=0;for(h=c.length;f<h;f++)c[f].Ba=d.canvas||this.jG(),this.lH(g.extend({},c[f],{canvas:c[f].Ba,kh:d.kh})),this.$a.LK(b||a.ha);return c},Qda:function(a,b,c){var d=this.Fb.AT(a);return d?this.dY(d,a,b,c):null},fY:function(a,b,c,d){c=c||a.Tc;a=this.Fb.mq(a,c,!0);return a&&a.im?(c=this.wY([a.im],b))&&c.length? this.dY(a,c,b,d):null:null},nP:function(a,b){b=g.extend({Ly:0,LI:0,maxWidth:b.split?g.l.ba?512:1536:9999999,maxHeight:b.split?g.l.ba?512:1536:9999999},b);for(var c=b.maxHeight,d=a.width,e=a.height,f=a.T,h=a.ge,k=Math.ceil(d/b.maxWidth),l=Math.round(d/k),c=Math.ceil(e/c),m=Math.round(e/c),n=[],p=0;p<k;p++)for(var q=0;q<c;q++){var r=p*l,s=Math.min(d,(p+1)*l),u=q*m,v=Math.min(e,(q+1)*m),w=[h[0]+r*f,h[1]+u*f],t=[h[0]+s*f,h[1]+v*f];n.push(g.extend({},a,{width:s-r+2*b.Ly,height:v-u+2*b.LI,ge:[w[0]-b.Ly* f,w[1]-b.LI*f],Td:new g.Xf([w[0]-b.Ly*f,w[1]-b.LI*f,t[0]+b.Ly*f,t[1]+b.Ly*f])}))}return n},Bea:function(a,b){return this.xN(a,function(a){a.bY||(a.bY=new g.Xf(a.fc().Md()));return b.Td.$g(a.bY)?!0:!1})},eY:function(a,b,c,d){c=c||a.Tc;var e=this.Fb.mq(a,c,!0);if(!e)return null;var f=this.wY(e.ha,b);if(!f||!f.length)return null;this.r("willRenderFloorPolygonFeatures",{zoom:b,floor:c,WCa:a,ha:f});d=g.extend({split:!0,UU:!0,margin:{x:10,y:10}},d);c=d.I||e.I;var e=d.ge||e.ge,h=Math.pow(2,20-b),k=d.margin, l=Math.ceil((c[2]-c[0])/h)+2*k.x;c=Math.ceil((c[3]-c[1])/h)+2*k.y;e=[e[0]-k.x*h,e[1]-k.y*h];b={zoom:b,T:h,ge:e,width:l,height:c};d.canvas&&(b.Ba=d.canvas);b=this.nP(b,{split:d.split});c=0;for(e=b.length;c<e;c++)h=this.Bea(f,b[c]),h.length&&(g.extend(b[c],{status:0,ha:h,eh:0,total:h.length}),d.xs&&g.a.isArray(d.xs)&&d.xs[c]&&(b[c].Ba=d.xs[c].Ba,g.f.zm(b[c].Ba,b[c].width,b[c].height,!0)),d.UU||!b[c].Ba?this.vla(b[c],a,b[c].total+1):(this.lH(g.extend({},b[c],{kh:d.kh})),this.$a.LK(h)));return b},Lea:function(a){a.Np&& (a=a.Np);var b=a.ha.slice(0,a.eh);this.WX(a);a.Ba=this.jG();this.lH({kh:!0,canvas:a.Ba,width:a.width,height:a.height,zoom:a.zoom,ge:a.ge,T:a.T});this.$a.LK(b);return a.Ba},WX:function(a){a.eh>=a.total&&(a.status=1,a.ha=null)},jfa:function(){this.CY||(this.CY=g.a.bind(this.Lea,this));return this.CY},vla:function(a,b,c){c||(c=g.l.ba?300:1E3);b=a.eh;c=Math.min(b+c,a.total);var d=a.ha;b>=c||!d?a.status=1:(a.eh=c,a.Ba?"function"!==typeof a.Ba&&(this.lH(g.extend({},a,{kh:!1})),this.$a.LK(d.slice(b,c)), this.WX(a)):a.Ba=this.jfa(),b=!0,a.eh<a.total?(a.Hp||(a.Hp=0),a.eh-a.Hp<a.total/5&&(b=!1)):a.status=1,b&&!0!==a.V6&&a.Hp!==a.eh&&(a.Hp=a.eh,this.r("render",{type:"floor"})))},vG:function(a,b){return a+"_"+b},E4:function(a,b){if(!a)return null;if(a.zoom===b)return a;g.a.isArray(a)||(a=[a]);for(var c=[],d=0,e=a.length;d<e;d++)c.push(g.extend({},a[d],{Np:a[d],width:Math.round(a[d].width*Math.pow(2,b-a[d].zoom)),height:Math.round(a[d].height*Math.pow(2,b-a[d].zoom))}));return c},Jea:function(a,b,c){if(!c)return null; a=a.Tc;b=Math.round(b);var d=b-2,e,f;for(e=b;20>=e;e++)if(f=this.vG(a,e),c[f])return c[f];for(e=b;e>=d;e--)if(f=this.vG(a,e),c[f])return c[f];return null},jG:function(){this.GM||(this.GM=1);var a=document.createElement("canvas");a.id="amap_indoor_c_"+this.GM;this.GM++;return a},YM:function(a,b){var c=this.jG();this.DZ=c;c.width=Math.max(300,a);c.height=Math.max(300,b);c.mG={x:0,y:0,uh:0};return c},zha:function(a,b,c){a=a.mG;a.x+=b;a.uh=Math.max(a.uh,c)},Iea:function(a,b){var c=this.DZ;c||(c=this.YM(a, b));for(var d=c.mG,d=[{x:d.x,y:d.y,uh:Math.max(d.uh,b)},{x:0,y:d.y+d.uh,uh:b}],e=0,f=d.length;e<f;e++){var h=d[e];if(h.x+a<c.width&&h.y+b<c.height)return g.extend(c.mG,h),c}return this.YM(a,b)},tda:function(a,b){var c=this.EZ;this.EZ||(c=this.EZ=(this.DZ||this.YM(100,12)).getContext("2d"));var d=this.W0(c,b);return[Math.ceil(c.measureText(a).width)+1,d.fontSize+3]},W0:function(a,b){var c=b.fontSize*this.lh,d=b.strokeColor,e=b.fillColor;a.lineWidth=2;a.font="400 "+c+\'px "Microsoft YaHei"\';a.textBaseline= "bottom";a.textAlign="start";a.strokeStyle=d;a.fillStyle=e;return{fontSize:c}},Nga:function(a){var b=[a.width,a.height],c=a.style,d=a.text,e=[3,3],e=[b[0]+e[0],b[1]+e[1]],f=this.Iea(e[0],e[1]);if(!f)return console.error("No canvas got!"),null;var h=f.getContext("2d"),k=f.mG;this.W0(h,c);h.textBaseline="bottom";c.strokeColor&&h.strokeText(d,k.x,k.y+b[1],b[0]);c.fillColor&&h.fillText(d,k.x,k.y+b[1],b[0]);g.extend(a,{x:k.x,y:k.y,style:null,text:null});a.Ba=f;this.zha(f,e[0],e[1]);return f},qfa:function(){this.VZ|| (this.VZ=g.a.bind(this.Nga,this));return this.VZ},Sda:function(a,b){if(!b.fontSize)return{Ba:null,width:0,height:0};var c=this.tda(a,b),c={style:b,text:a,width:c[0],height:c[1],xT:c[0],wT:c[1]};c.Ba=this.qfa();return c},Rda:function(a,b){b=b||a.Tc;var c=this.Fb.mq(a,b,!0);if(!c)return null;var d=[],e=[];a.Xp&&(d.push(a.Xp),c.im&&(a.Xp.PM=g.I.yi(c.im.fc().Md())));c.im&&d.push(c.im);d.push.apply(d,c.ha);for(var c=0,f=d.length;c<f;c++){var h=d[c],k=h.wa,l=h.fc().Md();if(!k.poitype||!this.Kh.J5(k.poitype)){if(!h.PM&& k.font_anthor_point){var m=this.cha(k.font_anthor_point);h.PM=[m.x,m.y]}k.rank||k.building_poi_style&&(k.rank=10);e.push({coords:h.PM||g.I.yi(l),pE:k.rank||0,L:h,wa:h.wa})}}e.sort(function(a,b){var c=b.pE-a.pE;if(0!==c)return c;var c=a.L.xh,d=b.L.xh,e=0,f=0;c&&d&&(c.fg&&(e=1),d.fg&&(f=1));return f-e});return{RV:{},labels:e}},wla:function(a,b,c,d){d||(d=g.l.ba?300:1E3);b=a.RV[c];var e=b.eh;d=Math.min(e+d,b.total);var f=b.labels;if(e>=d||!f)b.status=1;else{for(;e<d;e++){var h=f[e].L;if(!f[e].nF)f[e].nF= h.qCa={};else if(f[e].nF[c])continue;this.EE(h,c,{tt:"label"});var k=h.wa.name||h.wa.name_cn,l=h.xh;if(l){k=this.Sda.call(this,k,l);h=l.mz||[c];l.fg&&(k.fg=l.fg);for(var l=0,m=h.length;l<m;l++)f[e].nF[parseInt(h[l],10)+this.uo]=k}else console.warn("No style",f[e])}b.eh=d;c=!0;b.eh<b.total?(b.Hp||(b.Hp=0),b.eh-b.Hp<b.total/5&&(c=!1)):b.status=1;c&&!0!==a.V6&&b.Hp!==b.eh&&(b.Hp=b.eh,this.r("render",{type:"label"}))}},$ca:function(a,b){var c=a.RV,d=c[b];d||(d=this.Dea(a.labels,b),d=c[b]={total:d.length, labels:d,status:0,eh:0});d.eh===d.total&&(d.status=1)},gwa:function(a,b,c){if(b=b||a.Tc){a.bv||(a.bv={});var d=a.bv;d[b]||(d[b]=this.Rda(a,b));this.$ca(d[b],c);this.wla(g.extend({},d[b],{V6:!0}),a,c,999999999);return d[b]}},nB:function(a,b,c,d){var e=a.Tc;if(!e)return null;var f=Math.round(b)+this.uo,e=d.Qy?d.Qy.call(this,e,f):null,h=d.CD,k=e&&h?h[e]:null;(!k||k.xM)&&c&&(k=d.NC.call(this,a,f,k?{xs:k}:null))&&(k.xM&&(k.xM=null),e&&(h[e]=k));return k?f===b?k:this.E4(k,b):d.E3?(a=this.Jea(a,b,h),this.E4(a, b)):null},$qa:function(a,b,c){b=b.zoom;a.jz||(a.jz={});return this.nB(a,b,c,{CD:a.jz,Qy:this.vG,NC:function(a,b,c){return this.WM(a,b,a.Tc,c)}})},ER:function(){var a;this.Br&&(a=this.Br.SG);return a||0},ara:function(a,b){this.iga();var c=Math.round(b.zoom)+this.uo;a.jz||(a.jz={});this.WM(a,c,a.Tc);c=this.vka();if(0<this.ER())return[];if(b.Ha){for(var d=[],e=0,f=c.length;e<f;e++){var h=c[e].za;h&&b.Ha.contains(new g.H(h[0],h[1]))&&d.push(c[e])}c=d}return c},Sqa:function(a,b,c){b=b.zoom;a.hR||(a.hR= {});return this.nB(a,b,c,{E3:!0,CD:a.hR,Qy:function(b,c){return b+"_"+c+(a.rH?"_sel":"")},NC:function(a,b){return this.fY(a,b,a.Tc)}})},w3:function(a,b){if(a){b=g.extend({IC:!0},b);var c=[a.TI];b.IC&&(c.push(a.jz),a.bv=null);for(var d=0,e=c.length;d<e;d++){var f=c[d];if(f)for(var h in f)f.hasOwnProperty(h)&&(f[h].xM=!0)}}},Rqa:function(a,b,c){b=b.zoom;a.TI||(a.TI={});return(a=this.nB(a,b,c,{E3:!0,CD:a.TI,Qy:this.vG,NC:function(a,b,c){return this.eY(a,b,a.Tc,c)}}))?a:null},Qqa:function(a,b,c,d){return this.nB(a, b.zoom,!0,{CD:{},Qy:null,NC:function(a,b){return this.Qda(d.ha,b,g.extend({jT:!0,split:!1,canvas:d.canvas},d.w))}})},uN:function(a,b,c,d){var e=b.Ha,f=e.kc,h=e.Xd;return this.nB(a,b.zoom,!0,{CD:{},Qy:null,NC:function(a,b){return d.tS.call(this,a,b,a.Tc,g.extend({jT:!0,margin:{x:0,y:0},split:!1,canvas:c,I:[f.x,f.y,h.x,h.y],ge:[f.x,f.y],UU:!1},d.w))}})},kpa:function(a,b,c,d){return this.uN(a,b,c,{tS:this.WM,w:d})},ipa:function(a,b,c,d){return this.uN(a,b,c,{tS:this.fY,w:d})},hpa:function(a,b,c,d){return this.uN(a, b,c,{tS:this.eY,w:d})},yN:function(a,b,c,d,e,f,h){c*=e;d*=e;e=h.call(this,{Jm:c,uh:d,pJ:c/2,Yy:d/2,T:e});h=0;for(var k=e.length;h<k;h++){var l=[b[0]+e[h][0],b[1]+e[h][1]],l=[l[0],l[1],l[0]+c,l[1]+d];if(!f||(!a||a.contains(new g.Xf(l)))&&!f.search(l).length)return l}return null},Dfa:function(a,b,c){var d=Math.ceil((a[0]-b[0])/c);b=Math.ceil((a[1]-b[1])/c);var e=Math.round((a[2]-a[0])/c);a=Math.round((a[3]-a[1])/c);return{width:e,height:a,x:d,y:b}},iga:function(){this.tB=!0;this.ON=[]},vka:function(){this.tB= !1;var a=this.ON;this.ON=null;return a},Zca:function(a,b,c){b=a.wa;if(!b)return console.warn(a),null;var d=b.name||b.name_cn,e=b.pid,f=a.coords,h=[];a.LS&&h.push({source:a,Td:a.LS});a.mS&&h.push({Psa:!0,source:a.ee?a.ee:a,Td:a.mS});a=[];for(var k=[],l=0,m=h.length;l<m;l++){var n=h[l].source;a.push(n.Ba||n.jsa);n=[Math.round((h[l].Td[0]-f[0])/c),Math.round((h[l].Td[1]-f[1])/c),n.width,n.height,n.x||0,n.y||0,n.xT||n.width,n.wT||n.height];h[l].Psa&&(n.IZ=!0);k.push(n)}return{za:f,name:d,Ys:e,zIndex:1E4, Ed:Infinity,mk:!0,margin:2,id:b.cpid||e,uDa:b.cpid,Ca:a,aa:k}},tN:function(a,b,c,d,e,f,h){if(this.tB){if(c.Ba){"function"===typeof c.Ba&&(c.Ba(c.Np||c,{Td:d,T:e,ge:f}),c.Np&&(c=g.extend({},c,c.Np)));var k=this.Zca(c,d,e);k&&this.ON.push(k)}}else{k=this.Dfa(d,f,e);if(c.Ba){"function"===typeof c.Ba&&(c.Ba(c.Np||c,{Td:d,T:e,ge:f,Ta:k,canvas:a}),c.Np&&(c=g.extend({},c,c.Np)));if(c.Ba){var l=!0;if(h){var m=new g.Xf(0,0,a.width,a.height),n=new g.Xf(k.x,k.y,k.x+c.width,k.y+c.height);m.contains(n)||(l=!1)}l&& b.drawImage(c.Ba,c.x||0,c.y||0,c.xT||c.width,c.wT||c.height,k.x,k.y,c.width,c.height)}return k}if(c.an){var p=this,k=c.an,q=Array.prototype.slice.call(arguments,0);q.push(1);k.push(function(a,b){a||(g.extend(q[1],b),p.tN.apply(this,q))})}}},xx:function(a,b,c){return[a[0]-b[0]*c,a[1]-b[1]*c,a[2]+b[0]*c,a[3]+b[1]*c]},Lka:function(a,b){if(a.L.xh){var c=a.L.xh.$X,d=a.coords,e=this.wR(a.L,"labelSizeOffset")||this.WZ,f=Math.max(0<a.width?1:0,a.width+e.wf()),h=Math.max(0<a.height?1:0,a.height+e.ve()),e= f-a.width,k=h-a.height,d=this.yN(b.yD?b.Td:null,d,f,h,b.T,c?b.Vv:null,function(a){return[[-a.pJ,-a.Yy],[0,-a.Yy],[-a.Jm,-a.Yy]]});if(!d)return!1;c&&b.Td.$g(new g.Xf(d))&&b.Vv.Is(this.xx(d,[1,1],b.T),a);d=this.xx(d,[e/2*-1,k/2*-1],b.T);a.LS=d;this.tN(b.canvas,b.cf,a,d,b.T,b.ge,b.yD);return!0}},Gka:function(a,b){var c=a.ee;if(!c)return!1;if(a.L.xh){var d=a.L.xh.$X,e=a.coords,f=this.wR(a.L,"iconSizeOffset")||this.lga,h=Math.max(0<c.width?1:0,c.width+f.wf()),k=Math.max(0<c.height?1:0,c.height+f.ve()), f=h-c.width,l=k-c.height,m=this.yN(b.yD?b.Td:null,e,h,k,b.T,d?b.Vv:null,function(a){return[[-a.pJ,-a.Yy]]});if(!m)return!1;var n=this.wR(a.L,"labelSizeOffset")||this.WZ,p=Math.max(0<a.width?1:0,a.width+n.wf()),q=Math.max(0<a.height?1:0,a.height+n.ve()),n=p-a.width,r=q-a.height,s=null;0<p*q&&(s=this.yN(b.yD?b.Td:null,e,p,q,b.T,d?b.Vv:null,function(a){return[[-a.pJ,(0+k/2)*a.T],[(0+h/2)*a.T,-a.Yy],[-a.Jm-(0+h/2)*a.T,-a.Yy],[-a.pJ,-a.uh-(0+k/2)*a.T]]}));e=[];m&&(d&&b.Td.$g(new g.Xf(m))&&b.Vv.Is(this.xx(m, [0,0],b.T),c),m=this.xx(m,[f/2*-1,l/2*-1],b.T),a.mS=m,c.wa=a.wa,c.mS=m,c.coords=a.coords,c.IZ=!0,this.tB&&s||e.push([c,m]));s&&(d&&b.Td.$g(new g.Xf(s))&&b.Vv.Is(this.xx(s,[0,0],b.T),a),s=this.xx(s,[n/2*-1,r/2*-1],b.T),a.LS=s,e.push([a,s]));this.tB&&1<e.length&&console.warn("More than one image with _imageRenderingHolded");c=0;for(d=e.length;c<d;c++)this.tN(b.canvas,b.cf,e[c][0],e[c][1],b.T,b.ge,b.yD)}},WY:function(a){return g.o.Hb+"/images/indoor_icon/"+(1<this.lh?"36/"+a+"@2x":"18/"+a)+".png"},lea:function(a, b){var c=this.WY(a),d=document.createElement("img");d.crossOrigin="Anonymous";d.onload=function(){d.loaded=!0;b(null,this);d.onload=d.onerror=null};d.onerror=function(a){b(a,this);d.onload=d.onerror=null};d.src=c},mfa:function(a){this.Br||(this.Br={SG:0});var b=this.Br[a];if(!b){var b=this.Br[a]={status:1,fg:a,width:18*this.lh,height:18*this.lh,jsa:this.WY(a),an:[]},c=this;this.Br.SG++;this.lea(a,function(a,e){c.Br.SG--;if(!a&&(b.Ba=e,b.xT=e.width,b.wT=e.height,b.an)){var f=b.an;b.an=null;for(var h= 0,k=f.length;h<k;h++)f[h].call(c,null,b)}c.Br.SG||c.r("render",{type:"icon"})})}return b},Hka:function(a,b){if(a.length)for(var c=0,d=a.length;c<d;c++)if(a[c].nF){var e=a[c].nF[b.zoom];if(e){!this.qN&&e.fg&&(e.ee=this.mfa(e.fg));var f=!this.qN&&e.ee?this.Gka:this.Lka;a[c].p0||(a[c].p0=new g.H(a[c].coords[0],a[c].coords[1]));b.Td.contains(a[c].p0)&&(a[c].L&&this.EE(a[c].L,b.zoom,{tt:"label"}),f.call(this,g.extend({Np:e},a[c],e),b))}}},Wpa:function(a){if(a.vx){var b=a.vx;b.disableIconRender&&a.xh&& a.xh.fg&&(a.xh=g.extend({},a.xh,{fg:null}));b.disableLabelRender&&a.xh&&(a.xh=g.extend({},a.xh,{fontSize:0}))}},wR:function(a,b){return a&&a.vx?a.vx[b]:null},EE:function(a,b,c){c.tt||console.warn("triggerType not set");g.extend({tt:"polygon"},c);b-=this.uo;c=a.wa;var d=c.poitype||c.building_poi_style;d&&(a.xh=this.Kh.x4(d,b));a.fN&&(a.xh=this.Kh.G6(a.xh,a.fN));if(c.highlighted_floor_line_style)(d=this.Fb.Rh(c.Pt))?a.style=this.Kh.BR(d.rH?c.highlighted_floor_line_style:c.unhighlighted_floor_line_style, b):console.warn("Can not load: ",c);else if(c=c.regiontype||c.floor_region_type)a.style=this.Kh.ora(c,b);a.gN&&(a.style=this.Kh.G6(a.style,a.gN));this.Wpa(a);if(!a.style&&!a.xh)return!1;1!==this.lh&&a.style&&a.style.strokeWeight&&(a.style=this.Kh.fJ(a.style),a.style.strokeWeight*=this.lh);return!0}});g.qW=g.da.extend({ka:[g.va,g.$e],w:{visible:!0,zooms:[18,20],floorBarContainerStyle:null,floorListContainerStyle:null},A:function(a){g.a.vb(this,a);this.j={};this.fP();this.setOptions(this.w);this.OY()},setOptions:function(a){this.kf(a)},show:function(){this.setOptions({visible:!0})},hide:function(){this.setOptions({visible:!1})},visibleChanged:function(){var a=this.get("visible");g.f.ab(this.j.K,{display:a?"block":"none"});a&&(a=this.j.K.co)&&this.bC(a)},floorDataChanged:function(){var a=this.get("floorData"); this.ska(a)},Lga:function(){return!!this.get("visible")},zu:function(a,b){this.map=a;b.appendChild(this.j.K);this.vf=b;this.fn()},Yv:function(){this.mn();this.vf.removeChild(this.j.K);this.j={};this.map=this.vf=null},fn:function(){this.Va={};for(var a="click mouseover mouseout mousedown mouseup touchstart touchend touchcancel mousewheel".split(" "),b=0,c=a.length;b<c;b++)this.Va[a[b]]=g.event.Y(this.j.K,a[b],this.Ufa,this)},OM:function(a){if(a){var b=this;setTimeout(function(){a.call(b,b.ZF)},0)}}, OY:function(a){if(this.ZF)this.OM(a);else{var b=function(a){a.TG&&(clearTimeout(a.TG),a.TG=null);a.a_&&a.lO&&(a.lO.apply(this,arguments),a.a_=!1)},c={"mousewheel DOMMouseScroll":{"*":function(a,b){g.F.stopPropagation(b);var c=0;b.wheelDelta?(c=120,g.l.pz&&(c=120===Math.abs(b.wheelDelta)?400:240),c=b.wheelDelta/c,window.opera&&g.a.Qh(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c)):b.detail&&(c=-b.detail);this.vha(c)}},mousedown:{"floor-nav":function(a){a.kO=!1;var b=arguments, c=this;a.TG=setTimeout(function(){a.TG=null;a.kO=!0;a.mO&&(a.mO.apply(c,b),a.a_=!0)},1E3)}},mouseup:{"floor-nav":function(){b.apply(this,arguments)}},mouseover:{"floor-nav":function(a){g.f.Wa(a,"hover")}},mouseout:{"floor-nav":function(a){g.f.fb(a,"hover");b.apply(this,arguments)}},click:{"floor-plus":function(a){a.kO||this.m_(1)},"floor-minus":function(a){a.kO||this.m_(-1)},"floor-nonas":function(a){this.Mea(a.parentNode)}}};if(g.l.ba&&g.l.Uf){var d=this;this.$x=!0;g.ub.load("AMap.IndoorMapTouch", function(){d.ZF=c;d.yga();d.OM(a)})}else this.ZF=c,this.OM(a)}},Ufa:function(a){var b=a.target||a.target||a.srcElement,c=a.type;if(b){var d=[b,a];this.OY(function(a){for(var f in a)if(a.hasOwnProperty(f)&&!(0>f.split(" ").indexOf(c))){var h=a[f],k;for(k in h)("*"===k||g.f.An(b,k))&&h[k].apply(this,d)}})}},DN:function(a,b){var c=this.j.K.Nea,d=c.indexOf(a);if(0>d)console.warn("Can not found floor: ",a,c);else if(d+=b,!(0>d||d>=c.length))return{id:d,dv:c[d]}},m_:function(a){(a=this.DN(this.j.K.co,a))&& this.uP(a.dv)},vha:function(a){0<a?this.vP(null,!0):this.wP(null,!0)},Mea:function(a){a.zr!==this.j.K.co&&this.uP(a.zr)},uP:function(a){this.Ala("floorChanged",{dv:a,Co:this.j.K.Fp})},Ala:function(a,b){this.r(a,b)},mn:function(){this.hC();if(this.Va)for(var a in this.Va)this.Va.hasOwnProperty(a)&&g.event.removeListener(this.Va[a])},fda:function(){var a=document.createElement("div");a.className="floor-btn floor-nav floor-plus";a.innerHTML="+";a.mO=function(){this.vP()};a.lO=function(){this.hC()};return a}, bda:function(){var a=document.createElement("div");a.className="floor-btn floor-nav floor-minus";a.innerHTML="-";a.mO=function(){this.wP()};a.lO=function(){this.hC()};return a},eCa:function(){return this.j.K.co},dCa:function(){return this.j.K.Fp},rG:function(a){var b=null;this.zN(function(c){if(c.zr===a)return b=c,!1});return b},Z8:function(a,b,c){if(this.j.K.Fp===a){a=this.rG(b);if(!a)return!1;this.rca(a,!c);c&&this.bC(b)}},rca:function(a,b){if(!a)return!1;var c=this.Gea(a,"amap-indrm-loader");b? c&&c.parentNode.removeChild(c):c||(c=document.createElement("div"),c.className="amap-indrm-loader",a.appendChild(c));this.wo(a,"with-indrm-loader",!b);this.wo(this.j.K,"with-indrm-loader",!b);return!0},Gea:function(a,b){var c=null;this.EY(a,function(a){if(g.f.An(a,b))return c=a,!1},b);return c},EY:function(a,b,c){a=Array.prototype.slice.call(a.childNodes,0);for(var d=0,e=a.length;d<e;d++){var f=a[d];if(f&&(!c||g.f.An(f,c))&&!1===b.call(this,f,d))break}},zN:function(a){this.EY(this.j.ys,a,"floor-list-item")}, Nxa:function(a,b){this.j.K.Fp!==a?console.warn("building id not match"):(this.zN(function(a){this.wo(a,"selected",a.zr===b)}),this.j.K.co=b,this.uka(),this.bC(b))},kka:function(a){var b=a.offsetLeft,c=a.offsetTop;do if(a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;else break;while(1);return{left:b,top:c}},aG:function(a){if(!a.getBoundingClientRect)return this.kka(a);a=a.getBoundingClientRect();var b=document.documentElement;return{top:a.top+b.scrollTop,left:a.left+b.scrollLeft}},$F:function(a){return a.offsetHeight|| a.clientHeight||0},Fga:function(a){var b=document.body;if(b.contains)return b.contains(a);for(;a;){if(a===b)return!0;a=a.parentNode}return!1},vP:function(a,b){if(g.f.An(this.j.K,"can-scroll-up")){var c=this.j.K;a||(a=c.R0||c.co);var d=this.DN(a,1);if(d&&(this.bC(d.dv),!b)){this.hC();var e=this;e.EH=setTimeout(function(){e.vP(d.dv)},170)}}},wP:function(a,b){if(g.f.An(this.j.K,"can-scroll-down")){var c=this.j.K;a||(a=c.R0||c.co);var d=this.DN(a,-1);if(d&&(this.bC(d.dv),!b)){var e=this;this.hC();e.EH= setTimeout(function(){e.wP(d.dv)},170)}}},hC:function(){this.EH&&(clearTimeout(this.EH),this.EH=null)},ZBa:function(a){return g.Tw.FQ(a)},wX:function(a,b){if(!g.l.ba)return g.Tw.V1(a,b)},$Y:function(a){return this.aG(a).top-this.aG(this.j.ys).top},ZY:function(a,b){var c=this.rG(a);if(!c)return!1;var d=this.$F(this.j.ys),e=this.$F(this.j.gR),f=this.$F(c),c=this.$Y(c)-e/2+f/2;b=g.extend({gT:this.$x?-f:0,dT:d-e+(this.$x?f:0)},b);return{sta:d,Sma:e,gT:b.gT,dT:b.dT,L9:c}},bC:function(a){if(this.Lga()){var b= this.rG(a);if(!b)console.warn("Can not find floor: ",a);else if(this.Fga(b)){var b=this.j.ys,c=this.ZY(a),d=this.$x||c.sta>c.Sma;this.wo(this.j.K,"can-scroll",d);this.j.K.R0=a;d&&(a=c.L9,d=c.gT,c=c.dT,a<d?a=d:a>c&&(a=c),d=-parseInt(b.style.marginTop,10)||0,5<Math.abs(d-a)&&(this.wX(b),b.style.marginTop=-a+"px"),d=-parseInt(b.style.marginTop,10)||0,this.wo(this.j.K,"can-scroll-down",d<c),this.wo(this.j.K,"can-scroll-up",0<d));this.Q0()}}},Q0:function(a){if(!this.$x){arguments.length||(a=this.j.K.co); var b=this.rG(a);if(!b)return!1;var c=this.j.gR,d=this.j.ys;this.wX(this.j.DU);var e=this.aG(c).top-this.aG(this.j.K).top,b=e+this.$Y(b)+(parseInt(d.style.marginTop,10)||0);this.j.DU.style.top=b+"px";this.j.DU.style.display=b>this.$F(c)+e+5||b<e-15?"none":""}},uka:function(){var a=this.j.K,b=a.co,c=a.qha;this.wo(this.j.Q7,"disabled",b===a.oha);this.wo(this.j.J6,"disabled",b===c)},wo:function(a,b,c){a&&(c?g.f.Wa:g.f.fb).call(g.f,a,b)},fP:function(){if(this.j.K){var a=this.j.K;a.innerHTML="";a.className= "amap-indoormap-floorbar-control";a.Fp=null}else this.j.K=g.f.create("div",null,"amap-indoormap-floorbar-control")},ska:function(a){var b=this.j.K;a?(a.id!==b.Fp&&this.Uca(a),b.co=a.Tc,this.Nxa(b.Fp,b.co)):this.fP()},V0:function(a,b){b?a.setAttribute("title",b):a.removeAttribute("title")},Uca:function(a){this.fP();var b=this.j.K;this.wo(b,"is-mobile",!!g.l.ba);this.wo(b,"touch-scroll",this.$x);var c=a.Zpa,d=c.$pa,e=c.iR.length,f=e>(this.$x?Infinity:5),h=document.createDocumentFragment(),k=g.f.create("div", h,"panel-box");this.V0(b,c.name_cn);this.j.DU=g.f.create("div",k,"select-dock");f&&(this.j.Q7=this.fda(),k.appendChild(this.j.Q7));var l=document.createElement("ul");l.className="floor-list";for(var m=e-1;0<=m;m--){var n=document.createElement("li");n.className="floor-list-item";n.innerHTML=\'<div class="floor-btn floor-nonas">\'+c.aqa[m]+"</div>";n.zr=c.iR[m];0===m?b.qha=n.zr:m===e-1&&(b.oha=n.zr);this.V0(n,d[m]);l.appendChild(n)}b.vCa=0;b.uCa=e-1;b.Nea=[].concat(c.iR);c=document.createElement("div"); c.className="floor-list-box";c.appendChild(l);k.appendChild(c);f&&(this.j.J6=this.bda(),k.appendChild(this.j.J6));b.Fp=a.id;b.appendChild(h);this.j.ys=l;this.j.gR=c;this.wca()},wca:function(){var a={floorBarContainer:this.j.K,floorListContainer:this.j.gR},b;for(b in a)if(a.hasOwnProperty(b)){var c=this.get(b+"Style");c&&this.xca(a[b],c)}},xca:function(a,b){if(a)for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])}});z.q.Gaa=z.q.Zb.extend({A:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.CLASS_NAME="AMap.IndoorMap";g.c.ya(this,a);if(!g.l.kl)return null;this.Wb=a;this.Yt=!1},mapChanged:function(){var a=this;if(!this.Yt&&void 0===this.mha){var b="3D"===this.get("map").get("viewMode")&&g.l.sp?"3D":"2D",c=function(){var c="3D"===b?z.q.Jt:z.q.Faa;a.A=a.initialize=c.prototype.A;g.a.Lxa(a,c.prototype);c.call(a,a.Wb);a.Wb=null;a.Yt=!0};"3D"===b?g.ub.load("AMap.IndoorMap3D",c):c();this.mha= !0}}});window.AMap.IndoorMap=z.q.Gaa; z.q.QL={w:{visible:!0,opacity:1,zIndex:11,featureszIndex:null,zooms:[17,25],hideFloorBar:!1,bubble:"true",alwaysShow:!1,disableIconRender:!1,disableLabelRender:!1,disableHoverMarker:!1,autoLoadBuildingsInTile:!0},A:function(a){var b=this;this.CLASS_NAME="AMap.IndoorMap";g.c.ya(this,a);this.LAYER_NAME="IndoorLayer";if(!g.l.kl)return null;this.MG=0;this.dP=!g.l.ba;this.Bx=g.f.create("div");this.zZ=g.f.create("div",this.Bx,"floor-outline-image-con");this.uB=g.f.create("div",this.Bx,"floor-image-con"); this.RN=g.f.create("div",this.Bx,"highlight-image-con");this.FG=g.f.create("div",this.Bx,"label-image-con");this.constructor.cd.A.call(this,this.Bx,a);g.f.Wa(this.Bx,"amap-indoor-map");this.$f=new z.B.wb({innerOverlay:!0,offset:new g.H(0,0),content:" ",noSelect:!0,visible:!1});this.$f.Da=!0;this.sa=this.mB();this.yc=null;this.Fb=this._dataMgr=new g.zF(this.sa);this.Fb.h("loaded",function(){b.so()},this);this.Fb.h("featureStyleUpdate",this.A_,this);this.Fb.h("featureLabelStyleUpdate",this.y_,this); this.Fb.h("featureOptionsUpdate",this.z_,this);this.zX=1;this.aj=void 0;this.Kh=g.AF;this.fea=this.Kh.fJ({strokeColor:"rgba(224,180,135,1)",fillColor:"rgba(224,180,135,0.5)"});this.Yt=!0;this.sa&&this.mapChanged();this.QP=this.getRenderLabels;g.a.zb(this)},setzIndex:function(a){g.c.add(this,"setzIndex");this.constructor.cd.setzIndex.apply(this,arguments);this.io&&this.io.setzIndex(this.get("featureszIndex")||a)},i7:function(a){this.QB(a.q2)},J$:function(){return!!this.get("autoLoadBuildingsInTile")}, showIndoorMap:function(a,b,c,d){g.c.add(this,"showIndoorMap");var e=this;if(this.kI()){var f=arguments[arguments.length-1],h=null;f&&"function"===typeof f&&(h=f);h===b&&(b=null);h===c&&(c=null);this.ZU(a,b,function(a,b,f){if(!a){var n=(e.get("zooms")||[18,20])[0],n=Math.max(e.sa.get("zoom"),n),p=b.TS,q=null;c&&(q=e.Fb.tra(b,b.Tc,c));q&&q.lnglat&&(p=q.lnglat);d||e.sa.setZoomAndCenter(n,p,!0);e.kI()&&e.so();e.vu(b);q&&(f.shop=q)}g.event.O(e,"floor_complete",f);h&&h(a,f)},{i$:!1})}},showFloor:function(a, b){g.c.add(this,"showFloor");if(!this.Wl)return!1;this.showIndoorMap(this.Wl,a,void 0,b)},showFloorBar:function(){g.c.add(this,"showFloorBar");this.set("hideFloorBar",!1)},hideFloorBar:function(){g.c.add(this,"hideFloorBar");this.set("hideFloorBar",!0)},hideFloorBarChanged:function(){this.nu()},featureszIndexChanged:function(){this.io&&this.io.setzIndex(this.get("featureszIndex")||this.get("zIndex"))},visibleChanged:function(){var a=this.constructor.cd.visibleChanged;a&&a.apply(this,arguments);this.$O()}, disableLabelRenderChanged:function(){this.so()},hideLabels:function(){g.c.add(this,"hideLabels");this.set("disableLabelRender",!0)},showLabels:function(){g.c.add(this,"showLabels");this.set("disableLabelRender",!1)},cursorChanged:function(){this.kP(this.get("cursor"))},kP:function(a){this.of&&this.of.LA.Mb.set("cursor",a)},getSelectedBuildingId:function(){g.c.add(this,"getSelectedBuildingId");return this.Wl||null},getSelectedBuilding:function(a){g.c.add(this,"getSelectedBuilding");var b=this.Wl|| null;return b?(b=this.Fb.Rh(b))?this.Fb.rR(b,a):null:null},hg:function(){this.yc&&(this.yc.pb=[]);this.mY()},A_:function(a){this.refreshFloorStyle(a.L.wa.Pt,{IC:!1})},y_:function(a){this.refreshFloorStyle(a.L.wa.Pt,{IC:!0})},z_:function(a){this.refreshFloorStyle(a.L.wa.Pt,{IC:!0})},refreshFloorStyle:function(a,b){if(this.Fb){b=g.extend({IC:!0},b);if(a)this.Rd.w3(this.Fb.Rh({id:a}),b);else{var c=this;this.Fb.forEach(function(a){c.Rd.w3(a,b)})}this.eG();this.so()}},iconSizeOffsetChanged:function(){this.Rd&& (this.Rd.a9(this.get("iconSizeOffset")),this.refreshFloorStyle())},disableIconRenderChanged:function(){this.Rd&&(this.Rd.Dxa(this.get("disableIconRender")),this.refreshFloorStyle())},labelSizeOffsetChanged:function(){this.Rd&&(this.Rd.c9(this.get("labelSizeOffset")),this.refreshFloorStyle())},mapChanged:function(){if(this.Yt){var a=this.mB();this.yc&&this.sa===a||(this.constructor.cd.mapChanged.apply(this,arguments),this.mY(),this.sa=a,this.yc=this.Yea(),this.Ym()?this.Aca():!this.sa||this.yc||this.H1|| (this.H1=!0,this.sa.h("coreMapCreated",function(){this.H1=!1;this.mapChanged()},this,!0)))}},mY:function(){this.sa&&(this.sa.G("mousemove",this.GB,this),this.sa.G("zoomchange",this.pO,this),this.sa.G("movestart",this.f_,this),this.sa.G("mapmove",this.g_,this),this.sa.G("moveend",this.e_,this),this.sa.G("dragstart",this.d_,this),this.sa.G("dragend",this.c_,this),this.sa.G("click",this.UG,this),this.sa.G("dblclick",this.b_,this));this.Qk&&(this.sa&&this.sa.removeControl(this.Qk),this.Qk=null);this.of&& (this.of.clear(),this.Aka(),this.of=null);this.Rd&&this.Rd.G("render",this.oH,this);this.aj=!0;g.Nj&&(g.Nj.G("vecTileParsed.builds.found",this.i7,this),g.Nj.b9(!1,this.sa));this.wx(null);this.$f.setMap(null);this.nu();this.yc=this.sa=null;this.eG()},Aca:function(){this.sa.h("zoomchange",this.pO,this);this.sa.h("moveend",this.e_,this);this.sa.h("mapmove",this.g_,this);this.sa.h("movestart",this.f_,this);this.sa.h("dragstart",this.d_,this);this.sa.h("dragend",this.c_,this);this.sa.h("click",this.UG, this);this.sa.h("dblclick",this.b_,this);this.sa.h("mousemove",this.GB,this);this.pO();this.$O();this.NA();this.Fb.vc(this.sa);"IndoorLayer"===this.LAYER_NAME&&(this.io=new g.xp.UV({zIndex:this.get("featureszIndex")||this.getzIndex(),map:this.sa,innerLayer:!0}),this.of=this.io.q,this.nca());g.Nj&&this.J$()&&g.Nj.h("vecTileParsed.builds.found",this.i7,this);this.cursorChanged();this.Rd=new g.Jaa(this.sa,this.Fb);this.Rd.g9(g.l.Kc?2:1);this.Rd.Kza=this.dP;this.Rd.h("render",this.oH,this);this.nu(); this.Vfa();this.disableHoverMarkerChanged();this.iconSizeOffsetChanged();this.labelSizeOffsetChanged();this.disableIconRenderChanged()},disableHoverMarkerChanged:function(){this.$f&&this.$f.setMap(this.aj||this.get("disableHoverMarker")?null:this.sa)},Aka:function(){this.hO(!1);var a=this.io;setTimeout(function(){a.setMap(null)},0);this.of=this.io=null},nca:function(){this.io.setMap(this.sa);this.of=this.io.q;this.hO(!0)},hO:function(a){if(this.of){var b=this.of.LA,c=this.get("indoorEvents")||[]; g.a.isArray(c)?(0>c.indexOf("click")&&c.push("click"),g.l.ba||(0>c.indexOf("mouseover")&&c.push("mouseover"),0>c.indexOf("mouseout")&&c.push("mouseout"))):c=c.split(" ");a=a?b.h:b.G;for(var d=0,e=c.length;d<e;d++)a.call(b,c[d],this.Qfa,this)}},pO:function(){if(this.Ym()){var a=this.sa.get("zoom");if(g.l.ba){var b=this,c=a+this.Rd?this.Rd.uo:0;this.Fb.forEach(function(a){b.Dda(a.id,c)})}this.of&&this.of.M&&Math.floor(a)===a&&this.of.M.zoom!==a&&(this.of.M.zoom=a,this.of.M.T=this.sa.nj.oq(a));this.nu({b5:!0}); this.$O()}},GZ:function(a,b){if(!a)return!1;"object"!==typeof a&&(a=this.Fb.Rh({id:a}));var c=this.HN(),d=this.Fb.lm(a);if(b&&this.sa&&"IndoorLayer"===this.LAYER_NAME){var e=this.sa.getResolution();b=b.Pd(e);c=new g.Xf(c.kc.add(b),c.Xd.bb(b))}return c&&d?c.$g(d,0):!1},Dda:function(a,b){var c=this.Fb.Rh({id:a});this.GZ(c)||this.VX(a,b)},VX:function(a,b){var c=this.Fb.Rh({id:a});c&&this.Fb.Dna(c,void 0,b)},YN:function(){return 300>g.a.eg()-this.MG},g_:function(){this.MG=g.a.eg()},f_:function(){this.MG= g.a.eg()},e_:function(){this.MG=0;this.nu({b5:!0})},Bca:function(){var a=this.getVisibleBuildingIds();a&&1===a.length&&this.setSelectedBuildingId(a[0])},d_:function(){this.KZ=!0},c_:function(){this.KZ=!1},jga:function(){this.uZ=!0;var a=this;setTimeout(function(){a.uZ=!1},0)},UG:function(){this.uZ||(this.r("map_click"),this.gea({id:0},200))},b_:function(){this.jQ()},gea:function(a,b){var c=this;this.jQ();this.pG=setTimeout(function(){c.pG=null;c.vu(a)},b||300)},jQ:function(){this.pG&&(clearTimeout(this.pG), this.pG=null)},$O:function(){var a=!this.Ym()||!this.get("visible");if(!a&&this.sa)var a=this.sa.get("zoom"),b=this.get("zooms"),a=a<b[0]||a>b[1];this.aj!==a&&(this.eG(),this.aj=a,g.Nj&&g.Nj.b9(!this.aj,this.sa),this.disableHoverMarkerChanged(),this.hO(!this.aj),this.nu(),this.aj&&(this.wx(null),this.JH(null)),this.oH());this.NA()},setSelectedBuildingId:function(a){g.c.add(this,"setSelectedBuildingId");this.vu({id:a})},vu:function(a){this.jQ();if(this.Wl!==a.id){if(this.Wl){var b=this.Fb.Rh(this.Wl); b&&(b.rH=!1,this.VX(b.id))}this.r("selectedBuildingIdChanged",{oldId:this.Wl,newId:a.id});this.Wl=a.id;if(a=this.Fb.Rh(a.id))a.rH=!0;this.so()}this.nu()},NA:function(){if(this.sa&&!g.l.ba)for(var a=this.sa.get("zoom"),b=[this.sa],c=!this.aj&&this.TB&&0<this.TB.length,d=0,e=b.length;d<e;d++)if(b[d]){var f=b[d].get("zooms");f&&(c?20>f[1]&&(b[d].set("zooms",[f[0],20]),b[d].mva=f[1]):18<f[1]&&a<f[1]&&b[d].set("zooms",[f[0],b[d].mva||f[1]]))}},ifa:function(a){if(!this.Wl)return!1;var b=this.Fb.Rh(this.Wl); return!b||!b.gv||a&&a.b5&&!this.GZ(b,new g.H(30,30))?!1:{id:b.id,Tc:b.Tc||b.Go,Zpa:this.Wca(b.Xp.wa)}},Wca:function(a){return g.extend({},a,{iR:a.floor_indexs,aqa:a.floor_nonas,$pa:a.floor_names})},tga:function(){var a=this.Qk;a&&(a.h("floorChanged",function(a){this.ZU(a.Co,a.dv,function(){})},this),a.h("visible",function(){a&&this.r("floorBarVisibleChanged",{$Da:a,visible:a.get("visible")})},this))},getFloorBar:function(){return this.Qk},getFeaturesLayer:function(){return this.io},nu:function(a){!this.Ym()|| this.get("hideFloorBar")||this.aj?this.Qk&&this.Qk.hide():(a=this.ifa(a),this.Qk||(this.Qk=new g.qW(this.get(g.l.ba?"floorBarOptionsForMobile":"floorBarOptions")),this.tga(),this.sa.C=!0,this.sa.addControl(this.Qk),this.sa.C=!1),this.Qk.set("floorData",a),a?this.Qk.show():this.Qk.hide())},mja:function(a){var b=a.uu;if(!b)return null;var c=b.wa;if(!c)return null;var d=null;c.cpid&&(d=this.Fb.YP(b));return{building_id:c.Pt,floor:c.sG,lnglat:a.Of||a.lnglat,shop:d}},GB:function(a){a=a.Of||a.lnglat;a&& this.CB&&a.hb(this.CB)||(this.CB=a,this.kY(a))},kY:function(a,b){function c(){d.jN=null;d.vO&&a?(d.$f.show(),d.$f.setPosition(a)):d.$f.hide()}this.jN&&clearTimeout(this.jN);this.$f.get("visible")&&this.$f.hide();var d=this;b?c():this.jN=setTimeout(c,100)},wx:function(a,b,c){this.get("disableIndoorMouseoverHighlight")&&(a=null);var d=null;this.Kx=null;a&&(a.wa?a.wa.pid||("floor"===a.wa.Kl&&(a=this.Fb.S3(a.wa.Pt))&&(d=a),a=null):a=null);a&&!d&&(d=a.wa.name||a.wa.name_cn);if(d)for(var e=["\\u8f85\\u52a9\\u9762"], f=0,h=e.length;f<h;f++){if(0<=d.indexOf(e[f])){a=d=null;break}}else a=null;if(a)switch(a.wa.Kl){case "shops":this.Kx=a}this.$f&&(d?(this.vO!==d&&(this.vO=d,this.$f.setContent(\'<div class="amap-indoor-map-moverf-marker">\'+d+"</div>")),this.kY(c.Of||c.lnglat,!0)):(this.vO=null,this.$f.hide(),this.$f.setContent("")));this.Pka(b)},Pka:function(a){this.KV&&g.a.si(this.KV);this.KV=g.a.Xc(function(){this.KV=null;this.J0(a)},this)},Qfa:function(a){if(this.aj)console.warn("Layer is hidden");else{var b=this.mja(a); if(!b)this.wx(null),b=null;else if(b.building_id){a.cCa=!0;a.type||(a.type=a.type);var c=b.building_id,d="click"===a.type,e="mouseover"===a.type,f="mouseout"===a.type;if(d||e)d&&this.jga(),this.Wl!==c&&this.vu({id:b.building_id});e?(this.kP("default"),this.wx(a.uu,c,a,b)):f&&(this.kP(this.get("cursor")),this.wx(null))}g.event.O(this,a.type,b||a)}},oH:function(a){this.jP&&clearTimeout(this.jP);var b=this;this.jP=setTimeout(function(){b.jP=null;b.so()},a||100)},cg:function(){if(!this.Yt)return null; var a=this.constructor.cd.cg.apply(this,arguments),b=this;setTimeout(function(){b.mapChanged()},0);return a},mB:function(){return this.get("map")},Yea:function(){var a=this.mB();return a?a.map:null},bCa:function(){var a=this.mB();return a?g.Nj.F3(a):null},aCa:function(a,b){var c=this.sa.getResolution(),d=this.sa.Cb(this.sa.get("center")),e=b.yi(),f=this.sa.get("size"),h=Math.abs(d.y-e.y)/c;return Math.abs(d.x-e.x)/c>3*f.width||h>3*f.height},AN:function(){if(this.aj||!this.Ym())return[];var a=this.HN(), b=[],c=[];a&&this.Fb.forEach(function(c){if(this.Fb.DS(c)){var d=this.Fb.lm(c);d&&a.$g(d,0)&&b.push(c.id)}},this);if(c.length)for(var d=0,e=c.length;d<e;d++)this.Fb.Ewa(c[d]);return b},so:function(){this.Gw||(this.zE=g.a.Xc(this.U0,this),this.Gw=!0)},QY:function(a){return a.Go||a.Tc||1},Ym:function(){return!(!this.sa||!this.yc)},Kla:function(a){if(this.Ym()){var b=this;setTimeout(function(){a.call(b)},0)}else this.UB||(this.UB=[]),this.UB.push(a)},Vfa:function(){if(this.UB){var a=this.UB;this.UB= null;for(var b=0,c=a.length;b<c;b++)a[b].call(this)}},QB:function(a){this.Ym()&&!this.aj&&(a||this.J$()&&(a=g.Nj.uqa(this.sa)),a&&a.length&&this.Fb.Hta(a))},ZU:function(a,b,c,d){d=g.extend({i$:!0},d);var e=this;if(this.Ym()){var f=!1,h=this.Qk,k=this.Fb.Rh(a);h&&(k&&this.Fb.G5(k,b)||(f=!0),f&&h.Z8(a,b,!0));var l=function(b,e){var f;f=b?{status:1,error:b}:{status:0,building:this.Fb.rR(e)};g.extend(f,{id:a});!1!==d.i$&&g.event.O(this,"floor_complete",f);c&&c.call(this,b,e,f)};this.Fb.VS({id:a,C8:b}, function(c,d){!c&&b&&(d.Tc=b);f&&h.Z8(a,b,!1);c?l.call(e,c,d):(e.wx(null),e.so(),e.vu(d),l.call(e,null,d))})}else{var m=Array.prototype.slice.call(arguments,0);this.Kla(function(){this.ZU.apply(this,m)})}},Mka:function(a){return!this.Ym()||a&&a.yHa&&(a=this.yc,a.sg||a.fj||a.Kf&&this.YN())?!1:!0},U0:function(){this.yc&&this.yc.set("display")},kI:function(){var a=this.sa;if(a&&a.map){if(this.get("alwaysShow"))return!0;a.C=!0;a.getLayers();a.C=!1;for(var b in a.map.la)if(g.q.fi&&a.map.la[b]instanceof g.q.fi)return!0;return!1}},render:function(a){if(this.kI())if(this.zE&&g.a.si(this.zE),this.Gw=!1,this.QB(),this.Mka()){var b=this.yx();b.wi=a;this.N0=this.zX++;this.Gla(b.Vr,b);this.Dka(b.Vr,b);this.WA(this.zZ);this.WA(this.uB);this.WA(this.RN);this.WA(this.FG);this.JH(b.Vr);this.NA()}else this.oH(500)},eG:function(){this.DB=null},getRenderLabels:function(){if(!this.Ym()||this.get("disableLabelRender")||this.aj||0<this.Rd.ER())return this.eG(),[];var a=this.yx(),b=[];if(this.DB&&this.DB.result.kja=== this.get("opacity")&&(this.DB.Wza===a.key||this.YN()||this.KZ))b=this.DB.result;else{var c=a.Vr,b=[];b.hI=[];for(var d=0,e=c.length;d<e;d++){var f=c[d];f.Tc||(f.Tc=this.QY(f));var h=this.Rd.ara(f,a),k=this.get("opacity");g.a.Ub(h,function(a){a.floor=f.Tc;a.opacity=k});b.push.apply(b,h);b.hI.push(f.Xp.W)}b&&0<b.length&&0===this.Rd.ER()&&(b.kja=this.get("opacity"),this.DB={Wza:a.key,result:b})}b.dGa=this.AN();return b},getVisibleBuildingIds:function(){g.c.add(this,"getVisibleBuildingIds");return this.TB|| []},getBuildingInfoById:function(a){return this.Fb.vqa(a)},JH:function(a){var b=[];if(a&&!this.aj)for(var c=0,d=a.length;c<d;c++)this.Fb.DS(a[c])&&b.push(a[c].id);b.sort();a=this.TB||[];this.TB=b;g.Nj&&g.Nj.Gxa(b,this.sa);a.join(",")!==b.join(",")&&(this.r("visibleBuildingChanged",{oldIds:a,newIds:this.TB}),this.Bca())},yx:function(){for(var a=this.AN(),b=[],c=[],d=[],e=0,f=a.length;e<f;e++){var h=this.Fb.Rh(a[e]);h?(b.push(h),d.push(h.id),c.push(h.id+"_"+h.Tc+(h.rH?"_sel":""))):console.warn("Can not find bld: ", a[e])}c.sort();var k;this.Ym()?(a=this.HN(),e=this.sa.get("zoom"),k=this.sa.get("viewMode")):(a=new g.Xf(0,0,0,0),e=0);return{Vf:k,Vr:b,YCa:d,Ha:a,zoom:e,key:e+";"+a.toString()+";"+c.join(",")}},Gla:function(a){var b,c,d=[];b=0;for(c=a.length;b<c;b++)d.push(a[b].id+"_"+a[b].Tc);b=d.sort().join(";");if(this.of.Ila!==b){this.of.Ila=b;this.of.clear();var e=this;this.of.qP&&g.a.cQ(this.of.qP);this.of.qP=g.a.uU(function(){e.of&&(e.of.qP=null,e.rka(a))},{timeout:20})}},rka:function(a){for(var b=[],c=0, d=a.length;c<d;c++){var e=a[c];if(e=this.Fb.mq(e,e.Tc,!0))e.im&&b.push(e.im),b.push.apply(b,e.ha)}this.of.ey(b)},HN:function(){var a=this;if(!this.sa)return null;var b=this.sa.get("coordsBound");if("IndoorLayer3D"===this.LAYER_NAME){if(!b)return{};b.$g=function(c){var d=[],e=c.Xd;c=c.kc;var f=[new g.H(c.x,c.y),new g.H(e.x,c.y),new g.H(e.x,e.y),new g.H(c.x,e.y),new g.H(c.x,c.y)];g.a.Ub(b.path,function(b){b=new g.H(b[0],b[1]);d.push(a.sa.p20ToLngLat(b))});g.a.Ub(f,function(b,c){f[c]=a.sa.p20ToLngLat(b)}); return g.Ht.doesPolygonPolygonIntersect(d,f)}}return b},Lda:function(a,b){if(0===parseInt(this.sa.get("rotation"),10)%360)return this.sa.Zd(a,b);var c=this.sa;a=a.eb();var d=c.Qd(a),e=c.get("center");-180>e.R-d.R?a.x-=g.a.Fa:180<e.R-d.R&&(a.x+=g.a.Fa);d=c.get("centerCoords");d=a.bb(d).nd(1<<20-b);c=c.get("size").RE().nd(2);e=d.x*Math.cos(0)-Math.sin(0)*d.y;d=Math.sin(0)*d.x+Math.cos(0)*d.y;return c.add(new g.H(e,d))},K0:function(a,b,c){if(!a)console.warn("Empty image");else if(g.a.isArray(a))for(var d= 0,e=a.length;d<e;d++)this.K0(a[d],b,c);else if(!a.Td||c.Vza.$g(a.Td,0)){var f=a.Ba;"function"===typeof f&&(f=f(a));f&&(f.jd=this.N0,d=a.ge,d=this.Lda(new g.H(d[0],d[1]),c.zoom),a={position:"absolute",width:Math.round(a.width)+"px",height:Math.round(a.height)+"px",left:Math.ceil(d.x)+"px",top:Math.ceil(d.y)+"px"},g.extend(f.style,a),f.parentNode!==b&&(b.appendChild(f),c.Cz&&!g.l.ba&&(f.style.opacity=c.Cz,g.Tw.V1(f,1E3),setTimeout(function(){f.style.opacity=1},0))))}},O0:function(a,b,c){g.f.zm(a,b|| a.width,c||a.height,!0)},Eka:function(a,b,c){this.wu?c.kh&&this.O0(this.wu):(this.wu=document.createElement("canvas"),this.uB.appendChild(this.wu));this.Zx?c.kh&&this.O0(this.Zx):(this.Zx=document.createElement("canvas"),this.FG.appendChild(this.Zx));c=[{av:this.Rd.ipa,K:this.uB,AQ:[a,b,this.wu,{kh:c.kh}]},{av:this.Rd.hpa,K:this.uB,AQ:[a,b,this.wu,{kh:!1}]},{disable:this.get("disableLabelRender")||b.wi&&b.wi.lU,av:this.Rd.kpa,K:this.FG,AQ:[a,b,this.Zx,{kh:c.kh}]}];this.bP(a,b,c)},bP:function(a,b, c){for(var d=0,e=c.length;d<e;d++)if(!c[d].disable){var f=c[d].AQ||[a,b,!0];c[d].y3&&f.push.apply(f,c[d].y3);(f=c[d].av.apply(this.Rd,f))&&this.K0(f,c[d].K,{XCa:a.id,Cz:c[d].Cz,Vza:b.Ha,zoom:b.zoom})}},J0:function(a,b){"string"===typeof a&&(a=this.Fb.Rh(a));b||(b=this.yx());var c=!0;a&&!this.YN()&&this.Kx||(c=!1);this.Kx&&c&&(this.Rd.EE(this.Kx,b.zoom+this.Rd.uo,{tt:"polygon"}),this.Kx.style||(c=!1));c?(this.rZ||(this.rZ=document.createElement("canvas")),c=this.get("shopHighlightCoverStyle")||this.fea, c.ln||(c.ln="highlight"),c=[{av:this.Rd.Qqa,y3:[{canvas:this.rZ,ha:[g.extend(new g.bi,this.Kx,{style:c})]}],K:this.RN,Cz:0.1}],this.bP(a,b,c)):this.WA(this.RN,-1)},Fka:function(a,b){var c=[{av:this.Rd.Sqa,K:this.zZ},{av:this.Rd.Rqa,K:this.uB,Cz:0.1},{disable:this.get("disableLabelRender")||b.wi&&b.wi.lU,av:this.Rd.$qa,K:this.FG,Cz:0.1}];this.bP(a,b,c);g.l.ba||this.J0(a,b)},Mla:function(a,b){this.sa.C=!0;var c=this.sa.getResolution(null,b.zoom);this.sa.C=!1;var d=8E5;"undefined"!==typeof screen&&screen.width&& screen.height&&(d=screen.width*screen.height*1.3);for(var e=0,f=a.length;e<f;e++){var h=this.Fb.lm(a[e]);if(h){var k=h.wj()/c,h=h.uj()/c;if(k*h>d)return!0}}return!1},Dka:function(a,b){var c=this.dP;c&&this.Mla(a,b)&&(c=!1);for(var d=0,e=a.length;d<e;d++){var f=a[d];f.Tc||(f.Tc=this.QY(f));c?this.Fka(f,b):this.Eka(f,b,{kh:0===d})}},WA:function(a,b){if(a){b=b||this.N0;for(var c=Array.prototype.slice.call(a.childNodes,0),d=c.length-1;0<=d;d-=1){var e=c[d];e&&e.jd!==b&&a.removeChild(e)}}}};z.q.Faa=z.q.El.extend(z.q.QL); ')
